define("config",["angular"],function(e){"use strict";return e.module("app.config",[]).constant("VERSION","0.1").constant("BASE_PATH","http://60.191.5.132/gfin").constant("WT_BASE_PATH","http://60.191.5.132/gmkt").constant("WZ_BASE_PATH","https://www.jkjrj.com/").constant("VIDEO_PATH","http://60.191.5.132/openOnline").constant("GCS_BASE_PATH","gcs").constant("HELP_CHANNEL_ID","228").constant("CACHE_MAX_AGE",6e4).constant("PULLING_TEXT","下拉刷新").constant("REFRESHING_TEXT","松开并刷新")}),define("bindOnce",["angular"],function(){!function(){"use strict";var e=angular.module("pasvaz.bindonce",[]);e.directive("bindonce",function(){var e=function(e){if(e&&0!==e.length){var t=angular.lowercase(""+e);e=!("f"===t||"0"===t||"false"===t||"no"===t||"n"===t||"[]"===t)}else e=!1;return e},t=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);isNaN(t)&&(t=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10));var n={restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function(n,r,o,a){var i=function(t,n,r){var o="show"===n?"":"none",a="hide"===n?"":"none";t.css("display",e(r)?o:a)},c=function(e,t){if(angular.isObject(t)&&!angular.isArray(t)){var n=[];angular.forEach(t,function(e,t){e&&n.push(t)}),t=n}t&&e.addClass(angular.isArray(t)?t.join(" "):t)},s=function(e,t){e.transclude(t,function(t){var n=e.element.parent(),r=e.element&&e.element[e.element.length-1],o=n&&n[0]||r&&r.parentNode,a=r&&r.nextSibling||null;angular.forEach(t,function(e){o.insertBefore(e,a)})})},l={watcherRemover:void 0,binders:[],group:o.boName,element:r,ran:!1,addBinder:function(e){this.binders.push(e),this.ran&&this.runBinders()},setupWatcher:function(e){var t=this;this.watcherRemover=n.$watch(e,function(e){void 0!==e&&(t.removeWatcher(),t.checkBindonce(e))},!0)},checkBindonce:function(e){var t=this,n=e.$promise?e.$promise.then:e.then;"function"==typeof n?n(function(){t.runBinders()}):t.runBinders()},removeWatcher:function(){void 0!==this.watcherRemover&&(this.watcherRemover(),this.watcherRemover=void 0)},runBinders:function(){for(;this.binders.length>0;){var n=this.binders.shift();if(!this.group||this.group==n.group){var r=n.scope.$eval(n.interpolate?a(n.value):n.value);switch(n.attr){case"boIf":e(r)&&s(n,n.scope.$new());break;case"boSwitch":var o,l=n.controller[0];(o=l.cases["!"+r]||l.cases["?"])&&(n.scope.$eval(n.attrs.change),angular.forEach(o,function(e){s(e,n.scope.$new())}));break;case"boSwitchWhen":var u=n.controller[0];u.cases["!"+n.attrs.boSwitchWhen]=u.cases["!"+n.attrs.boSwitchWhen]||[],u.cases["!"+n.attrs.boSwitchWhen].push({transclude:n.transclude,element:n.element});break;case"boSwitchDefault":var u=n.controller[0];u.cases["?"]=u.cases["?"]||[],u.cases["?"].push({transclude:n.transclude,element:n.element});break;case"hide":case"show":i(n.element,n.attr,r);break;case"class":c(n.element,r);break;case"text":n.element.text(r);break;case"html":n.element.html(r);break;case"style":n.element.css(r);break;case"disabled":n.element.prop("disabled",r);break;case"src":n.element.attr(n.attr,r),t&&n.element.prop("src",r);break;case"attr":angular.forEach(n.attrs,function(e,t){var r,o;t.match(/^boAttr./)&&n.attrs[t]&&(r=t.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=n.scope.$eval(n.attrs[t]),n.element.attr(r,o))});break;case"href":case"alt":case"title":case"id":case"value":n.element.attr(n.attr,r)}}}this.ran=!0}};angular.extend(this,l)}],link:function(e,t,n,r){var o=n.bindonce&&e.$eval(n.bindonce);void 0!==o?r.checkBindonce(o):(r.setupWatcher(n.bindonce),t.bind("$destroy",r.removeWatcher))}};return n}),angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boBind",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boDisabled",attribute:"disabled"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"},{directiveName:"boIf",transclude:"element",terminal:!0,priority:1e3},{directiveName:"boSwitch",require:"boSwitch",controller:function(){this.cases={}}},{directiveName:"boSwitchWhen",transclude:"element",priority:800,require:"^boSwitch"},{directiveName:"boSwitchDefault",transclude:"element",priority:800,require:"^boSwitch"}],function(t){var n=200;return e.directive(t.directiveName,function(){var e={priority:t.priority||n,transclude:t.transclude||!1,terminal:t.terminal||!1,require:["^bindonce"].concat(t.require||[]),controller:t.controller,compile:function(e,n,r){return function(e,n,o,a){var i=a[0],c=o.boParent;if(c&&i.group!==c){var s=i.element.parent();i=void 0;for(var l;9!==s[0].nodeType&&s.length;){if((l=s.data("$bindonceController"))&&l.group===c){i=l;break}s=s.parent()}if(!i)throw new Error("No bindonce controller: "+c)}i.addBinder({element:n,attr:t.attribute||t.directiveName,attrs:o,value:o[t.directiveName],interpolate:t.interpolate,group:c,transclude:r,controller:a.slice(1),scope:e})}}};return e})})}()}),define("filters/InterpolateFilter",["angular"],function(e){"use strict";var t=function(e){return function(t){return String(t).replace(/\%VERSION\%/gm,e)}};return t.$inject=["VERSION"],t}),define("filters/DefNumberFilter",["angular"],function(e){"use strict";var t=function(){return function(t,n,r){if(null==t||"undefined"==typeof t||0==t.length)return"--";if(isNaN(t))return t;var o=t;return null!=n&&(o=parseFloat(t).toFixed(n)),e.isDefined(r)?o+r:o}};return t.$inject=[],t}),define("filters/ProdMinSubscribeFilter",["angular"],function(e){"use strict";var t=function(e){return function(e,t){if(null==e||"undefined"==typeof e||""==e)return"--";if(2==t){var n=parseFloat(e);return 0==n?"0.01元":n<1?n.toFixed(2)+"元":n<1e4?n.toFixed(0)+"元":n.toFixed(0)/1e4+"万元"}var n=parseFloat(e);if(0==n)return"0.01<sub>元</sub>";if(n<1)return n.toFixed(2)+"<sub>元</sub>";if(n<1e4)return n.toFixed(0)+"<sub>元</sub>";var r="<sub>万元</sub>";return 3==t&&(r="<sub>万元起</sub>"),n.toFixed(0)/1e4+r}};return t.$inject=["$sce"],t}),define("filters/DefStringFilter",["angular"],function(e){"use strict";var t=function(){return function(t,n,r){return null==t||"undefined"==typeof t||""==t?"--":e.isDefined(n)?t+n:t}};return t.$inject=[],t}),define("filters/DefDateStringFilter",["angular"],function(e){"use strict";var t=function(){return function(e,t,n){if(null==e||""==e||"undefined"==typeof e)return"--";var r;return r=1==t||e&&8==e.length?1==t?e.substr(4,2)+"月"+e.substr(6,2)+"日":e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2):e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2)+" "+e.substr(8,2)+":"+e.substr(10,2)+":"+e.substr(12,2)}};return t.$inject=[],t}),define("filters/BankAccountFilter",["angular"],function(e){"use strict";var t=function(){return function(e,t,n){return null==e||""==e||"undefined"==typeof e?"--":e.substring(e.length-3)}};return t.$inject=[],t}),define("filters/DatetimeFilter",["angular"],function(e){"use strict";var t=Date.now(),n=function(e){return function(n){var r=(t-new Date(n).getTime())/100/60/60;return r>24?e("date")(n,"MM-dd"):e("date")(n,"HH:mm")}};return n.$inject=["$filter"],n}),define("filters/PhoneNumberFilter",["angular"],function(e){"use strict";var t=function(){return function(e){return null==e||""==e||"undefined"==typeof e?"":e.substring(0,3)+"****"+e.substring(e.length-4)}};return t.$inject=[],t}),define("filters/DictionaryFilter",["angular"],function(e){"use strict";var t=function(t){return function(n,r,o){if(null==n||"undefined"==typeof n||""==n)return"--";if(e.isDefined(r)){var a=t.getByKey(r);return a[n]?a[n]:o?o:"--"}return"--"}};return t.$inject=["DictionaryService"],t}),define("services/DictionaryService",["angular"],function(e){"use strict";var t=function(){var e=[{text:"文教科卫专业人员",val:"01"},{text:"党政 ( 在职，离退休 ) 机关干部",val:"02"},{text:"企事业单位干部",val:"03"},{text:"行政企事业单位工人",val:"04"},{text:"农民",val:"05"},{text:"个体",val:"06"},{text:"无业",val:"07"},{text:"军人",val:"08"},{text:"学生",val:"09"},{text:"其他",val:"99"}],t=[{text:"博士",val:"1"},{text:"硕士",val:"2"},{text:"学士",val:"3"},{text:"大专",val:"4"},{text:"中专",val:"5"},{text:"高中",val:"6"},{text:"初中及其以下",val:"7"},{text:"其他",val:"8"}],n=[{text:"父母",val:"1"},{text:"配偶",val:"2"},{text:"兄妹",val:"3"},{text:"亲戚",val:"4"},{text:"朋友",val:"5"}],r=[{text:"7天",val:"1"},{text:"30天",val:"2"},{text:"90天",val:"3"},{text:"180天",val:"4"}],o=[{text:"投资",val:"1"},{text:"生产",val:"2"},{text:"还贷",val:"3"},{text:"流转",val:"4"}],a={1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六",0:"星期日"},i={0:"默认等级",1:"保本等级",2:"低风险等级",3:"中低风险等级",4:"中风险等级",5:"中高风险等级",6:"高风险等级",7:"极高风险等级"},c={0:"份额分红",1:"现金分红"},s="1000,2,3,8,15,16,17,19,20,21,22,25,26,27,28,31,32,33,35,36,37,38,39,58,59,61,63,66,67,68,81,82,",l="data:image/jpg;base64,",u="30001231";return{getUsageOfLoan:function(){return o},getBorrowingPeriod:function(){return r},getProfessionAds:function(){return e},getDegreeAds:function(){return t},getRelationshipAds:function(){return n},getWeeks:function(){return a},getBranchs:function(){return s},getBase64StrHead:function(){return l},getEndtime:function(e){return e&&"长期"!=e?e:this.getDefEndtime()},getDefEndtime:function(){return u},getByKey:function(e){switch(e){case"prodRisks":return i;case"prodShareTypes":return c}return null}}};return t.$inject=[],t}),define("services/LocalCacheService",["angular","store"],function(e,t){"use strict";var n=function(e,n,r){return r("UserCache",{deleteOnExpire:"aggressive",maxAge:36e5,storageMode:"sessionStorage",storagePrefix:"tfzq."}),{setAppContextName:function(e){e&&t.set("appContextName",e)},getAppContextName:function(){var e=t.get("appContextName");return e&&""!=e&&"undefined"!=e?e:""},setRecommendInfos:function(e){e&&(e.length>5&&(e=e.substr(0,5)),t.set("recommendInfos",e))},getRecommendInfos:function(){var e=t.get("recommendInfos");return e&&""!=e&&"undefined"!=e?e:""},setUser:function(e){var t=r.get("UserCache"),n=t.get("user");null!=n&&(e.token=n.token),t.put("user",e)},getUser:function(){var e=r.get("UserCache");return e.get("user")},removeUser:function(){var e=r.get("UserCache");e.remove("user")},setOpenUser:function(e){t.set("openUser",e)},getOpenUser:function(){return t.get("openUser")},removeOpenUser:function(){t.remove("openUser")},setAccount:function(e){t.set("account",e)},getAccount:function(){return t.get("account")},removeAccount:function(){t.remove("account")},getRememberAccount:function(){return t.get("rememberAccount")},setRememberAccount:function(e){return t.set("rememberAccount",e)},set:function(e,n){t.set(e,n)},get:function(e){return t.get(e)},remove:function(e){t.remove(e)}}};return n.$inject=["$location","$http","CacheFactory"],n}),define("services/CommonService",["angular","store"],function(e,t){"use strict";var n=function(n,r,o,a,i,c,s,l,u,d,f){function p(e){var n={method:e.type||"POST",serverName:e.basePath||a.basePath,requestPath:e.url,params:e.data||{},headers:{}};n.headers["User-Agent"]=navigator.userAgent;var r=t.get("UUID");r&&(n.headers.UUID=r);var o=d.get("UserCache"),i=o.get("user");i&&(n.headers.TOKEN=i.token);var l=c.defer();return TDXInterface.sendData({tdxFuncData:JSON.stringify(n),PasswordSessionID:e.PasswordSessionID},function(n){try{var r=JSON.parse(n.text);r&&"0"==r.error_no?l.resolve(r.data):("AH-10001"==r.error_no?(t.remove("user"),a.$emit("userIntercepted","sessionOut"),l.reject(r)):(e.isReject||g(null,r,e.styleType),l.reject(r)),s.hide())}catch(o){l.reject({error_no:-102,error_info:"获取超时"})}}),l.promise}function m(t){var n="wt"==t.basePath?t.url:(t.basePath||a.basePath)+t.url,i={method:t.type||"post",url:n,timeout:35e3};if("post"==i.method)i.data=t.data||{};else{var l=o(t.data||{});if(i.url+=l?"?"+l:"",i.offline=!0,t.cache){i.cache=d.get("xcmCache");var u=i.cache.get(i.url);u&&(u[1]&&"0"!=e.fromJson(u[1]).error_no?i.cache.remove(i.url):e.isFunction(u.then)&&u.then(function(t){t&&t.data&&"0"!=e.fromJson(t.data).error_no&&i.cache.remove(i.url)}))}}var f=c.defer();return r(i).success(function(e,n,r,o){e&&"0"==e.error_no?f.resolve(e.data):(t.isReject||g(null,e,t.styleType),f.reject(e),s.hide())}).error(function(e,n,r,o){4==XMLHttpRequest.readyState&&("200"==XMLHttpRequest.status||"OK"==textStatus?t.isReject||_(null,XMLHttpRequest.responseText):y({message:"调用数据失败,请稍后再试."})),f.reject(XMLHttpRequest.responseText),s.hide()}),f.promise}function h(e){var t=(e.basePath||a.basePath)+e.url;e.data.url=t;var n=c.defer();return e.data.userAgent=navigator.userAgent,ThsTools.sdkLogin(e.data,function(t){t&&"0"==t.error_no?n.resolve(t.result):(e.isReject||g(null,t,e.styleType),n.reject(t),s.hide())}),n.promise}function g(e,t,n){e?e(t):n&&1==n?b({message:C(t)},1):y({message:C(t)})}function _(e,t){e?e(t):y({message:t})}function v(e){var t=e.message,n=e.fixed||!0,r=t.width(),o=t.height();if(n){var a=e.width||300,i=e.height||150;r=r<a?a:r,o=o<i?i:o}var c=$(window).width(),s=(c-r)/2,l=$(window).height(),u=(l-o)/2;u=u<30?30:u;var d=Math.floor(u/l*100);return d=d<20?20:d,{left:s+"px",width:r+"px",height:o+"px",top:d+"%"}}function b(e,t){1==t?TF.Bubble.show(e.message):TF.BubbleOut.show(e.message),e.onUnblock&&e.onUnblock()}function y(e){return l.show({cssClass:"kDialog",template:e.message,title:e.title?e.title:"提示",buttons:[{text:e.okText?e.okText:"确定"}]})}function C(e){return e.error_info&&"null"!=e.error_info?e.error_info:"string"==typeof e?e:"object"==typeof e?e.errorMessage:"未知错误"}return d("xcmCache",{deleteOnExpire:"aggressive",maxAge:f,storageMode:"localStorage",storagePrefix:"tfzq."}),{productPageUrl:function(e,t,n){var r=null;return"0,3".indexOf(e)>-1?r="tab/product-item":"1"==e?r="tab/product-item-QDII":"2"==e?(r="tab/product-item","1"==t&&(r="tab/product-item-otc")):"4"==e&&(r="tab/product-item","1"==t&&(r="tab/product-item-otc-float")),r},getOtcSellStatus:function(e,t){var n;return n="0,3,4".indexOf(e)>-1?"1"==t?1:"2,3".indexOf(t)>-1?3:2:"2"==e?4:"2,3".indexOf(t)>-1?3:5},getMinAmount:function(e){return 4==e.prod_status?e.prod_min_share:e.prod_min_subscribe},ajax:function(e){return"gcs_tdx"!=u.getAppContextName()&&"undefined"==typeof TDXInterface||!e.isSendData?"gcs_ths"==u.getAppContextName()&&e.isSendData?h(e):m(e):p(e)},getUrlParams:function(){return n.search()},position:function(){ionic.Platform.isIOS()&&($("header").css("position","absolute"),$(".service-tel").css("position","absolute"))},jsGetAge:function(e){var t,n=e.substr(0,4),r=e.substr(4,2),o=e.substr(6,8),a=new Date,i=a.getFullYear(),c=a.getMonth()+1,s=a.getDate();if(i==n)t=0;else{var l=i-n;if(l>0)if(c==r){var u=s-o;t=u<0?l-1:l}else{var d=c-r;t=d<0?l-1:l}else t=-1}return t},checkIdCard:function(e){var t;if(e=e.toUpperCase(),!/(^\d{15}$)|(^\d{17}([0-9]|X)$)/.test(e))return!1;var n,r;if(n=e.length,15==n){r=new RegExp(/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/);var o,a=e.match(r),i=new Date("19"+a[2]+"/"+a[3]+"/"+a[4]);if(o=i.getYear()==Number(a[2])&&i.getMonth()+1==Number(a[3])&&i.getDate()==Number(a[4])){t="19"+a[2]+a[3]+a[4];var c,s=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),l=new Array("1","0","X","9","8","7","6","5","4","3","2"),u=0;for(e=e.substr(0,6)+"19"+e.substr(6,e.length-6),c=0;c<17;c++)u+=e.substr(c,1)*s[c];return e+=l[u%11],t}return!1}if(18==n){r=new RegExp(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/);var o,a=e.match(r),i=new Date(a[2]+"/"+a[3]+"/"+a[4]);if(o=i.getFullYear()==Number(a[2])&&i.getMonth()+1==Number(a[3])&&i.getDate()==Number(a[4])){t=a[2]+a[3]+a[4];var d,c,s=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),l=new Array("1","0","X","9","8","7","6","5","4","3","2"),u=0;for(c=0;c<17;c++)u+=e.substr(c,1)*s[c];return d=l[u%11],d==e.substr(17,1)&&t}return!1}return!1},isStrEmpty:function(e){return null==e||"undefined"==typeof e||""==$.trim(e)},controlNum:function(e,t){return null==e||"undefined"==typeof e||""==e||isNaN(e)?"--":parseFloat(parseFloat(e).toFixed(t))},getSource:function(){var e;return e=ionic.Platform.isAndroid()?"ANDROID":ionic.Platform.isIOS()?"IOS":this.isWeixin()?"WEIXIN":"OTHER"},showAlert:function(e){var t=e.message,n=$.extend({},e,{message:t});if("object"===$.type(t)){var r=v(e);$.extend(n,{css:r})}b(n,1)},showLogout:function(e){var t=e.message,n=$.extend({},e,{message:t});if("object"===$.type(t)){var r=v(e);$.extend(n,{css:r})}b(n,2)},showNotice:function(e,t){var n=e.split("&&");t&&localStorage[t]&&1==localStorage[t]||l.show({cssClass:"kDialog",template:n[1],title:n[0],buttons:[{text:"关闭"}]}).then(function(){t&&(localStorage[t]=1)})},showConfig:function(e){return y(e)},showComplete:function(e,t,n){l.show({cssClass:"yDialog",templateUrl:e,buttons:[{text:t,onTap:function(){i.go(n)}}]})},showConfirm:function(e,t,n){l.show({cssClass:"kDialog",template:e.message,title:e.title?e.title:"提示",buttons:[{text:e.btn1Text?e.btn1Text:"取消",onTap:function(){t()}},{text:e.btn2Text?e.btn2Text:"确定",onTap:function(){n()}}]})},isBuyExperience:function(){var e=u.get("lcty_state");return!(!e||!e.stateName)},isWeixin:function(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)},getErrorInfo:function(e){return C(e)},stringToDate:function(e){var t=new Date;return t.setFullYear(parseInt(e.substr(0,4)),parseInt(e.substr(4,2))-1,parseInt(e.substr(6,2))),t},formatDate:function(e){return null==e||""==e||"undefined"==typeof e?"--":e=e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2)},formatDate2:function(e){if(null==e||""==e||"undefined"==typeof e)return"--";var t=e.substr(4,2)<"10"?e.substr(5,1):e.substr(4,2),n=e.substr(6,2)<"10"?e.substr(7,1):e.substr(6,2);return t+"月"+n+"日"},formatTime:function(e){if(null==e||""==e||"undefined"==typeof e)return"--";var t=e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2),n=e.substr(8,2)+":"+e.substr(10,2)+":"+e.substr(12,2);return t+" "+n},checkRegex:function(e,t){var n=new RegExp(e);return!!n.test($.trim(t))},trim:function(t){var n=new RegExp(" ","g");return t?e.isString(t)?t.replace(n,""):t.toString().replace(n,""):null},getPrevDate:function(){var e=new Date;return e.setDate(e.getDate()-1),e.getMonth()+1+"月"+e.getDate()+"日"}}};return n.$inject=["$location","$http","$httpParamSerializerJQLike","$rootScope","$state","$q","$ionicLoading","$ionicPopup","LocalCacheService","CacheFactory","CACHE_MAX_AGE"],n}),define("services/InfoService",["angular","require","base"],function(e,t,n){"use strict";var r=function(e,t,n,r,o){function a(e,t){var n={};return n.url=e,n.type="get",n.cache=!0,t&&(n.data=t),r.ajax(n)}function i(e,t){var n={};return n.url=e,n.type="get",n.cache=!1,t&&(n.data=t),r.ajax(n)}var c=2,s=20;return{getChannelInfosByRoot:function(){return a("/prod/catalog/catalogs",{tree_type:c,catalog_level:1})},getChannelInfosByParentId:function(e){return a("/prod/catalog/child_catalogs",{parent_catalog_id:e})},getChannelInfosByParentMark:function(e){return a("/prod/catalog/child_catalogs",{catalog_mark:e})},getChannelInfo:function(e){return a("/prod/catalog/catalog_detail",{catalog_id:e})},getProductsByParent:function(e,t,n,r){return a("/prod/list/parentcatalog_prods",{parent_catalog_id:e,orderRuleType:1,page_size:s,page_number:t})},getProductsByChannelId:function(e,t,n,r){return a("/prod/list/prods",{catalog_id:e,tree_type:n?n:c,page_size:s,page_number:t,price_increase_qry_type:r?r:null})},getOtcProductsByChannelId:function(e,t,n){return a("/prod/list/otc_prods",{catalog_id:e,tree_type:n?n:c,page_size:s,page_number:t})},getProdBriefs:function(e){return a("/prod/list/prods",{prod_codes:e})},getOtcProducts:function(e){return a("/prod/list/otc_prods",{prod_codes:e})},getIndexProfit:function(e){return a("/prod/history/index_profit",{index_code:e})},getHistoryIndex:function(e,t,n){return t&&8==t.length?a("/prod/history/index",{index_code:e,begin_date:t,end_date:n}):a("/prod/history/index",{index_code:e,count:t})},getChildCatalogProds:function(e,t){return a("/prod/list/childcatalog_prods",{parent_catalog_id:e,tree_type:c,page_size:s,page_number:t})},getOTCGeneral:function(e){return a("/prod/single/otc",{prod_code:e})},getFundGeneral:function(e){return a("/prod/single/prod",{prod_code:e})},getProdRate:function(e){return a("/prod/single/prod_rate",{prod_id:e})},getOTCDetail:function(e){return a("/prod/single/otc_detail",{prod_code:e})},getContentDetail:function(e){return a("/prod/single/prod_detail",{prod_code:e})},getHistoryYield:function(e,t){return a("/prod/history/yield",{prod_id:e,count:t})},getComparisonData:function(e,t){return a("/prod/history/csi300_nav",{prod_id:e,count:t})},getHistoryNav:function(e,t){return a("/prod/history/nav",{prod_id:e,count:t})},getOthersCare:function(){return i("/prod/list/others_care")},getShortTermFund:function(e,t){return a("/prod/single/short_sell",{fund_code:e,transaction_accountid:t})},getProfitDate:function(e,t){return a("/prod/single/profit_date",{prod_code:e,entrust_date:t})},getProdFiles:function(e){return a("/prod/single/prod_files",{prod_id:e})},getProdFileContent:function(e){return a("/prod/single/prod_file/detail",{file_id:e})},getThemeDetail:function(e){return a("/prod/single/prod_theme/detail",{theme_mark:e})},getProdByTheme:function(e,t,n){return a("/prod/single/prod_theme/prods",{theme_mark:e,relate_type:t,order_rule:n})},getProductsByTheme:function(e,t,n){return a("/prod/single/prod_theme_otc/prods",{theme_mark:e,relate_type:t,order_rule:n})},searchProds:function(e,t){return a("/prod/list/search_prods",{conditions:encodeURI(e),page_size:s,page_number:t})},getProductsList:function(){return a("/prod/list/fund",null)}}};return r.$inject=["$rootScope","$http","$ionicLoading","CommonService","LocalCacheService"],r}),define("services/HistoryNavChartService",["angular","store"],function(e,t){"use strict";var n=function(e,t,n){return{historyYieldChart:function(e){var t=[];if(e)for(var n=0;n<e.length;n++)t.push([parseInt(e[n].time),parseFloat(e[n].prod_yield)]);var r={size:{height:220},chart:{type:"line",plotBorderColor:"#868686",plotBorderWidth:1},title:{text:""},noData:"暂无数据",xAxis:{type:"datetime",gridLineWidth:1,labels:{formatter:function(){var e=new Date(this.value),t=e.getMonth()+1+"-"+e.getDate();return t},style:{color:"#000000"}}},legend:{enabled:!1},yAxis:{title:{text:" "},alternateGridColor:"#F7F7F7",labels:{formatter:function(){return this.value.toFixed(2)+"%"},style:{color:"#000000"}}},navigator:{enabled:!1},credits:{enabled:!1},tooltip:{shared:!0,followTouchMove:!0,xDateFormat:"%Y-%m-%d",valueDecimal:2,crosshairs:{width:2,color:"#9999FF",dashStyle:"shortdot"},borderColor:"#be8c4b",useHTML:!0,formatter:function(){var e=new Date(this.x),t="<b>"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"</b>";return t+='<br/><font color="'+this.points[0].series.color+'">七日年化收益率: '+this.y.toFixed(2)+"%</font>"}},plotOptions:{line:{marker:{enabled:!1},lineWidth:.75}},exporting:{enabled:!1},series:[{type:"line",color:"#F00",name:"七日年化走势图",marker:{radius:1,symbol:"circle"},data:t}]};return r},historyNavChart:function(e){var t=[];if(e)for(var n=0;n<e.length;n++)t.push([parseInt(e[n].time),parseFloat(e[n].prod_total_nav)]);var r={size:{height:200},chart:{type:"line",plotBorderColor:"#868686",plotBorderWidth:1},title:{text:""},noData:"暂无数据",xAxis:{type:"datetime",gridLineWidth:1,labels:{formatter:function(){var e=new Date(this.value),t=e.getMonth()+1+"-"+e.getDate();return t},style:{color:"#000000"}}},legend:{enabled:!1},yAxis:{title:{text:" "},alternateGridColor:"#F7F7F7",labels:{formatter:function(){return this.value.toFixed(2)},style:{color:"#000000"}}},navigator:{enabled:!1},credits:{enabled:!1},tooltip:{followTouchMove:!0,xDateFormat:"%Y-%m-%d",valueDecimal:2,crosshairs:{width:2,color:"#9999FF",dashStyle:"shortdot"},borderColor:"#be8c4b",useHTML:!0,formatter:function(){var e=new Date(this.x),t="<b>"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"</b>";return t+='<br/><font color="'+this.point.series.color+'">累计净值: '+this.y.toFixed(4)+"元</font>"}},plotOptions:{line:{marker:{enabled:!1},lineWidth:.75}},exporting:{enabled:!1},series:[{type:"line",color:"#F00",name:"累计净值",marker:{radius:1,symbol:"circle"},data:t}]};return r},historyIndexChart:function(e){var t=[];if(e)for(var n=0;n<e.length;n++)t.push([parseInt(e[n].time),parseFloat(e[n].index_close)]);var r={size:{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:200},chart:{type:"line",plotBorderColor:"#868686",plotBorderWidth:1},title:{text:""},noData:"暂无数据",xAxis:{type:"datetime",gridLineWidth:1,labels:{formatter:function(){var e=new Date(this.value),t=e.getMonth()+1+"-"+e.getDate();return t},style:{color:"#000000"}}},legend:{enabled:!1},yAxis:{title:{text:" "},alternateGridColor:"#F7F7F7",labels:{formatter:function(){return this.value.toFixed(2)},style:{color:"#000000"}}},navigator:{enabled:!1},credits:{enabled:!1},tooltip:{followTouchMove:!0,xDateFormat:"%Y-%m-%d",valueDecimal:2,crosshairs:{width:2,color:"#9999FF",dashStyle:"shortdot"},borderColor:"#be8c4b",useHTML:!0,formatter:function(){var e=new Date(this.x),t="<b>"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"</b>";return t+='<br/><font color="'+this.point.series.color+'">收盘指数: '+this.y.toFixed(2)+"</font>"}},plotOptions:{line:{marker:{enabled:!1},lineWidth:.75}},exporting:{enabled:!1},series:[{type:"line",color:"#F00",name:"收盘指数",marker:{radius:1,symbol:"circle"},data:t}]};return r},historyNavCSI300Chart:function(e,t){var n=[],r=[];if(e)for(var o=0;o<e.length;o++)n.push([parseInt(e[o].time),parseFloat(e[o].daily_growth_rate)]);if(t)for(var o=0;o<t.length;o++)r.push([parseInt(t[o].time),parseFloat(t[o].daily_growth_rate)]);var a={size:{height:220},chart:{type:"line",plotBorderColor:"#868686",plotBorderWidth:1},title:{text:""},noData:"暂无数据",xAxis:{type:"datetime",gridLineWidth:1,labels:{formatter:function(){var e=new Date(this.value),t=e.getMonth()+1+"-"+e.getDate();return t},style:{color:"#000000"}}},legend:{enabled:!0},yAxis:{title:{text:" "},alternateGridColor:"#F7F7F7",labels:{formatter:function(){return(100*this.value).toFixed(1)+"%"},style:{color:"#000000"}}},navigator:{enabled:!1},credits:{enabled:!1},tooltip:{shared:!0,followTouchMove:!0,xDateFormat:"%Y-%m-%d",valueDecimal:2,crosshairs:{width:2,color:"#9999FF",dashStyle:"shortdot"},borderColor:"#be8c4b",useHTML:!0,formatter:function(){var e=new Date(this.x),t="<b>"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"</b>";return t+='<br/><font color="'+this.points[0].series.color+'">累计净值涨跌幅: '+(100*this.points[0].y).toFixed(2)+"%</font>",t+='<br/><font color="'+this.points[1].series.color+'">沪深300涨跌幅: '+(100*this.points[1].y).toFixed(2)+"%</font>"}},plotOptions:{line:{marker:{enabled:!1},lineWidth:.75}},exporting:{enabled:!1},series:[{type:"line",color:"#F00",name:"累计净值",marker:{radius:1,symbol:"circle"},data:n},{type:"line",color:"blue",name:"沪深300",marker:{radius:1,symbol:"circle"},data:r}]};return a}}};return n.$inject=["$location","$http","$rootScope"],n}),define("services/ConcernService",["angular"],function(e){"use strict";var t=function(e,t){return{isConcern:function(t){var n=e.get("userCare");if(n)for(var r=0;r<n.length;r++)if(n[r]==t)return!0;return!1},concern:function(t){var n=e.get("userCare");if(!n||n.length<=0)return n=new Array,n.push(t),e.set("userCare",n),!0;var r=n.indexOf(t);return r>-1?(n.splice(r,1),e.set("userCare",n),!1):(n.push(t),e.set("userCare",n),!0)},getConcernList:function(){var t="",n=e.get("userCare");return n&&n.length>0&&(t=n.join(",")),t}}};return t.$inject=["LocalCacheService","CommonService"],t}),define("services/WebService",["angular","store"],function(e,t){"use strict";var n=function(e,t,n,r,o,a,i,c){return{getCurrentOpenUser:function(){var e={};return e.url="/open/get_open_user",e.isReject=!0,e.type="get",i.ajax(e)},sendCheckCode:function(e){e.op_station=c.get("op_station");var t={};return t.isReject=!0,t.url="/open/send_check_code",t.data=e,i.ajax(t)},checkMobileCode:function(e){var t={};return t.isReject=!0,t.url="/open/check_mobile_code",t.data=e,i.ajax(t)},msgVerify:function(e){var t={};return t.isReject=!0,t.url="/open/msg_verify",t.data=e,i.ajax(t)},selectBranch:function(e){var t={};return t.url="/open/select_branch",t.data=e,i.ajax(t)},uploadID:function(e){var t={};return t.url="/open/upload_ID",t.isReject=!0,t.data=e,i.ajax(t)},open:function(e){var t={};return t.url="/open/open",t.data=e,t.isReject=!0,i.ajax(t)},certInstall:function(){var e={};return e.isReject=!0,e.url="/open/zj_install",e.data={source:i.getSource()},i.ajax(e)},openSubmitPaper:function(e){var t={};return t.url="/open/submit_paper",t.data=e,i.ajax(t)},setPwd:function(e){var t={};return t.url="/open/set_pwd",t.data=e,i.ajax(t)},openBankAccount:function(e){var t={};return t.isReject=!0,t.url="/open/open_bank_account",t.data=e,i.ajax(t)},saveEcontract:function(){var e={};return e.url="/open/save_econtract",e.data={source:i.getSource()},i.ajax(e)},qryRevisitPaper:function(){var e={};return e.url="/open/revisit_paper",e.type="get",e.cache=!0,i.ajax(e)},submitRevisitPaper:function(e){var t={};return t.url="/open/submit_revisit_paper",t.data=e,i.ajax(t)},qryOpenResult:function(){var e={};return e.url="/open/qry_open_result",i.ajax(e)},open0:function(e){var t={};return t.url="/open/open0",t.data=e,i.ajax(t)},checkIdNo:function(e){var t={};return t.url="/open/check_id_no",t.data=e,i.ajax(t)},querySellInfo:function(e){var t={};return t.url="/prod/single/qry_secum",t.data={prod_code:e},t.type="get",i.ajax(t)},queryIFSProdInfo:function(e,t){var n={};return"0"==t?(n.data={prod_code:e},n.url="/prod/single/qry_bankm"):"1"==t?(n.data={prod_code:e},n.url="/prod/single/qry_trade"):"2"==t&&(n.data={fund_code:e},n.url="/prod/single/qry_uf"),n.type="get",i.ajax(n)},getEncontractList:function(e){var t={};return t.url="/common/encontract/list",t.type="get",t.data={econtract_type:e},t.cache=!0,i.ajax(t)},getEncontract:function(e){var t={};return t.url="/common/encontract/content/"+e,t.type="get",t.cache=!0,i.ajax(t)},qryDjTa:function(){var e={};return e.url="/common/fund/qry_dj_ta",e.type="get",i.ajax(e)},getRiskPaper:function(){var e={};return e.url="/common/risk_paper",e.type="get",e.cache=!0,i.ajax(e)},qeyAllPayBank:function(){var e={};return e.url="/boss/qry_pay_banks",e.data={conduit_no:c.getRecommendInfos()},e.type="get",e.cache=!0,i.ajax(e)},qryAllDepositBank:function(){var e={};return e.url="/boss/qry_deposit_banks",e.data={conduit_no:c.getRecommendInfos()},e.cache=!0,e.type="get",i.ajax(e)},qryProdWhite:function(){var e={};return e.url="/boss/check_prod_white",e.data={source_id:c.get("UUID")},e.cache=!0,e.type="get",i.ajax(e)},qryBranch:function(){var e={};return e.url="/boss/qry_branch",e.type="get",e.cache=!0,i.ajax(e)},qryProvince:function(){var e={};return e.url="/boss/qry_province",e.type="get",e.cache=!0,i.ajax(e)},qryDictInfo:function(e){var t={};return t.url="/boss/qry_dict_info",t.data=e,t.type="get",i.ajax(t)},qryConduitInfo:function(e){var t={};return t.url="/boss/qry_conduit_info",t.data=e,t.type="get",t.isReject=!0,i.ajax(t)},qryBindConduitInfo:function(e){var t={};return t.url="/boss/qry_bind_conduit",t.data=e,t.type="get",i.ajax(t)},getNotice:function(e){var t={};return t.url="/boss/get_notice",t.styleType=1,t.data={type:e},t.type="get",i.ajax(t)},activate:function(e){var t={};return t.url="/boss/activate",t.data=e,i.ajax(t)},channelStep:function(e){var t={};return t.url="/boss/get_channel_step",t.data={conduit_no:c.getRecommendInfos(),source:i.getSource(),step:e},i.ajax(t)},openActChannelInfo:function(e){var t={};return t.url="/boss/get_channel_info",t.data={conduit_no:c.getRecommendInfos(),source:i.getSource(),client_id:e},t.type="get",t.isReject=!0,i.ajax(t)},getChannelPaper:function(e,t){var n={};n.url="/boss/get_channel_info",n.type="get",n.isReject=!0,n.data={conduit_no:c.getRecommendInfos(),source:i.getSource(),product_no:e,entrust_balance:t};var r=c.getUser();return r&&(n.data.client_id=r.client_id),
i.ajax(n)},qryChannelRiskPaper:function(e){var t={};return t.url="/boss/channel_risk_paper",t.data=e,t.type="get",t.cache=!0,i.ajax(t)},submitChannelRiskPaper:function(e){var t={};return t.url="/boss/submit_channel_risk_paper",t.data=e,i.ajax(t)},getCaptcha:function(){var e={};return e.url="/boss/get_captcha",e.type="get",i.ajax(e)},login:function(e){var t={};return e.op_station=c.get("op_station"),t.url="/trade/user/login",t.styleType=1,t.data=e,t.isSendData=!0,i.ajax(t)},loginWithoutCaptcha:function(e){var t={};return e.op_station=c.get("op_station"),t.url="/trade/user/login",t.styleType=1,t.data=e,i.ajax(t)},logout:function(){var e={};return e.url="/trade/user/logout",e.isReject=!0,i.ajax(e)},getUserInfo:function(){var e={};return e.url="/trade/user/get_user",e.isReject=!0,e.type="get",i.ajax(e)},qryUserInfo:function(){var e={};return e.url="/trade/user/qry_user",e.isReject=!0,e.type="get",i.ajax(e)},syncUserCare:function(e){var t={};return t.data=e,t.url="/trade/user/sync_user_care",i.ajax(t)},modifyUserInfo:function(e,t){var n={};return n.url="/trade/user/modify_user_info",n.styleType=1,n.data={profession_code:e,degree_code:t},i.ajax(n)},modifyPwd:function(e,t,n){var r={};return r.isReject=!0,r.url="/trade/user/modify_pwd",r.styleType=1,r.data={password:e,password_old:t,password_type:n},i.ajax(r)},checkMobile:function(e){var t={};return t.type="get",t.isReject=!0,t.url="/trade/user/check_mobile",t.data={mobile_tel:e},i.ajax(t)},modifyMobile:function(e,t,n){var r={};return r.styleType=1,r.url="/trade/user/modify_mobile",r.data={new_mobile_tel:e,check_code:t,password:n},r.isReject=!0,i.ajax(r)},submitPaper:function(e){var t={};return t.url="/trade/user/submit_paper",t.data=e,t.isReject=!0,i.ajax(t)},clientRights:function(e){var t={};return t.url="/trade/user/client_rights",t.data=e,t.isReject=!0,i.ajax(t)},openElectronic:function(e){var t={};return t.url="/trade/user/open_electronic",t.data=e,t.isReject=!0,i.ajax(t)},isAddTrade:function(e,t){var n={};return n.url="/trade/account/isAddTrade",n.data={prod_code:e,prod_source:t},i.ajax(n)},queryTotalIncome:function(){var e={};return e.url="/trade/account/total_income",i.ajax(e)},getAllShares:function(){var e={};return e.url="/trade/account/total_shares",i.ajax(e)},getBankByTransAccount:function(e){var t={};return t.url="/trade/account/get_bank_by_transAccount",t.data={trans_account:e},i.ajax(t)},queryCurOrders:function(){var e={};return e.url="/trade/account/total_current_orders",e.type="get",i.ajax(e)},queryHisOrders:function(){var e={};return e.url="/trade/account/total_history_orders",e.type="get",i.ajax(e)},queryOrdersByProd:function(e,t,n){var r={};return r.data={prod_code:e,prod_source:t,trans_account:n},r.url="/trade/account/total_prod_orders",r.type="get",i.ajax(r)},getOrderDetail:function(e,t,n){var r={};return r.url="/trade/account/order_detail",r.data={allot_no:e,prod_source:t,is_current:n},r.type="get",r.cache=!0,i.ajax(r)},queryBalance:function(){var e={};return e.url="/trade/account/balance",i.ajax(e)},getShares:function(e,t,n){var r={};return"1"==e?(r.url="/trade/account/shares",r.data={allot_no:t}):"2"==e?(r.url="/trade/account/uf_shares",r.data={fund_code:n}):(r.url="/trade/account/bankm_shares",r.data={fund_code:t}),i.ajax(r)},getOrders:function(e,t,n){var r={};return"1"==e?(r.url="/trade/account/orders",r.data={current_sell:0,prod_code:t,trans_account:n}):"2"==e&&(r.url="/trade/account/uf_orders",r.data={current_sell:0,fund_code:t}),r.type="get",i.ajax(r)},getUserQuickBankCards:function(){var e={};return e.url="/trade/bank/quick_bank_cards",e.type="get",e.isReject=!0,i.ajax(e)},getUserDepositBankCards:function(){var e={};return e.url="/trade/bank/deposit_bank_cards",e.type="post",e.data={conduit_no:c.getRecommendInfos()},e.isReject=!0,i.ajax(e)},cancelBankAccount:function(){var e={};return e.url="/trade/bank/cancel_bank_account",e.type="post",e.data={conduit_no:c.getRecommendInfos()},e.isReject=!0,e.cache=!0,i.ajax(e)},cancelBankAccount2:function(e){var t={};return t.url="/trade/bank/cancel_bank_account2",t.type="post",t.data={conduit_no:c.getRecommendInfos(),bankNo:e},t.isReject=!0,t.cache=!0,i.ajax(t)},checkCancelTime:function(){var e={};return e.url="/trade/bank/check_cancel_time",e.type="post",e.data={conduit_no:c.getRecommendInfos()},e.isReject=!0,e.cache=!0,i.ajax(e)},isTAOpen:function(e,t){var n={};return n.url="/trade/trade/is_ta_open",n.type="get",n.data={prod_source:e,prodta_no:t},i.ajax(n)},unbindBank:function(e,t,n){var r={};return r.isReject=!0,r.url="/trade/bank/unbind",r.data={bank_no:e,bank_account:t,password:n},i.ajax(r)},checkPayStatus:function(e){var t={};return t.url="/trade/bank/check_pay_status",t.data={balance:e},i.ajax(t)},bankTransfer:function(e,t,n){var r={};return r.isReject=!0,r.url="/trade/bank/transfer",r.data={bank_password:e,occur_balance:t,transfer_direction:"1",bank_no:n},i.ajax(r)},bankWithdraw:function(e,t,n){var r={};return r.isReject=!0,r.url="/trade/bank/transfer",r.data={fund_password:e,occur_balance:t,transfer_direction:"2",bank_no:n},i.ajax(r)},queryBankTransfer:function(e,t){var n={};return n.url="/trade/bank/qry_bank_transfer",n.data={co_serial_no:e,isCurrent:t},n.cache=!0,i.ajax(n)},queryTransferDetails:function(){var e={};return e.url="/trade/bank/fund_jour",i.ajax(e)},queryBankBanlance:function(e,t){var n={};return n.isReject=!0,n.url="/trade/bank/qry_banlance",n.data={bank_password:e,money_type:"0",bank_no:t},i.ajax(n)},reopenBankAccount:function(e){var t={};return t.isReject=!0,t.url="/trade/bank/reopen_bank_account",t.data=e,i.ajax(t)},signBankMsg:function(e){var t={};return t.isReject=!0,t.url="/trade/bank/sign","open"==e.from&&(t.url="/open/bank_sign"),t.data=e,i.ajax(t)},signSuccess:function(e){var t={};return t.isReject=!0,t.url="/trade/bank/signSuccess","open"==e.from&&(t.url="/open/sign_success"),t.data=e,i.ajax(t)},buyDjProduct:function(e,t,n,r,o,a,s,l,u,d){var f={};return f.data={password:t,entrust_balance:n,pay_kind:r,bank_no:o,conduit_no:c.getRecommendInfos(),pay_account:a,prodta_no:s,prod_code:e,prod_name:l,prod_begin_date:u,risk_confirm_flag:d},f.url="/trade/trade/subscribe",f.isReject=!0,i.ajax(f)},redeemDjProduct:function(e,t,n,r,o,a,s){var l={};return l.data={prod_code:e,prodta_no:t,amount:n,allot_no:r,exceedflag:"1",prod_name:o,bank_name:a,pay_account:s,conduit_no:c.getRecommendInfos()},l.url="/trade/trade/redeem",l.isReject=!0,i.ajax(l)},buyUfProduct:function(e,t,n,r,o,a,c,s){var l={};return l.data={password:n,balance:r,fund_company:t,fund_code:e,charge_type:o,prod_name:a,prod_begin_date:c,risk_confirm_flag:s},l.url="/trade/trade/uf_subscribe",l.isReject=!0,i.ajax(l)},redeemUfProduct:function(e,t,n,r){var o={};return o.data={fund_code:e,fund_company:t,amount:n,exceedflag:"1",prod_name:r},o.url="/trade/trade/uf_redeem",o.isReject=!0,i.ajax(o)},buyBankProduct:function(e,t,n,r,o,a,c,s,l,u){var d={};return d.data={password:t,entrust_balance:n,pay_kind:r,bank_no:o,pay_account:a,prodta_no:c,prod_code:e,prod_name:s,prod_begin_date:l,risk_confirm_flag:u},d.url="/trade/trade/bankm_subscribe",d.isReject=!0,i.ajax(d)},wtAddAccessRecord:function(e,t,n,r){var a={};a.url="/web/conduit/addCrmAccessRecord",a.isReject=!0;var s,l,u=c.getUser();return u&&(s=u.mobile_tel,l=u.client_id),a.data={conduit_no:c.getRecommendInfos(),mobile_tel:s,app_uuid:c.get("UUID"),source_url:t,refer_url:n,access_type:e,client_id:l,remark:r,project:0,app:3},a.basePath=o,i.ajax(a)},wtAd:function(e){var t={};t.url="/web/advertising/getAdListByCondition",t.isReject=!0,t.type="get",t.cache=!0;var n=c.getUser();return t.data={conduit_no:c.getRecommendInfos()?c.getRecommendInfos():"123",logged_in:n?"y":"n",client_code:c.get("UUID")?c.get("UUID"):"123",ad_board_code:e},t.basePath=o,i.ajax(t)},wtAddClientOpinion:function(e,t){var n={};n.url="/web/subsidiary/saveClientOpinion",e&&e.indexOf("白名单")!=-1&&(e+="&"+c.get("UUID")),n.data={opinion_content:e,business_type:"xcmtz"};var r=c.getUser();return r&&(n.data.mobile_tel=r.mobile_tel,n.data.client_name=r.client_name,n.data.client_id=r.client_id),t&&(n.data.mobile_tel=t),n.basePath=o,i.ajax(n)},wzChannels:function(e){var t={};return t.url="searchChannelsByParentId.jspx?parentId="+e,t.basePath=a,t.type="get",t.cache=!0,i.ajax(t)},wzContents:function(e,t){var n={};return n.url="searchContentsByChannelId.jspx?channelId="+e+"&type="+t,n.basePath=a,n.type="get",n.cache=!0,i.ajax(n)},wzContent:function(e){var t={};return t.url="searchContentsById.jspx?id="+e,t.basePath=a,t.type="get",t.cache=!0,i.ajax(t)},getClientEncontract:function(e,t){var n={};return n.url="/common/encontract/list/client",n.type="get",n.data={client_id:e,econtract_id:t},n.cache=!0,i.ajax(n)},saveBizEcontract:function(e){var t={};return t.url="/common/encontract/save_econtract",t.data=e,t.isReject=!0,i.ajax(t)},checkStockSecond:function(e){var t={};return t.url="/biz/cybzq/checkStockSecond",t.data=e,t.isReject=!0,i.ajax(t)},saveSecondInfo:function(e){var t={};return t.url="/biz/cybzq/regStockSecond",t.data=e,t.isReject=!0,i.ajax(t)},qryOfStockHolderAccount:function(e){var t={};return t.url="/biz/account/qryOfStockHolderAccount",t.data=e,t.isReject=!0,i.ajax(t)},addOfStockHolderAccount:function(e){var t={};return t.url="/biz/account/addOfStockHolderAccount",t.data=e,t.isReject=!0,i.ajax(t)},qryStockholder:function(e){var t={};return t.url="/biz/account/qryStockholder",t.data=e,i.ajax(t)},qryStockholderDetail:function(e){var t={};return t.url="/biz/account/qryStockholderDetail",t.data=e,t.isReject=!0,i.ajax(t)},addStockAccount:function(e){var t={};return t.url="/biz/account/addStockAccount",t.data=e,t.isReject=!0,i.ajax(t)},totalMoney:function(e){var t={};return t.url="/biz/account/totalMoney",t.data=e,i.ajax(t)},getSaleDepartment:function(){var e={};return e.url="/boss/qry_branch",e.type="get",i.ajax(e)}}};return n.$inject=["$location","$http","$q","$sce","WT_BASE_PATH","WZ_BASE_PATH","CommonService","LocalCacheService"],n}),define("services/WTService",["angular","store"],function(e,t){"use strict";var n=function(e,t,n,r,o,a,i,c){return{sendMobileCode:function(e){e.op_station=c.get("op_station");var t={};return t.isReject=!0,t.url="/trade/user/send_mobile_code",t.data=e,i.ajax(t)},checkMobileCode:function(e){var t={};return t.isReject=!0,t.url="/trade/user/check_mobile_code",t.data=e,i.ajax(t)},modifyMobile:function(e){var t={};return t.isReject=!0,t.url="/trade/user/modify_mobile_num",t.data=e,i.ajax(t)},resetMobile:function(e){var t={};return t.styleType=1,t.url="/trade/user/reset_mobile",t.data={status:e},t.isReject=!0,i.ajax(t)},modifyProfession:function(e){var t={};return t.url="/trade/user/modify_user_info",t.styleType=1,t.isReject=!0,t.data={profession_code:e},i.ajax(t)},modifyDegree:function(e){var t={};return t.url="/trade/user/modify_user_info",t.styleType=1,t.isReject=!0,t.data={degree_code:e},i.ajax(t)},modifyAddress:function(e){var t={};return t.url="/trade/user/modify_user_info",t.styleType=1,t.isReject=!0,t.data={address:e},i.ajax(t)},modifyZipcode:function(e){var t={};return t.url="/trade/user/modify_user_info",t.styleType=1,t.isReject=!0,t.data={zipcode:e},i.ajax(t)},modifyIdDate:function(e){var t={};return t.url="/trade/user/modify_user_info",t.styleType=1,t.data=e,t.isReject=!0,i.ajax(t)}}};return n.$inject=["$location","$http","$q","$sce","WT_BASE_PATH","WZ_BASE_PATH","CommonService","LocalCacheService"],n}),define("services/TdxLocalFuncService",["angular"],function(e){"use strict";var t=function(e,t,n,r,o,a,i,c){return{isTDX:function(){return"gcs_tdx"==a.getAppContextName()||""==a.getAppContextName()&&"undefined"!=typeof TDXInterface},sysSet:function(){var t=e.defer();return TDXInterface.callFunc({tdxFuncName:"tdxOpenNativeModule",tdxFuncParam:{OpenID:"Me"}},function(e){t.resolve(e)}),t.promise},openDzht:function(){var t=e.defer();return TDXInterface.callFunc({tdxFuncName:"tdxOpenNativeModule",tdxFuncParam:{OpenID:"Stock.lcyw"}},function(e){t.resolve(e)}),t.promise},openYzzz:function(){var t=e.defer();return TDXInterface.callFunc({tdxFuncName:"tdxOpenNativeModule",tdxFuncParam:{OpenID:"Stock.yzyw.yzzz"}},function(e){t.resolve(e)}),t.promise},modifyPwd:function(){var t=e.defer();return TDXInterface.callFunc({tdxFuncName:"tdxOpenNativeModule",tdxFuncParam:{OpenID:"Stock.jysz"}},function(e){t.resolve(e)}),t.promise},logout:function(){var t=e.defer();return TDXInterface.callFunc({tdxFuncName:"tdxQuitTrade",tdxFuncParam:""},function(e){t.resolve(e)}),t.promise},loginGcs:function(){var t=e.defer();return TDXInterface.callFunc({tdxFuncName:"tdxLoginTrade",tdxFuncParam:{HostType:"0",SwitchFlag:"1"}},function(e){t.resolve(e)}),t.promise},changeActiveUser:function(){var t=e.defer();return TDXInterface.callFunc({tdxFuncName:"tdxOpenNativeModule",tdxFuncParam:{OpenID:"ZHGL"}},function(e){t.resolve(e)}),t.promise},tdxShowBottomBar:function(){var t=e.defer();return TDXInterface.callFunc({tdxFuncName:"tdxBottomBarVisibility",tdxFuncParam:{VisibilityFlag:"1"}},function(e){t.resolve(e)}),t.promise},tdxHideBottomBar:function(){var t=e.defer();return TDXInterface.callFunc({tdxFuncName:"tdxBottomBarVisibility",tdxFuncParam:{VisibilityFlag:"0"}},function(e){t.resolve(e)}),t.promise},tdxTradeLocked:function(){var t=e.defer();return TDXInterface.callFunc({tdxFuncName:"tdxIsTradeLocked",tdxFuncParam:""},function(e){t.resolve(e)}),t.promise},tdxRefreshPage:function(){var t=e.defer();return TDXInterface.callFunc({tdxFuncName:"tdxOpenNativeModule",tdxFuncParam:{OpenAction:"Refresh"}},function(e){t.resolve(e)}),t.promise},tdxTradeLockRefresh:function(){var t=e.defer();return TDXInterface.callFunc({tdxFuncName:"tdxFlushJYLockTime",tdxFuncParam:""},function(e){t.resolve(e)}),t.promise},getActivePtUser:function(){var t=e.defer();return TDXInterface.callFunc({tdxFuncName:"tdxEnumTradeAcc",tdxFuncParam:""},function(e){var n=JSON.parse(e.text),r={};if(n.length>0)if("0"==n[0].HostType)r.KHH=n[0].KHH,r.SessionID=n[0].SessionID,t.resolve(r);else{for(var o=!1,a=1;a<n.length;a++)if("0"==n[a].HostType){r.KHH=n[a].KHH,r.SessionID=n[a].SessionID,o=!0;break}o?t.resolve(r):t.reject(-2)}else t.reject(-1)}),t.promise},loginTap:function(e,n,s){var l=this,u=a.getUser();if(u&&u.token&&u.client_id==e.KHH)n();else{var d={};d.url="/trade/user/login",d.data={account_content:e.KHH,password:"#PASSWORD#",input_content:"1"},d.basePath=o,d.isSendData=!0,d.isReject=!0,d.PasswordSessionID=e.SessionID,r.ajax(d).then(function(e){a.removeUser();var o={};o.token=e.token,a.setUser(o),i.getUserInfo().then(function(e){a.setUser(e),n()},function(e){l.logout(),a.removeUser(),s?s():r.showConfig({message:"获取用户信息失败"}),"tab.index"!=t.current.name&&t.go("tab.index")}),d.cares_str=c.getConcernList(),i.syncUserCare(d)},function(e){l.logout(),a.removeUser(),s?s():"客户状态异常"==e.error_info?r.showConfig({message:"账户状态异常"}):r.showConfig({message:r.getErrorInfo(e)}),"tab.index"!=t.current.name&&t.go("tab.index")})}},checkUser:function(e){var n=this;n.getActivePtUser().then(function(t){n.loginTap(t,e,null)},function(o){o==-1?(a.removeUser(),n.loginGcs().then(function(){n.checkUser(e)})):o==-2&&r.showConfirm({title:"提示",message:"需要登录普通交易账户，是否登录到普通交易账户？"},function(){"tab.index"!=t.current.name&&(a.removeUser(),t.go("tab.index"))},function(){a.removeUser(),n.loginGcs().then(function(){n.checkUser(e)})})})}}};return t.$inject=["$q","$state","$rootScope","CommonService","GCS_BASE_PATH","LocalCacheService","WebService","ConcernService"],t}),define("services/ThsLocalFuncService",["angular"],function(e){"use strict";var t=function(e,t,n,r,o){return{isTHS:function(){return"gcs_ths"==r.getAppContextName()},modifyPwd:function(t,n){var r=e.defer();return ThsTools.editePassword({userName:t,passWord:n},function(e){r.resolve(e)}),r.promise},logout:function(){var t=e.defer();return ThsTools.sdkLogout(function(e){t.resolve(e)}),t.promise},loginThs:function(t,n){var r=e.defer();return ThsTools.loginInfo({userName:t,passWord:n},function(e){r.resolve(e)}),r.promise},getActivePtUser:function(){var t=e.defer();return ThsTools.loginInfo(function(e){e&&e.result&&e.result.token?t.resolve(e):t.reject(-1)}),t.promise},loginTap:function(e,t){var a=r.getUser();a&&a.token?t():o.loginWithoutCaptcha({account_content:e.userName,password:e.passWord,input_content:"1"}).then(function(e){var a={};a.token=e.token,r.setUser(a),o.getUserInfo().then(function(e){r.setUser(e),o.qryConduitInfo({mobile_tel:e.mobile_tel}).then(function(e){!n.isStrEmpty(e.conduit_no)&&n.isStrEmpty(r.getRecommendInfos())&&r.setRecommendInfos(e.conduit_no)}),t()},function(e){r.removeUser(),n.showConfig({message:"获取用户信息失败"})})})},checkUser:function(e,t){var n=this;n.getActivePtUser().then(function(t){e()},function(e){e==-1&&t()})}}};return t.$inject=["$q","$rootScope","CommonService","LocalCacheService","WebService"],t}),define("services/DeviceService",["angular"],function(e){"use strict";var t=function(e,t,n){return{asyncVideo:function(e,r){tf.networkStatus.getConnectionInfo(function(o){var a=o.connectionInfo;"2"==a||"9"==a?t.showAlert({message:"你当前使用的网络网速较慢，请在3G,4G或者wifi等网路状态下进行视频见证"}):tf.video.start({businessNumber:e.businessNumber,isSingle:"2",clientId:e.user_id,clientName:e.client_name,orgId:e.branch_no,jsessionId:"1",busUrl:n+"/servlet/json"},function(e){r(e)})})},showSelectDevice:function(t){e.show({cssClass:"vDialog",template:"",title:"请选择源",buttons:[{text:'<i class="icon ion-camera energized"></i>',type:"button button-icon",onTap:function(){tf.camera.takePicture({targetType:"1",mediaType:"1",photoType:"1"},t)}},{text:'<i class="icon ion-images energized"></i>',type:"button button-icon",onTap:function(){tf.camera.takePicture({targetType:"1",mediaType:"2",photoType:"3"},t)}},{text:'<i class="icon ion-log-out dark"></i>',type:"button",onTap:function(){}}]})}}};return t.$inject=["$ionicPopup","CommonService","VIDEO_PATH"],t}),define("services/FinancingService",["angular","store"],function(e,t){"use strict";var n=function(e,t,n,r,o,a,i){return{getQuestions:function(e){return i.ajax({url:"/xdb/risk/showRiskPaper",type:"get",data:{paper_type:"l",exam_type:2,client_id:e}})},getAgreements:function(e){return i.ajax({url:"/xdb/openPer/elecSign",type:"get",data:{fund_account:e.fund_account,client_id:e.client_id}})},setAnswer:function(e){return i.ajax({url:"/xdb/risk/submit",data:{paper_type:"l",exam_type:2,client_id:e.client_id,answers:e.answers}})},setCreditQuota:function(e){return i.ajax({url:"/xdb/risk/setStockPledgeAmount",data:{paper_type:"l",client_id:e,credit_quota:3e6}})},setUserEmail:function(e){return i.ajax({url:"/xdb/ajaxVerify/updateUserEmail",data:{paper_type:1,exam_type:2,client_id:{client_id:e.client_id,fund_account:e.fund_account,e_mail:e.e_mail}}})},setAgreement:function(e){return i.ajax({url:"/xdb/openPer/signAgreement",data:{client_id:e.client_id,fund_account:e.fund_account,signValue:e.signValue,cert_sn:"sn"}})},addUser:function(e){return i.ajax({url:"/xdb/openPer/addPermission",data:{client_id:e.client_id,fund_account:e.fund_account}})},getIndexInfo:function(e){return i.ajax({url:"/xdb/index",data:{client_id:e.client_id,fund_account:e.fund_account}})},getUserAuthInfo:function(e){return i.ajax({url:"/xdb/auth/show",data:{client_id:e.client_id}})},getRepaymentIndexInfo:function(e){return i.ajax({url:"/xdb/repayment/repaymentIndex",data:{client_id:e.client_id,title_id:e.title_id}})}}};return n.$inject=["$location","$http","$q","$sce","WT_BASE_PATH","WZ_BASE_PATH","CommonService"],n}),define("services/IdentificationService",["angular","store"],function(e,t){"use strict";var n=function(e,t,n,r,o,a,i){return{init:function(e){return i.ajax({isReject:!0,url:"/biz/basicInfo/initForUpdateIdcardTerm",type:"get"})},getRecordStatus:function(e){return i.ajax({isReject:!0,url:"/biz/basicInfo/getIdcardTermRecordStatus",type:"get"})},getPhotoInfo:function(e){return i.ajax({isReject:!0,url:"/biz/basicInfo/uploadArchBase64ToFdfs",type:"post",data:e})},uploadSumbit:function(e){return i.ajax({isReject:!0,url:"/biz/basicInfo/idcardTermUploadSumbit",type:"post",data:e})},initCheck:function(e){return i.ajax({isReject:!0,url:"/biz/basicInfo/initForUpdateIdcardCheck",type:"post",data:{business_type:1,business_info:e}})},getCheckRecordStatus:function(e){return i.ajax({isReject:!0,url:"/biz/basicInfo/getIdcardCheckRecordStatus",type:"post",data:{business_type:1}})},getCheckPhotoInfo:function(e){return i.ajax({isReject:!0,url:"/biz/basicInfo/uploadArchBase64ToFdfsForCheck",type:"post",data:e})},uploadCheckSumbit:function(e){return i.ajax({isReject:!0,url:"/biz/basicInfo/idcardCheckUploadSumbit",type:"post",data:e})},uploadIDCard:function(e){return i.ajax({isReject:!0,url:"/biz/account/uploadArchBase64",type:"post",data:e})}}};return n.$inject=["$location","$http","$q","$sce","WT_BASE_PATH","WZ_BASE_PATH","CommonService"],n}),define("services/services",["require","exports","module","angular","config","base","jqueryCookie","services/DictionaryService","services/LocalCacheService","services/CommonService","services/InfoService","services/HistoryNavChartService","services/ConcernService","services/WebService","services/WTService","services/TdxLocalFuncService","services/ThsLocalFuncService","services/DeviceService","services/FinancingService","services/IdentificationService"],function(e){"use strict";var t=e("angular"),n=(e("config"),e("base"),e("jqueryCookie"),t.module("app.services",["app.config"]));return n.factory("DictionaryService",e("services/DictionaryService")),n.factory("LocalCacheService",e("services/LocalCacheService")),n.factory("CommonService",e("services/CommonService")),n.factory("InfoService",e("services/InfoService")),n.factory("HistoryNavChartService",e("services/HistoryNavChartService")),n.factory("ConcernService",e("services/ConcernService")),n.factory("WebService",e("services/WebService")),n.factory("WTService",e("services/WTService")),n.factory("TdxLocalFuncService",e("services/TdxLocalFuncService")),n.factory("ThsLocalFuncService",e("services/ThsLocalFuncService")),n.factory("DeviceService",e("services/DeviceService")),n.factory("FinancingService",e("services/FinancingService")),n.factory("IdentificationService",e("services/IdentificationService")),n}),define("filters/filters",["angular","filters/InterpolateFilter","filters/DefNumberFilter","filters/ProdMinSubscribeFilter","filters/DefStringFilter","filters/DefDateStringFilter","filters/BankAccountFilter","filters/DatetimeFilter","filters/PhoneNumberFilter","filters/DictionaryFilter","services/services"],function(e,t,n,r,o,a,i,c,s,l){"use strict";var u=e.module("app.filters",["app.services"]);return u.filter("interpolate",t),u.filter("defNumber",n),u.filter("defString",o),u.filter("defDateString",a),u.filter("prodMinSubscribe",r),u.filter("bankAccount",i),u.filter("datetimeFilter",c),u.filter("phoneNumberFilter",s),u.filter("dictionary",l),u}),define("animations/QDIITermAnimation",["angular"],function(e){"use strict";var t=function(e,t,n){return{addClass:function(r,o){n(function(){var n=t.position(r);e.scrollTo(n.left,n.top,!0)},240)},removeClass:function(t,n){e.scrollTop(!0)}}};return t.$inject=["$ionicScrollDelegate","$ionicPosition","$timeout"],t}),define("animations/animations",["require","exports","module","angular","animations/QDIITermAnimation"],function(e){"use strict";var t=e("angular"),n=t.module("app.animations",["ngAnimate"]);return n.animation(".QDII-Top",e("animations/QDIITermAnimation")),n}),define("directives/BackButtonDirective",["angular"],function(e){"use strict";var t=function(e,t,n,r){return{restrict:"E",replace:!0,template:'<button class="button back-button buttons button-icon icon ion-ios-arrow-back header-item btnBack" ng-click="onBackKeyDown()"></button>',link:function(o){o.onBackKeyDown||(o.onBackKeyDown=function(){if(r.closeDigitalKeyboard(),null==t.backView()&&"tab.index"!=t.currentView().stateName)return"tab.account-index"==t.currentView().stateName?void n.go("tab.account-assets-index"):void n.go("tab.index");if(t.backView()&&"tab.search"==t.backView().stateName)return void t.goBack(-2);if(t.backView()&&t.backView().stateId==t.currentView().stateId)for(var e=-1;t.backView().stateId==t.currentView().stateId;)e--,t.goBack(e);else t.goBack()}),e.registerBackButtonAction(function(e){return o.onBackKeyDown(),e.preventDefault(),!1},101)}}};return t.$inject=["$ionicPlatform","$ionicHistory","$state","$rootScope"],t}),define("directives/ExitButtonDirective",["angular"],function(e){"use strict";var t=function(e,t,n,r){return{restrict:"E",replace:!0,template:'<a class="header-item btnExit" ng-click="onExitKeyDown()">退出</a>',link:function(o){o.onExitKeyDown||(o.onExitKeyDown=function(){t.confirm({cssClass:"kDialog",title:"提示",template:"您确定要退出开户吗？",okText:"确定",cancelText:"取消"}).then(function(e){e&&(r.go("tab.index"),n.removeOpenUser())})}),ionic.Platform.isAndroid()&&e.registerBackButtonAction(function(e){return o.onExitKeyDown(),e.preventDefault(),!1},101)}}};return t.$inject=["$ionicPlatform","$ionicPopup","LocalCacheService","$state"],t}),define("directives/VersionDirective",["angular"],function(e){"use strict";var t=function(e){return function(t,n,r){n.text(e)}};return t.$inject=["VERSION"],t}),define("directives/BuyButtonDirective",["angular"],function(e){"use strict";var t=function(e,t,n,r,o,a){function i(t,i,c){var s="pay_trade";0==i||1==i?s="pay_trade":2==i&&(s="deposit_trade"),r.getNotice(s).then(function(r){0==r.error_no&&(r.title&&r.content?n.showNotice(r.title+"&&"+r.content):(o.remove("BuyCtrl_buy"),o.set("buy_state",{stateName:"trade-buy",stateParams:{prodCode:t,prodSource:i,add:c}}),a.isTDX()?a.checkUser(function(){a.tdxTradeLocked().then(function(n){"1"!=n.text&&1!=n.text&&e.go("trade-buy",{prodCode:t,prodSource:i,add:c})})}):e.go("trade-buy",{prodCode:t,prodSource:i,add:c})))})}return{restrict:"A",link:function(e,t,n){t.bind("click",function(){"undefined"!=typeof Messenger&&Messenger.sendMsg("ym_event",{eventID:"buy",attributes:{prodCode:n.prodCode,prodSource:n.prodSource,add:n.add}},null,null),i(n.prodCode,n.prodSource,n.add)})}}};return t.$inject=["$state","$ionicHistory","CommonService","WebService","LocalCacheService","TdxLocalFuncService"],t}),define("directives/SellButtonDirective",["angular"],function(e){"use strict";var t=function(e,t,n){function r(r,o,a){var i="pay_redeem";0==a||1==a?i="pay_redeem":2==a&&(i="deposit_redeem"),n.getNotice(i).then(function(n){0==n.error_no&&(n.title&&n.content?t.showNotice(n.title+"&&"+n.content):e.go("trade-sell",{allotNo:r,prodCode:o,prodSource:a}))})}return{restrict:"A",link:function(e,t,n){t.bind("click",function(){r(n.allotNo,n.prodCode,n.prodSource)})}}};return t.$inject=["$state","CommonService","WebService"],t}),define("directives/ConcernDirective",["angular"],function(e){"use strict";var t=function(e,t){return{restrict:"E",template:'<a id="jConcern" ng-click="operUserCare()" ng-class="{icon_concern:isCare,icon_concern_:!isCare}">关注</a>',replace:!0,link:function(e,n,r){e.$watch("fund.prod_code",function(n,r){n&&(e.isCare=t.isConcern(n))}),e.operUserCare=function(){e.isCare=t.concern(e.fund.prod_code)}}}};return t.$inject=["CommonService","ConcernService"],t}),define("directives/ChannelImgDirective",["angular"],function(e){"use strict";var t=function(e){function t(t,n){e.getChannelInfo(t).then(function(e){n.channel.large_icon=e.large_icon,n.channel.catalog_name=e.catalog_name})}return{restrict:"E",replace:!0,template:'<div class="kBanner"><img  ng-src="{{channel.large_icon}}" alt="{{channel.catalog_name}}" /></div>',link:function(e,n,r){var o;o=r.channelId?r.channelId:e.channel.channelId,o?t(o,e):e.$watch("channel.channelId",function(n,r){n&&t(n,e)})}}};return t.$inject=["InfoService"],t}),define("directives/DigitalKeyboardDirective",["angular"],function(e){"use strict";var t=function(e,t){return{restrict:"A",scope:{password:"=digitalKeyboard"},link:function(e,t,n){if("false"==n.digitalKeyboard)t.bind("click",function(){if("undefined"!=typeof tf&&"undefined"!=typeof tf.digitalKeyboard){var t=tf.digitalKeyboard;t.close(function(t){e.$parent.selectDigitalKeyboardElement&&e.$parent.selectDigitalKeyboardElement.removeClass("txt_focus")})}});else if("undefined"!=typeof cordova&&"undefined"!=typeof tf&&"undefined"!=typeof tf.digitalKeyboard){var r=tf.digitalKeyboard;t.attr("readonly","readonly"),t.bind("click",function(){e.$parent.selectDigitalKeyboardElement&&e.$parent.selectDigitalKeyboardElement.removeClass("txt_focus"),t.addClass("txt_focus"),e.$parent.selectDigitalKeyboardElement=t,cordova.plugins.Keyboard.close(),r.active({maxLength:6,prePwd:e.password},function(n){e.$apply(function(){e.password=n.result.currentPwd}),ionic.Platform.isIOS()&&t.triggerHandler("click")})})}}}};return t.$inject=["$parse","$log"],t}),define("directives/AccessRecordDirective",["angular"],function(e){"use strict";var t=function(e){return{restrict:"A",link:function(t,n,r){n.bind("click",function(){r.key&&"undefined"!=typeof Messenger&&Messenger.sendMsg("ym_event",{eventID:r.key},null,null),e.wtAddAccessRecord(r.key,"#/tab/index",r.toUrl,null)})}}};return t.$inject=["WebService"],t}),define("directives/SlidingTabsDirective",["angular"],function(e){"use strict";var t=function(t,n,r,o,a,i){return{require:"^ionSlideBox",restrict:"A",link:function(r,i,c,s){var l,u,d,f,p,m,h,g={slideTabsScrollable:!0},_=function(){e.isDefined(c.slideTabsScrollable)&&"false"===c.slideTabsScrollable&&(g.slideTabsScrollable=!1);var t='<li ng-repeat="(key, value) in tabs" ng-click="onTabTabbed($event, {{key}})" class="slider-slide-tab" ng-bind-html="value"></li>';g.slideTabsScrollable?(d="ion-slide-tabs-handle-"+Math.floor(1e4*Math.random()+1),h=e.element('<ion-scroll delegate-handle="'+d+'" class="slidingTabs" direction="x" scrollbar-x="false"><ul>'+t+'</ul> <div class="tab-indicator-wrapper"><div class="tab-indicator"></div></div> </ion-scroll>')):h=e.element('<div class="slidingTabs"><ul>'+t+'</ul> <div class="tab-indicator-wrapper"><div class="tab-indicator"></div></div> </div>'),m=e.element(i);var s=n(h);m.parent().prepend(h),s(r),p=e.element(h[0].querySelector(".tab-indicator"));var f=m.attr("delegate-handle"),_=h.attr("delegate-handle");l=o,f&&(l=l.$getByHandle(f)),g.slideTabsScrollable&&(u=a,_&&(u=u.$getByHandle(_))),v(),b(),C()},v=function(){ionic.onGesture("dragleft",r.onSlideMove,m[0]),ionic.onGesture("dragright",r.onSlideMove,m[0]),ionic.onGesture("release",r.onSlideChange,m[0])},b=function(){if(!e.isDefined(f)||0==f.length)return!1;var t=h.find("ul"),n=0;e.forEach(f,function(t,r){var o=e.element(t);n+=o[0].offsetWidth}),g.slideTabsScrollable?e.element(h[0].querySelector(".scroll")).css("width",n+1+"px"):f.css("width",t[0].offsetWidth/f.length+"px"),C()},y=function(t,n){var r=e.element(n[0].querySelector(".ink"));if(e.isDefined(r)&&0!=r.length||(r=e.element("<span class='ink'></span>"),n.prepend(r)),r.removeClass("animate"),!r.offsetHeight&&!r.offsetWidth){var o=Math.max(n[0].offsetWidth,n[0].offsetHeight);r.css("height",o+"px"),r.css("width",o+"px")}var a=t.offsetX-r[0].offsetWidth/2,i=t.offsetY-r[0].offsetHeight/2;r.css("top",i+"px"),r.css("left",a+"px"),r.addClass("animate")},C=function(){if(!e.isDefined(f)||0==f.length)return!1;var t=l.currentIndex(),n=e.element(f[t]),r=n.prop("offsetLeft"),o=n[0].offsetWidth;if(p.css({"-webkit-transition-duration":"300ms","-webkit-transform":"translate("+r+"px,0px)",width:o+"px"}),g.slideTabsScrollable&&u){var a=40;u.scrollTo(r-a,0,!0)}f.removeClass("tab-active"),n.addClass("tab-active")},w=function(t,n,r,o){var a=e.element(f[n]),i=e.element(f[t]),c=a.prop("offsetLeft"),s=i.prop("offsetLeft"),d=Math.abs(c-s);if(!(0==t&&n==l.slidesCount()-1&&"right"==o||0==n&&t==l.slidesCount()-1&&"left"==o)){var m=a[0].offsetWidth,h=i[0].offsetWidth,_=m-h,v=0,b=0;if(t>n?(v=c-d*(r-1),b=m-_*(1-r)):n>t&&(v=c+d*(r-1),b=m+_*(r-1)),p.css({"-webkit-transition-duration":"0ms","-webkit-transform":"translate("+v+"px,0px)",width:b+"px"}),g.slideTabsScrollable&&u){var y=40;u.scrollTo(v-y,0,!1)}}};r.onTabTabbed=function(t,n){y(t,e.element(t.currentTarget)),l.slide(n),C()},r.tabs=[],r.addTabContent=function(n){r.tabs.push(n),r.$apply(),t(function(){f=e.element(h[0].querySelector("ul").querySelectorAll(".slider-slide-tab")),
C(),b()})},r.onSlideChange=function(e){C()},r.onSlideMove=function(){var t=m[0].getElementsByClassName("slider-slide"),n=l.currentIndex(),r=e.element(t[n]),o=r.css("-webkit-transform").replace(/[^0-9\-.,]/g,"").split(",")[0],a=(n+1)%t.length;o>m.prop("offsetLeft")&&(a=n-1,a<0&&(a=t.length-1));var i=(e.element(t[a]),o/m[0].offsetWidth),c=i>0?"right":"left";i=Math.abs(i),w(n,a,i,c)},_()},controller:["$scope",function(e){this.addTab=function(n){t(function(){e.addTabContent&&e.addTabContent(n)})}}]}};return t.$inject=["$timeout","$compile","$interval","$ionicSlideBoxDelegate","$ionicScrollDelegate","$ionicGesture"],t}),define("directives/IonSlideTabLabelDirective",["angular"],function(e){"use strict";var t=function(){return{require:"^ionSlideTabs",link:function(e,t,n,r){r.addTab(n.ionSlideTabLabel)}}};return t.$inject=[],t}),define("directives/FinancingLoanDirective",["angular"],function(e){"use strict";var t=function(){return{require:"ngModel",link:function(e,t,n,r){e.$watch(n.ngModel,function(){r.$modelValue>n.financingLoan||r.$modelValue<1e3?r.$setValidity("financingLoan",!1):r.$setValidity("financingLoan",!0)})}}};return t.$inject=[],t}),define("directives/mAppLoadingDirective",["angular"],function(e){"use strict";var t=function(e,t){function n(n,r,o){"/tab/index"!=t.path()&&e.leave(r).then(function(){r.remove(),n=r=o=null})}return{link:n,restrict:"C"}};return t.$inject=["$animate","$location"],t}),define("directives/GoLinkDirective",["angular"],function(e){"use strict";var t=function(e,t){return{restrict:"A",link:function(n,r,o){function a(){t.isTDX()?t.tdxTradeLocked().then(function(e){"1"!=e.text&&1!=e.text&&i()}):i()}function i(){o.param?e.go(o.url,{typeid:o.param}):e.go(o.url)}r.bind("click",function(){o.isopen?"false"!=o.isopen&&(o.open?i():a()):a()})}}};return t.$inject=["$state","TdxLocalFuncService"],t}),define("directives/RepeatFinishDirective",["angular"],function(e){"use strict";var t;return t=function(){function e(e,t,n){e.$last&&t.ready(function(){$("#pre_default").remove(),e.$eval(n.repeatFinish)})}return{link:e}},t.$inject=["$animate","$location"],t}),define("directives/directives",["require","exports","module","angular","services/services","directives/BackButtonDirective","directives/ExitButtonDirective","directives/VersionDirective","directives/BuyButtonDirective","directives/SellButtonDirective","directives/ConcernDirective","directives/ChannelImgDirective","directives/DigitalKeyboardDirective","directives/AccessRecordDirective","directives/SlidingTabsDirective","directives/IonSlideTabLabelDirective","directives/FinancingLoanDirective","directives/mAppLoadingDirective","directives/GoLinkDirective","directives/RepeatFinishDirective"],function(e){"use strict";var t=e("angular"),n=(e("services/services"),t.module("app.directives",["app.services"]));return n.directive("backButton",e("directives/BackButtonDirective")),n.directive("exitButton",e("directives/ExitButtonDirective")),n.directive("appVersion",e("directives/VersionDirective")),n.directive("buyButton",e("directives/BuyButtonDirective")),n.directive("sellButton",e("directives/SellButtonDirective")),n.directive("concern",e("directives/ConcernDirective")),n.directive("channelImg",e("directives/ChannelImgDirective")),n.directive("digitalKeyboard",e("directives/DigitalKeyboardDirective")),n.directive("accessRecord",e("directives/AccessRecordDirective")),n.directive("ionSlideTabs",e("directives/SlidingTabsDirective")),n.directive("ionSlideTabLabel",e("directives/IonSlideTabLabelDirective")),n.directive("financingLoan",e("directives/FinancingLoanDirective")),n.directive("mAppLoading",e("directives/mAppLoadingDirective")),n.directive("goLink",e("directives/GoLinkDirective")),n.directive("repeatFinish",e("directives/RepeatFinishDirective")),n}),define("controllers/IndexCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c,s,l,u,d,f,p){function m(){if(!c.isStrEmpty(w.tf_op_station)&&w.tf_op_station.indexOf("]")!=-1){var e=w.tf_op_station.split("["),t=e[e.length-1].split("]")[0];i.set("UUID",t),i.set("op_station",w.tf_op_station)}w.equityFund||w.currencyFund||l.getProductsList().then(function(e){w.equityFund=e.equityFund,w.currencyFund=e.currencyFund})}function h(){s.getNotice("system").then(function(n){0==n.error_no&&1==n.isColsed?s.qryProdWhite().then(function(r){r&&r.isProdWhite||(w.notice_content=n.content,t.showBar(!1),o.hideTabs=!0,e.exitApp=function(){navigator.app.exitApp()})}):s.getNotice("index").then(function(e){0==e.error_no&&1!=e.isColsed&&e.title&&e.content&&c.showNotice(e.title+"&&"+e.content,"tf_system_notice_show"+e.updateTime)})}),r(function(){navigator&&navigator.splashscreen&&navigator.splashscreen.hide()},1e3)}function g(){if(i.getUser()){if(w.ads=null,w.botads=null,w.ads_login||w.products||w.funds)return;s.wtAd("gcs_fin_index_1").then(function(e){e&&e.length>0&&(w.ads_login=e)}),l.getProductsByTheme("sliding",0,null).then(function(e){if(e&&e.length>0){w.products=e,w.style={width:165*e.length+5+"px"};for(var t=0;t<e.length;t++)"0,3,4".indexOf(w.products[t].prod_status)>-1?"1"==w.products[t].otc_status?w.products[t].sellStatus=1:"2,3".indexOf(w.products[t].otc_status)>-1?w.products[t].sellStatus=3:w.products[t].sellStatus=2:"2"==w.products[t].prod_status?w.products[t].sellStatus=4:"2,3".indexOf(w.products[t].otc_status)>-1?w.products[t].sellStatus=3:w.products[t].sellStatus=5}}),l.getProductsByTheme("assets",0,null).then(function(e){e&&e.length>0&&(w.funds=e)})}else{if(w.funds=null,w.products=null,w.ads_login=null,w.ads||w.botads)return;s.wtAd("gcs_fin_index_1").then(function(e){e&&e.length>0&&(w.ads=e)}),s.wtAd("gcs_fin_index_3").then(function(e){e&&e.length>0&&(w.botads=e[0])})}}function _(){y=!1,w.isLoad=!0,u.getActivePtUser().then(function(e){u.loginTap(e,function(){w.isLoad=!1,y=!0,g()},function(){w.isLoad=!1,y=!0,g()})},function(){w.isLoad=!1,i.removeUser(),y=!0,g()})}function v(){u.tdxRefreshPage().then(function(){_(),v()},function(){g()})}function b(){u.isTDX()?(_(),v()):(g(),y=!0)}var y,C,w=e.param={};e.doRefresh=function(){w.ads=null,w.ads_login=null,w.botads=null,w.funds=null,w.products=null,b(),e.$broadcast("scroll.refreshComplete")},e.$on("$ionicView.beforeEnter",function(){w.dev_width=p.innerWidth,i.setAppContextName(n.app_context_name),e.app_context_name=i.getAppContextName(),w.recommendInfos=n.recommendInfos,i.setRecommendInfos(w.recommendInfos),w.tf_op_station=n.tf_op_station,w.notice_content="",w.backButtonPressedOnceToExit=!1,m(),h(),b()}),e.onBackKeyDown=function(){w.backButtonPressedOnceToExit?ionic.Platform.exitApp():(w.backButtonPressedOnceToExit=!0,c.showLogout({message:"再按一次退出理财"}),r(function(){w.backButtonPressedOnceToExit=!1},2e3))},e.thsExitModle=function(){tf.otherService.exitModule({moduleID:"gcs_fin"})},e.go=function(t){y&&("tab.account-index"==t?d.go(t):"#/tab/account-assets-index"==t?e.goTo("tab.account-assets-index",null,null):f.url(t.substring(1)))},e.goTo=function(e,t,n){y&&(t||n?d.go(e,{id:t,index:n}):u.isTDX()?u.tdxTradeLocked().then(function(t){"1"!=t.text&&1!=t.text&&d.go(e)}):d.go(e))},e.slideHandle=function(e){var t=a.$getByHandle("slideboximgs").slidesCount();C&&r.cancel(C),e==t-1?C=r(function(){a.$getByHandle("slideboximgs").slide(0)},5e3):0==e&&(C=r(function(){a.$getByHandle("slideboximgs").next()},5e3))},e.repeatFinish=function(){a.$getByHandle("slideboximgs").update(),a.$getByHandle("slideboximgs").slide(0)}}return e.$inject=["$scope","$ionicNavBarDelegate","$stateParams","$timeout","$rootScope","$ionicSlideBoxDelegate","LocalCacheService","CommonService","WebService","InfoService","TdxLocalFuncService","$state","$location","$window"],e}),define("controllers/LoginCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c,s,l,u){function d(){e.login.password=null,e.login.captcha=null,e.login.rememberAccount=!0;var o=c.getAccount(),a=c.getRememberAccount();0!=a?e.login.account_content=o:(e.login.rememberAccount=!1,e.login.account_content=null),e.branchs=r.getBranchs(),l.getNotice("index").then(function(e){0==e.error_no&&1!=e.isColsed&&e.title&&e.content&&i.showNotice(e.title+"&&"+e.content,"tf_system_notice_show"+e.updateTime)}),e.openUrl="#/open-prepare",i.isBuyExperience()&&(e.openUrl="#/open-msgVerify");var s=c.getUser();if(s){var u=n.from;u&&"login"!=u?t.go(u,angular.fromJson(n.fromParams)):t.go("tab.account-assets-index")}e.showCaptcha()}function f(){var r=p();o.show(),l.loginWithoutCaptcha(r).then(function(s){c.setRememberAccount(e.login.rememberAccount?1:0),e.login.rememberAccount?c.setAccount(r.account_content):c.removeAccount(),"undefined"!=typeof Messenger&&Messenger.sendMsg("ym_profileSignIn",{PUID:e.login.account_content},null,null);var d={};d.token=s.token,c.setUser(d),l.getUserInfo().then(function(r){c.setUser(r),o.hide(),l.qryConduitInfo({mobile_tel:r.mobile_tel}).then(function(e){!i.isStrEmpty(e.conduit_no)&&i.isStrEmpty(c.getRecommendInfos())&&c.setRecommendInfos(e.conduit_no)}),u.isTHS()&&u.loginThs(r.client_id,e.login.password).then(function(e){console.log(e)});var s=n.to;if(s&&s.indexOf("open-")==-1)t.go(s,angular.fromJson(n.toParams));else if(sessionStorage.login_next_page){var d=sessionStorage.login_next_page;t.go(d)}else a.backView()&&a.backView().stateName.indexOf("open-")==-1?a.goBack():t.go("tab.account-assets-index")},function(e){c.removeUser(),i.showConfig({message:"获取用户信息失败"})})},function(t){t&&"XCM-100011"==t.error_no&&e.showCaptcha()}),l.syncUserCare(r)}function p(){var t={},n=$.trim(e.login.account_content);$.extend(t,{account_content:n,password:$.trim(e.login.password),captcha_str:e.login.captcha_str,captcha:e.login.captcha,time_stamp:e.login.time_stamp});var r="1";return m.test(n)&&(r="b"),$.extend(t,{input_content:r}),$("#image_code").size()>0&&$.extend(t,{image_code:$("#image_code").val()}),$.extend(t,{cares_str:s.getConcernList()}),t}e.$on("$ionicView.beforeEnter",function(){d()}),e.showCaptcha=function(){l.getCaptcha().then(function(t){e.login.img_base64="data:image/jpg;base64,"+t.base64,e.login.captcha_str=t.captcha_str,e.login.time_stamp=t.time_stamp})},e.login=function(){var t=$.trim(e.login.account_content),n=$.trim(e.login.password);if(""==t||""==n)return i.showAlert({message:"请输入账号和密码"}),!1;if(m.test(t))f();else if(""==e.branchs)i.showAlert({message:"营业部信息获取失败，请重试"});else{for(var r=!1,o=e.branchs.split(","),a=0;a<o.length;a++){var c=o[a];if(!isNaN(t)&&0==t.indexOf(c)){f(),r=!0;break}}r||i.showAlert({message:"手机号或客户号输入有误！"})}},e.clickPassword=function(){$("#password").triggerHandler("click")};var m=/^1[0-9][0-9]\d{8}$/;e.myKeyup=function(t){var n=window.event?t.keyCode:t.which;13==n&&e.login()},e.onBackKeyDown=function(){if($.cookie("back_url_2")||$.cookie("_r_u_l")&&$.cookie("_r_u_l").indexOf("from=2")!=-1)Messenger.send("close");else if(i.isBuyExperience()){var e=c.get("lcty_state");t.go(e.stateName,e.stateParams)}else a.backView()&&"sessionOut"!=n.w?a.goBack():t.go("tab.index")}}return e.$inject=["$scope","$state","$stateParams","DictionaryService","$ionicLoading","$ionicHistory","CommonService","LocalCacheService","ConcernService","WebService","ThsLocalFuncService"],e}),define("controllers/product/ItemCtrl",["require","exports","module"],function(e,t,n){"use strict";function r(e,t,n,r,o,a,i,c,s,l){function u(){return e.fund||l.show(),i.getFundGeneral(f.prod_code).then(function(n){if(n){e.fund=n,f.title=e.fund.prod_name;var o=e.fund.prod_profit_mode;"0"==o?(f.show_chart=!0,d(e.fund.prod_id)):"1"==o?t.go("tab.product-item-QDII",{prod_code:e.fund.prod_code}):"2,3".indexOf(o)<0&&a.showConfig({message:"产品收益模式未配置:"+e.fund.prod_code}),e.fund.prodMinSubscribe_show=r("prodMinSubscribe")(a.getMinAmount(e.fund))}l.hide()})}function d(e){i.getHistoryYield(e,20).then(function(e){e&&e.length>0?(f.chartConfig=c.historyYieldChart(e),f.lastTime=f.chartConfig.series[0].data.pop()[0]):f.show_chart=!1})}var f=e.param=new Array;f.chartConfig=c.historyYieldChart(),e.$on("$ionicView.beforeEnter",function(){f.duration_detail=!1,f.show_chart=!1,f.prod_code=n.prod_code,u()}),e.doRefresh=function(){u()["finally"](function(){e.$broadcast("scroll.refreshComplete")})},e.onBackKeyDown=function(){e.param.duration_detail?(e.param.duration_detail=!1,s.scrollTo(0,f.scrollTop,!1)):null==o.backView()?t.go("tab.index"):"tab.search"==o.backView().stateName?o.goBack(-2):"tab.product-item-QDII"==o.backView().stateName?t.go("tab.index"):o.goBack()},e.showProdDurationDetail=function(){a.isStrEmpty(e.fund.prod_duration_desc)||(4==e.fund.prod_status?f.title="认购期说明":5==e.fund.prod_status?f.title="封闭期说明":f.title="期限说明",f.duration_detail=!0,f.scrollTop=s.getScrollPosition().top,s.scrollTop(!1))}}return r.$inject=["$scope","$state","$stateParams","$filter","$ionicHistory","CommonService","InfoService","HistoryNavChartService","$ionicScrollDelegate","$ionicLoading"],r}),define("controllers/product/DetailCtrl",["require","exports","module"],function(e,t,n){"use strict";function r(e,t,n,r,o,a){function i(){return e.fund||o.show(),r.getContentDetail(c.prod_code).then(function(t){t&&(e.fund=t,e.fund.subscribe_desc&&(e.fund.subscribe_desc=n.trustAsHtml(e.fund.subscribe_desc)),e.fund.redeem_desc&&(e.fund.redeem_desc=n.trustAsHtml(e.fund.redeem_desc)),e.fund.prod_min_subscribe&&(e.fund.prod_min_subscribe=a.getMinAmount(e.fund))),o.hide()})}var c=e.param=new Array;e.$on("$ionicView.beforeEnter",function(){c.prod_code=t.prod_code,i()}),e.doRefresh=function(){i()["finally"](function(){e.$broadcast("scroll.refreshComplete")})}}return r.$inject=["$scope","$stateParams","$sce","InfoService","$ionicLoading","CommonService"],r}),define("controllers/product/ItemOtcCtrl",["require","exports","module"],function(e,t,n){"use strict";function r(e,t,n,r,o,a,i,c){function s(){return e.fund||c.show(),o.getOTCGeneral(u.prod_code).then(function(t){t&&(e.fund=t,e.fund.prod_min_share=n("prodMinSubscribe")(e.fund.prod_min_share),e.fund.sellStatus=i.getOtcSellStatus(e.fund.prod_status,e.fund.otc_status),1!=e.fund.sellStatus&&2!=e.fund.sellStatus||l(e.fund.prod_code)),c.hide()})}function l(t){a.querySellInfo(t).then(function(n){n&&n.length>0&&(e.info=n[0],"1"==e.fund.sellStatus&&r(function(){l(t)},3e4),"1"==e.info.soldout_flag&&(e.fund.sellStatus=3))})}var u=e.param=new Array;e.$on("$ionicView.beforeEnter",function(){e.info={},u.prod_code=t.prod_code,e.today=(new Date).getTime(),s()}),e.doRefresh=function(){s()["finally"](function(){e.$broadcast("scroll.refreshComplete")})}}return r.$inject=["$scope","$stateParams","$filter","$timeout","InfoService","WebService","CommonService","$ionicLoading"],r}),define("controllers/product/ItemOtcFloatCtrl",["require","exports","module"],function(e,t,n){"use strict";function r(e,t,n,r,o,a,i,c,s){function l(){return e.fund||s.show(),o.getOTCGeneral(f.prod_code).then(function(t){t&&(e.fund=t,e.fund.ipo_begin_date_show=c.stringToDate(e.fund.ipo_begin_date),e.fund.ipo_end_date_show=c.stringToDate(e.fund.ipo_end_date),e.fund.prod_min_share=n("prodMinSubscribe")(e.fund.prod_min_share),e.fund.sellStatus=c.getOtcSellStatus(e.fund.prod_status,e.fund.otc_status),1!=e.fund.sellStatus&&2!=e.fund.sellStatus||u(e.fund.prod_code),d(e.fund.sellStatus,e.fund.prod_setup_date,e.fund.prod_expire_date)),s.hide()})}function u(t){a.querySellInfo(t).then(function(n){n&&n.length>0&&(e.info=n[0],"1"==e.fund.sellStatus&&r(function(){u(t)},3e4),"1"==e.info.soldout_flag&&(e.fund.sellStatus=3))})}function d(t,a,c){var s=a,l=new Date,u=n("date")(l,"yyyyMMdd");if(e.isBegin=!0,u<=a){e.isBegin=!1;var d=new Date(l.setMonth(l.getMonth()-1));s=n("date")(d,"yyyyMMdd")}var f=o.getHistoryIndex(e.code,s,c);return f.then(function(t){t&&(console.log(t),e.csi300ChartConfig=i.historyIndexChart(t),t.length>0&&(e.latest_csi300=t[t.length-1],e.latest_csi300.inc=t[t.length-1].index_close/t[0].index_close*100-100,r(function(){e.isShowChart=!1},0)))}),f}var f=e.param=new Array;e.csi300ChartConfig=i.historyIndexChart(),e.code="399300",e.isShowChart=!0,e.$on("$ionicView.beforeEnter",function(){e.info={},f.prod_code=t.prod_code,e.today=(new Date).getTime(),l()}),e.doRefresh=function(){l()["finally"](function(){e.$broadcast("scroll.refreshComplete")})}}return r.$inject=["$scope","$stateParams","$filter","$timeout","InfoService","WebService","HistoryNavChartService","CommonService","$ionicLoading"],r}),define("controllers/product/DetailOtcCtrl",["require","exports","module"],function(e,t,n){"use strict";function r(e,t,n,r,o,a){function i(){return e.fund||a.show(),r.getOTCDetail(c.prod_code).then(function(t){t&&(e.fund=t,e.fund.sellStatus=o.getOtcSellStatus(e.fund.prod_status,e.fund.otc_status),e.fund.subscribe_desc&&(e.fund.subscribe_desc=n.trustAsHtml(e.fund.subscribe_desc)),e.fund.redeem_desc&&(e.fund.redeem_desc=n.trustAsHtml(e.fund.redeem_desc))),a.hide()})}var c=e.param=new Array;e.$on("$ionicView.beforeEnter",function(){c.prod_code=t.prod_code,i()}),e.doRefresh=function(){i()["finally"](function(){e.$broadcast("scroll.refreshComplete")})}}return r.$inject=["$scope","$stateParams","$sce","InfoService","CommonService","$ionicLoading"],r}),define("controllers/product/ItemQDIICtrl",["require","exports","module"],function(e,t,n){"use strict";function r(e,t,n,r,o,a,i,c,s){function l(){return e.fund||s.show(),d.show_chart=!0,r.getFundGeneral(d.prod_code).then(function(n){n&&(e.fund=n,e.fund.prod_min_subscribe&&(e.fund.prod_min_subscribe=a.getMinAmount(e.fund)),d.title=e.fund.prod_name,"0,2,3".indexOf(e.fund.prod_profit_mode)>-1&&t.go("tab.product-item",{prod_code:e.fund.prod_code}),u(e.fund.prod_id)),s.hide()})}function u(e){"1"==d.is_index?r.getComparisonData(e,60).then(function(e){e&&e.history_nav&&e.history_nav.length>0?(d.historyNavChartConfig=o.historyNavCSI300Chart(e.history_nav,e.CSI300),d.lastTime=d.historyNavChartConfig.series[0].data.pop()[0]):d.show_chart=!1}):r.getHistoryNav(e,60).then(function(e){e&&e.length>0?(d.historyNavChartConfig=o.historyNavChart(e),d.lastTime=d.historyNavChartConfig.series[0].data.pop()[0]):d.show_chart=!1})}var d=e.param=new Array;d.prod_code=n.prod_code,d.is_index=n.is_index,"1"==d.is_index?d.historyNavChartConfig=o.historyNavCSI300Chart():d.historyNavChartConfig=o.historyNavChart(null),e.$on("$ionicView.beforeEnter",function(){d.duration_detail=!1,l()}),e.doRefresh=function(){l()["finally"](function(){e.$broadcast("scroll.refreshComplete")})},e.onBackKeyDown=function(){e.param.duration_detail?(e.param.duration_detail=!1,d.title=e.fund.prod_name,i.scrollTo(0,d.scrollTop,!1)):null==c.backView()?t.go("tab.index"):"tab.search"==c.backView().stateName?c.goBack(-2):"tab.product-item"==c.backView().stateName?t.go("tab.index"):c.goBack()},e.showProdDurationDetail=function(){a.isStrEmpty(e.fund.prod_duration_desc)||(4==e.fund.prod_status?d.title="认购期说明":5==e.fund.prod_status?d.title="封闭期说明":d.title="期限说明",d.duration_detail=!0,d.scrollTop=i.getScrollPosition().top,i.scrollTop(!1))}}return r.$inject=["$scope","$state","$stateParams","InfoService","HistoryNavChartService","CommonService","$ionicScrollDelegate","$ionicHistory","$ionicLoading"],r}),define("controllers/product/CurrentTermCtrl",[],function(){"use strict";function e(e,t,n,r,o){function a(){e.items=new Array,e.page_no=1,e.vm.loadMore=!0}function i(){return r.getProductsByChannelId(e.channel.channelId,e.page_no).then(function(n){if(n&&n.length>0){for(var r=0;r<n.length;r++){var a=n[r];a.prod_min_subscribe=t("prodMinSubscribe")(o.getMinAmount(a))}e.items=e.items.concat(n),e.page_no++}else e.vm.loadMore=!1;e.$broadcast("scroll.infiniteScrollComplete")})}e.channel={},e.channel.channelId=n.id,e.vm={},a(),e.doRefresh=function(){a(),e.$broadcast("scroll.refreshComplete")},e.loadMore=function(){return i()}}return e.$inject=["$scope","$filter","$stateParams","InfoService","CommonService"],e}),define("controllers/product/MoreCtrl",[],function(){"use strict";function e(e,t){function n(){}e.tfdzhDownLoad=function(){var e;if(ionic.Platform.isAndroid())e="http://wap.tfzq.com/2014/download/1.apk";else{if(!ionic.Platform.isIOS())return void t.showAlert({message:"客户端类型检测失败"});e="https://itunes.apple.com/cn/app/id948164343?mt=8"}Messenger.sendMsg("updateApp",{type:3,title:"下载中",appName:"天风同花顺",versionName:1.1,versionCode:2057,content:"",downloadUrl:e},n,null)}}return e.$inject=["$scope","CommonService"],e}),define("controllers/product/StarTermCtrl",[],function(){"use strict";function e(e,t,n,r,o,a){function i(){return e.items||n.show(),t.getThemeDetail(c.theme_mark).then(function(r){r&&r.relate_type&&(e.info=r,t.getProdByTheme(c.theme_mark,r.relate_type,r.order_rule).then(function(t){if(t){c=t;for(var r=0;r<c.length;r++){var i=c[r];i.prod_min_subscribe=a("prodMinSubscribe")(o.getMinAmount(i)),e.funds.push(i)}}n.hide()}))})}e.channel={};var c=e.funds=new Array;e.$on("$ionicView.beforeEnter",function(){c.theme_mark=r.id,i()}),e.doRefresh=function(){i()["finally"](function(){e.$broadcast("scroll.refreshComplete")})}}return e.$inject=["$scope","InfoService","$ionicLoading","$stateParams","CommonService","$filter"],e}),define("controllers/product/ShortTermCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c){function s(t){return e.channels||i.show(),e.channel.channelId=r.id,t?a.getChannelInfo(e.vm.activeTab).then(function(t){for(var n=0;n<e.channels.length;n++)if(e.channels[n].id==t.id){e.channels[n]=t,e.channels[n].page_no=1,e.channels[n].products=new Array;break}e.vm.loadMore=!0}):a.getChannelInfosByParentId(e.channel.channelId).then(function(t){e.channels=t;for(var n=0;n<e.channels.length;n++){var r=e.channels[n];0!=n||e.vm.activeTab||(e.vm.activeTab=r.id),r.page_no=1,r.products=new Array,i.hide()}e.vm.loadMore=!0})}e.vm={},e.channel={},s(),e.doRefresh=function(){s(!0)["finally"](function(){e.$broadcast("scroll.refreshComplete")})},e.$watch("vm.activeTab",function(e,t){e&&o(function(){n.resize()},500)}),e.loadMore=function(){for(var n=0;n<e.channels.length;n++){var r=e.channels[n];if(e.vm.activeTab==r.id)return void a.getProductsByChannelId(r.id,r.page_no).then(function(n){if(n&&n.length>0){for(var o=0;o<n.length;o++){var a=n[o];a.prod_min_subscribe=t("prodMinSubscribe")(c.getMinAmount(a))}r.products=r.products.concat(n),r.page_no++,e.vm.page_no=r.page_no}else e.vm.loadMore=!1;e.$broadcast("scroll.infiniteScrollComplete")})}}}return e.$inject=["$scope","$filter","$ionicScrollDelegate","$stateParams","$timeout","InfoService","$ionicLoading","CommonService"],e}),define("controllers/product/TFTermCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c,s,l,u,d,f){function p(t){return e.channels||d.show(),e.id=i.id,e.index=i.index,m(t)}function m(t){return t?l.getChannelInfo(e.vm.activeTab).then(function(n){for(var r=0;r<e.channels.length;r++)if(e.channels[r].id==n.id){e.channels[r]=n,e.channels[r].page_no=1,e.channels[r].products=new Array;break}e.vm.loadMore=!0,e.loadMore(t)}):l.getChannelInfosByParentId(e.id).then(function(t){e.channels=t;for(var n=0;n<e.channels.length;n++){var r=e.channels[n];0==n&&1==e.index?e.vm.activeTab=r.id:1==n&&2==e.index&&(e.vm.activeTab=r.id),r.page_no=1,r.products=new Array,d.hide()}e.vm.loadMore=!0})}function h(t,r){var o="xcm_tfTeam_"+(t+1);u.wtAd(o).then(function(t){if(t){e.ads=t;var a="ad_"+o;if((r||!s.get(a))&&e.ads.length>0){e.myPopup=n.show({cssClass:"kDialog",templateUrl:"product/ads.html",scope:e,buttons:[{text:"确定"}]});s.set(a,!0)}}})}e.channels={},e.vm={},e.$on("$ionicView.beforeLeave",function(){e.myPopup&&e.myPopup.close()}),p(),e.doRefresh=function(){p(!0),e.$broadcast("scroll.refreshComplete")},e.$watch("vm.activeTab",function(e,t){e&&(p(!0),o(function(){a.resize()},500))}),e.operUserCare=function(e){f.concern(e)},e.goTop=function(){a.scrollTop(!0)},e.loadMore=function(n){for(var r=0;r<e.channels.length;r++){var o=e.channels[r];if(e.vm.activeTab==o.id){var a;return n&&(o.page_no=1,o.products=new Array),a="otcfdsy"==o.catalog_mark?l.getOtcProductsByChannelId(o.id,o.page_no,1):l.getProductsByChannelId(o.id,o.page_no,1),void a.then(function(n){if(n&&n.length>0){for(var r=0;r<n.length;r++){var a=n[r];if(a.prod_min_subscribe=1==e.index?t("prodMinSubscribe")(a.prod_min_share):t("prodMinSubscribe")(c.getMinAmount(a)),"otcfdsy"==o.catalog_mark){if("0"==a.otc_status){var i=c.stringToDate(a.ipo_begin_date).getTime()-(new Date).getTime();a.bengin_date_show=Math.round(i/864e5)}a.sell_status=c.getOtcSellStatus(a.prod_status,a.otc_status)}e.index&&(a.concern=f.isConcern(a.prod_code))}o.products=o.products.concat(n),o.page_no++,e.vm.page_no=o.page_no}else e.vm.loadMore=!1;e.$broadcast("scroll.infiniteScrollComplete")})}}},e.showAds=h}return e.$inject=["$scope","$filter","$ionicPopup","$q","$timeout","$ionicScrollDelegate","$stateParams","CommonService","LocalCacheService","InfoService","WebService","$ionicLoading","ConcernService"],e}),define("controllers/product/LongTermCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i){function c(t){t?(e.vm.loadMore=!0,e.loadMore(t)):(e.items=new Array,e.page_no=1,e.vm.loadMore=!0)}function s(){return r.getProductsByParent(e.channel.channelId,e.page_no).then(function(n){if(n){if(n&&n.length>0){for(var r=0;r<n.length;r++){var o=n[r];o.prod_min_subscribe=t("prodMinSubscribe")(a.getMinAmount(o)),e.index&&(o.concern=i.isConcern(o.prod_code))}e.items=e.items.concat(n),e.page_no++}else 1==e.page_no&&(e.showNo=!0),e.vm.loadMore=!1;e.$broadcast("scroll.infiniteScrollComplete")}})}e.channel={},e.vm={},e.channel.channelId=n.id,e.index=n.index,e.title=e.index?"银行理财":"银行宝",c(),e.doRefresh=function(){c(!0),e.$broadcast("scroll.refreshComplete")},e.loadMore=function(t){return t&&(e.page_no=1,e.items=new Array),s()},e.goTop=function(){o.scrollTop(!0)},e.operUserCare=function(e){i.concern(e)}}return e.$inject=["$scope","$filter","$stateParams","InfoService","$ionicScrollDelegate","CommonService","ConcernService"],e}),define("controllers/product/GoldTermCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c){function s(){return e.funds||o.show(),e.funds=new Array,e.page_no=1,e.vm.loadMore=!0,t.all([l(),u()])}function l(){var t=n.getIndexProfit(e.channel.title);return t.then(function(t){t&&(e.gold=t[0])}),t}function u(){var t=n.getHistoryIndex(e.channel.title,60);return t.then(function(t){t&&t.length>0&&(e.goldChartConfig=r.historyIndexChart(t),e.data_date=c.formatDate(t[t.length-1].data_date))}),t}function d(){var t=n.getProductsByChannelId(e.channel.channelId,e.page_no);return t.then(function(t){if(t){if(t&&t.length>0){for(var n=0;n<t.length;n++){var r=t[n];r.prod_min_subscribe=a("prodMinSubscribe")(c.getMinAmount(r))}e.funds=e.funds.concat(t),e.page_no++}else e.vm.loadMore=!0;e.$broadcast("scroll.infiniteScrollComplete")}}),o.hide(),t}e.channel={},e.vm={},e.channel.channelId=i.id,e.channel.title="LPAUGBPOZ.IDC",e.goldChartConfig=r.historyIndexChart(null),s(),e.doRefresh=function(){s()["finally"](function(){e.$broadcast("scroll.refreshComplete")})},e.loadMore=function(){return d()}}return e.$inject=["$scope","$q","InfoService","HistoryNavChartService","$ionicLoading","$filter","$stateParams","CommonService"],e}),define("controllers/product/QDIITermCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c,s){function l(){e.ads||c.show(),e.channel.channelId=n.id,e.charts=new Array;var t=e.channel.title.split(",");return t.forEach(function(t){e.charts[t]={},e.charts[t].config=a.historyIndexChart(null)}),e.indexJson=new Array,u()}function u(){return o.getChannelInfosByParentId(e.channel.channelId).then(function(t){if(t){for(var n=0;n<t.length;n++){var r=t[n],a={};a.channelId=r.id,a.title=r.remark,a.titleImg=r.small_icon,a.name=r.catalog_name,a.description=r.description,a.rrInSingleYear="",a.rrInSixMonth="",a.funds=new Array,a.isOpen=!1,e.indexJson.push(a)}o.getIndexProfit(e.channel.title).then(function(e){e&&(f(e),p())})}c.hide()})}function d(t){o.getHistoryIndex(t,60).then(function(n){n&&(e.charts[t].config=a.historyIndexChart(n),e.charts[t].date=s.formatDate(n[n.length-1].data_date))})}e.channel={},e.$on("$ionicView.beforeEnter",function(){e.showAds(),l()}),e.doRefresh=function(){l()["finally"](function(){e.$broadcast("scroll.refreshComplete")})},e.showAds=function(n){i.wtAd("xcm_QDIITeam_1").then(function(o){if(o){e.ads=o;var a="ad_"+e.channel.adId;if((n||!r.get(a))&&e.ads.length>0){t.show({cssClass:"kDialog",templateUrl:"product/ads.html",scope:e,buttons:[{text:"确定"}]});r.set(a,!0)}}})},e.openItem=function(t,n){var r=e.indexJson[t],o=r.isOpen;if(o)r.isOpen=!1;else{for(var a=0;a<e.indexJson.length;a++){var i=e.indexJson[a];a==t?i.isOpen=!0:i.isOpen=!1}n&&d(r.title)}};var f=function(t){for(var n=0;n<t.length;n++)for(var r=t[n],o=e.indexJson,a=0;a<o.length;a++)o[a].title==r.index_code&&(o[a].rrInSingleYear=r.price_increase_year,o[a].rrInSixMonth=r.price_increase_month6);e.indexJson=o.sort(function(e,t){return parseFloat(e.rrInSingleYear)>parseFloat(t.rrInSingleYear)?-1:1})},p=function(){o.getChildCatalogProds(e.channel.channelId).then(function(t){if(t)for(var n=0;n<t.length;n++)for(var r=t[n],o=e.indexJson,a=0;a<o.length;a++)o[a].channelId==r.prod_xcm_type&&(r.prod_min_subscribe=s.getMinAmount(r),o[a].funds.push(r))})}}return e.$inject=["$scope","$ionicPopup","$stateParams","LocalCacheService","InfoService","HistoryNavChartService","WebService","$ionicLoading","CommonService"],e}),define("controllers/product/IndexTermCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c,s,l,u,d,f){function p(){return e.ads||d.show(),e.id=a.id,e.showAds(),n.all([m(),h(),g()])}function m(){var t=s.getIndexProfit(e.channel.title);return t.then(function(t){t&&(e.index=t[0])}),t}function h(){var t=s.getHistoryIndex(e.channel.title,60);return t.then(function(t){t&&(e.csi300ChartConfig=l.historyIndexChart(t),e.data_date=f.formatDate(t[t.length-1].data_date))}),t}function g(){return s.getChannelInfosByParentId(e.id).then(function(t){e.channels=t;for(var n=0;n<e.channels.length;n++){var r=e.channels[n];0==n&&(e.vm.activeTab=r.id),function(e){s.getProductsByChannelId(e.id).then(function(t){e.funds=t;for(var n=0;n<e.funds.length;n++){var r=e.funds[n];r.prod_min_subscribe=i("prodMinSubscribe")(f.getMinAmount(r))}})}(r),d.hide()}})}e.channel={},e.vm={},e.vm.activeTab=1,e.csi300ChartConfig=l.historyIndexChart(),e.$on("$ionicView.beforeEnter",function(){p()}),e.doRefresh=function(){p()["finally"](function(){e.$broadcast("scroll.refreshComplete")})},e.$watch("vm.activeTab",function(e,t){e&&r(function(){o.resize()},500)}),e.showAds=function(n){u.wtAd("xcm_indexTeam_1").then(function(r){if(r){e.ads=r;var o="ad_"+e.channel.adId;if((!c.get(o)||n)&&e.ads.length>0){t.show({cssClass:"kDialog",templateUrl:"product/ads.html",scope:e,buttons:[{text:"确定"}]});c.set(o,!0)}}})}}return e.$inject=["$scope","$ionicPopup","$q","$timeout","$ionicScrollDelegate","$stateParams","$filter","LocalCacheService","InfoService","HistoryNavChartService","WebService","$ionicLoading","CommonService"],e}),define("controllers/product/StockTermCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c,s,l,u){function d(){return e.profitFunds||l.show(),e.showFilterSel=!1,e.companys=new Array,e.channel.channelId=a.id,e.showAds(),c.getProductsByChannelId(e.channel.channelId).then(function(t){e.funds=t;for(var r=0;r<e.funds.length;r++){var o=e.funds[r];o.prod_min_subscribe=n("prodMinSubscribe")(u.getMinAmount(o));var a={};a.org_code=o.org_code,a.org_level=o.org_level,a.org_name=o.org_name,a.org_pic_url=o.org_pic_url,a=f(a),a.funds||(a.funds=new Array),a.funds.push(o)}l.hide()})}function f(t){for(var n=0;n<e.companys.length;n++)if(e.companys[n].org_code==t.org_code)return e.companys[n];return e.companys.push(t),e.companys[e.companys.length-1]}e.channel={},e.vm={},e.vm.activeTab=1,e.$on("$ionicView.beforeEnter",function(){d()}),e.doRefresh=function(){d()["finally"](function(){e.$broadcast("scroll.refreshComplete")})},e.showAds=function(t){s.wtAd("xcm_stockTeam_1").then(function(n){if(n){e.ads=n;var o="ad_"+e.channel.adId;if((!i.get(o)||t)&&e.ads.length>0){r.show({cssClass:"kDialog",templateUrl:"product/ads.html",scope:e,buttons:[{text:"确定"}]});i.set(o,!0)}}})},e.show=function(){var n=o.show({cancelOnStateChange:!0,cssClass:"action_s",titleText:"排序",buttons:[{text:1==e.vm.activeTab?"<b>按收益排序</b>":"按收益排序"},{text:2==e.vm.activeTab?"<b>按基金评级排序</b>":"按基金评级排序"
},{text:3==e.vm.activeTab?"<b>按基金公司评级排序</b>":"按基金公司评级排序"}],buttonClicked:function(t){return e.vm.activeTab=t+1,!0},cancelText:"取消",cancel:function(){return console.log("执行了取消操作"),!0}});t(function(){n()},4e3)}}return e.$inject=["$scope","$timeout","$filter","$ionicPopup","$ionicActionSheet","$stateParams","LocalCacheService","InfoService","WebService","$ionicLoading","CommonService"],e}),define("controllers/product/SearchCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i){function c(){if(e.hasSearch=!1,e.historySearch=o.get(e.key),e.vm.loadMore=!1,e.historySearch&&e.historySearch.length>0)for(var t=0;t<e.historySearch.length;t++){var n=e.historySearch[t];l(n)}else e.historySearch=new Array}function s(){r.searchProds(e.search.conditions,e.page_no).then(function(n){if(e.hasSearch=!0,n&&n.length>0){for(var r=0;r<n.length;r++){var o=n[r];l(o),o.prod_name_show=o.prod_name.replace(e.search.conditions,"<mark>"+e.search.conditions+"</mark>")+"<em>"+t.trustAsHtml(o.prod_code.replace(e.search.conditions,"<mark>"+e.search.conditions+"</mark>")+"&nbsp;"+o.prod_catalog_name)+"</em>"}e.searchResult=e.searchResult.concat(n),e.page_no++}else e.vm.loadMore=!1;e.$broadcast("scroll.infiniteScrollComplete")})}function l(e){e.isConcern=a.isConcern(e.prod_code),e.href=i.productPageUrl(e.prod_profit_mode,e.prod_source,e.prod_catalog_mark)}e.key="SearchCtrl_search",e.vm={},c(),e.operUserCare=function(e){a.concern(e)},e.search=function(){return e.search.conditions&&0!=i.trim(e.search.conditions).length?(e.searchResult=new Array,e.page_no=1,void s()):void(e.hasSearch=!1)},e.loadMore=function(){s()},e.cleanSearch=function(){o.remove(e.key),e.historySearch=new Array},e.addHistorySearch=function(t){var n=o.get(e.key);(!n||n.length<=0)&&(n=new Array),10==n.length&&n.shift(),n.push(t),o.set(e.key,n)},e.onBackKeyDown=function(){n.goBack()}}return e.$inject=["$scope","$sce","$ionicHistory","InfoService","LocalCacheService","ConcernService","CommonService"],e}),define("controllers/product/FundTermCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i){function c(t){return t?(e.vm.loadMore=!0,void e.loadMore(t)):o.getChannelInfosByParentMark("fund").then(function(t){e.channels=t;for(var n=0;n<e.channels.length;n++){var o=e.channels[n];0!=n||e.vm.activeTab||(e.vm.activeTab=o.id),o.page_no=1,o.products=new Array}e.vm.loadMore=!0,r(function(){for(var t=0;t<e.channels.length;t++){var n=e.channels[t],r=document.getElementById(n.id).offsetLeft;e.vm.pMap[n.id]=r}},100)})}e.vm={},e.vm.pMap={},c(),e.doRefresh=function(){c(!0),e.$broadcast("scroll.refreshComplete")},e.$watch("vm.activeTab",function(t,o){t&&("101"!=t&&"102"!=t?e.vm.showOrder=!0:e.vm.showOrder=!1,r(function(){n.resize(),e.loadMore()},500))}),e.$watch("vm.showType",function(t,o){if(t)n.$getByHandle("sonScroll").scrollTo(0,0,!0);else if(e.vm.pMap){var a=e.vm.pMap[e.vm.activeTab];document.body.clientWidth/2<a&&a<document.body.clientWidth?r(function(){console.log(3.5*(a-document.body.clientWidth/2)),n.$getByHandle("sonScroll").scrollTo(3.5*(a-document.body.clientWidth/2),0,!0)},100):document.body.clientWidth<=a&&r(function(){console.log(document.body.clientWidth),n.$getByHandle("sonScroll").scrollTo(document.body.clientWidth,0,!0)},100)}}),e.show=function(){var t=i.show({cancelOnStateChange:!0,cssClass:"action_s",titleText:"排序",buttons:[{text:1==e.vm.price_increase_qry_type?"<b>近一月涨幅</b>":"近一月涨幅"},{text:2==e.vm.price_increase_qry_type?"<b>近三月涨幅</b>":"近三月涨幅"},{text:3==e.vm.price_increase_qry_type?"<b>近半年涨幅</b>":"近半年涨幅"},{text:4==e.vm.price_increase_qry_type?"<b>近一年涨幅</b>":"近一年涨幅"},{text:5==e.vm.price_increase_qry_type?"<b>成立以来涨幅</b>":"成立以来涨幅"}],buttonClicked:function(t){return e.vm.price_increase_qry_type=t+1,n.resize(),e.loadMore(!0),!0},cancelText:"取消",cancel:function(){return console.log("执行了取消操作"),!0}});r(function(){t()},4e4)},e.loadMore=function(n){for(var r=0;r<e.channels.length;r++){var i=e.channels[r];if(e.vm.activeTab==i.id){n&&(i.page_no=1,i.products=new Array),o.getProductsByChannelId(i.id,i.page_no,1,e.vm.price_increase_qry_type).then(function(n){if(n&&n.length>0){for(var r=0;r<n.length;r++){var o=n[r];o.prod_min_subscribe=t("prodMinSubscribe")(a.getMinAmount(o)),o.url=a.productPageUrl(o.prod_profit_mode,o.prod_source,o.prod_catalog_mark)}i.products=i.products.concat(n),i.page_no++,e.vm.loadMore=!0}else e.vm.loadMore=!1;e.$broadcast("scroll.infiniteScrollComplete")});break}}}}return e.$inject=["$scope","$filter","$ionicScrollDelegate","$timeout","InfoService","CommonService","$ionicActionSheet"],e}),define("controllers/product/RateCtrl",["require","exports","module"],function(e,t,n){"use strict";function r(e,t,n,r,o,a,i,c,s,l){function u(){return i.getProdRate(d.prod_id).then(function(t){t&&(e.fund=t)})}var d=e.param=new Array;e.$on("$ionicView.beforeEnter",function(){d.prod_id=n.id,u()})}return r.$inject=["$scope","$state","$stateParams","$filter","$ionicHistory","CommonService","InfoService","HistoryNavChartService","$ionicScrollDelegate","$ionicLoading"],r}),define("controllers/help/IndexCtrl",[],function(){"use strict";function e(e,t,n){function r(){return t.wzChannels(n).then(function(n){e.items=n,e.items&&t.wzContents(e.items[0].id,0).then(function(t){e.items[0].contents=t})})}r(),e.doRefresh=function(){r()["finally"](function(){e.$broadcast("scroll.refreshComplete")})}}return e.$inject=["$scope","WebService","HELP_CHANNEL_ID"],e}),define("controllers/help/ItemCtrl",[],function(){"use strict";function e(e,t,n,r,o,a){function i(){return o.wzContent(c.id).then(function(t){t&&t.length>0&&(e.item=t[0],e.item.txt=e.item.txt.replace(new RegExp('src="/tf',"gm"),'src="'+a+"tf"))})}var c=e.param={};c.id=t.id,c.type=t.type,c.selectId=t.selectId,i(),e.doRefresh=function(){i()["finally"](function(){e.$broadcast("scroll.refreshComplete")})}}return e.$inject=["$scope","$stateParams","$timeout","$ionicScrollDelegate","WebService","WZ_BASE_PATH"],e}),define("controllers/help/ListCtrl",[],function(){"use strict";function e(e,t,n,r){function o(){return n.wzContents(a.id,0).then(function(t){e.items=t,t&&t.length>0&&(a.title=t[0].channelName)})}var a=e.param={};a.id=t.id,a.title=t.title,o(),e.doRefresh=function(){o()["finally"](function(){e.$broadcast("scroll.refreshComplete")})}}return e.$inject=["$scope","$stateParams","WebService","CommonService"],e}),define("controllers/open/PrepareCtrl",[],function(){"use strict";function e(e,t){function n(){e.deposit_bank=new Array,t.qryAllDepositBank().then(function(t){for(var n=0;n<t.length;n++)e.deposit_bank.push(t[n])})}e.$on("$ionicView.beforeEnter",function(){n()})}return e.$inject=["$scope","WebService"],e}),define("controllers/open/MsgVerifyCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c){function s(){i.isBuyExperience()?g.project="4":g.project="2",g.source=i.getSource()}function l(){if(d()&&g.send_code_class.indexOf("disabled")<0){g.send_code_class="kBtnDefault mini disabled";var t=i.trim(g.mobile_tel),n={mobile_tel:t};c.qryBindConduitInfo(n).then(function(n){i.isStrEmpty(n.conduit_no)||a.setRecommendInfos(n.conduit_no),g.recommendInfos=a.getRecommendInfos();var o={mobile_tel:t,recommendInfos:g.recommendInfos,source:g.source};c.sendCheckCode(o).then(function(t){h=180,g.send_code_msg=h+"秒后重发",e.sendCheckCode=function(){},g.input_check_code=!0,m=r(u,1e3)},function(e){g.send_code_class="kBtnDefault mini ",g.send_code_msg="获取验证码","XCM-300002"==e.error_no?p():(e.error_info&&(e.error_info=e.error_info.replace("参数传入错误,","")),i.showConfig({message:e.error_info}))})})}}function u(){var t=--h;t>=0?(g.send_code_msg=t+"秒后重发",r(u,1e3)):(m&&r.cancel(m),g.send_code_class="kBtnDefault mini ",g.send_code_msg="获取验证码",e.sendCheckCode=function(){l()},g.input_check_code=!1)}function d(){return i.isStrEmpty(g.mobile_tel)?(i.showAlert({message:"请输入手机号"}),!1):!!i.checkRegex("^1[0-9][0-9]\\d{8}$",i.trim(g.mobile_tel))||(i.showAlert({message:"手机号格式错误"}),!1)}function f(){return d(),!i.isStrEmpty(g.check_code)||(g.input_check_code?i.showAlert({message:"请输入验证码"}):i.showAlert({message:"请点击获取验证码"}),!1)}function p(){o.confirm({cssClass:"kDialog",title:"提示",template:"您已是天风证券客户，请直接登录",okText:"去登录",cancelText:"取消"}).then(function(e){e&&t.go("login")})}var m,h=180,g=e.param={};g.send_code_class="kBtnDefault mini ",g.send_code_msg="获取验证码",g.input_check_code=!1,e.$on("$ionicView.beforeEnter",function(){s(),a.remove("img_base64_6a"),a.remove("img_base64_6b")}),e.sendCheckCode=function(){l()},e.checkMobile=function(){if(f()){n.show();var e=i.trim(g.mobile_tel),r={mobile_tel:e,mobile_code:g.check_code},o={mobile_tel:e,mobile_code:g.check_code,project:g.project,recommendInfos:g.recommendInfos,source:g.source};c.checkMobileCode(r).then(function(){c.msgVerify(o).then(function(e){if("open-msgVerify"==e.url.path){var r=e.params.b;i.isStrEmpty(r)||("1"==r?p():"2,3".indexOf(r)>-1?i.showConfig({message:"您的存管银行绑定申请正在受理中，请稍候处理结果。"}):i.showConfig({message:"您的存管银行绑定异常，请联系客服400-800-5000。"}))}else c.getCurrentOpenUser().then(function(r){n.hide(),a.setOpenUser(r),t.go(e.url.path,angular.fromJson(e.params))})},function(e){n.hide(),i.showAlert({message:i.getErrorInfo(e)})})},function(e){i.showAlert({message:e.error_info}),n.hide()})}}}return e.$inject=["$scope","$state","$ionicLoading","$timeout","$ionicPopup","LocalCacheService","CommonService","WebService"],e}),define("controllers/open/SelectBranchCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i){function c(){i.qryBranch().then(function(e){for(var t=0;t<e.length;t++){var n=e[t];d.branch.push({text:n.branch_name,val:n.branch_no,province_no:n.province_no}),u.indexOf(","+n.province_no+",")<0&&(u+=n.province_no+","),d.branch_data=d.branch}s(),l()})}function s(){if(!a.isStrEmpty(d.default_branch))for(var e=0;e<d.branch_data.length;e++){var t=d.branch_data[e];t.val==d.default_branch&&(d.branch_no=d.default_branch,d.province_no=t.province_no)}}function l(){i.qryProvince().then(function(e){for(var t=0;t<e.length;t++){var n=e[t];u.indexOf(","+n.province_no+",")>-1&&d.province_data.push({text:n.province_name,val:n.province_no})}})}var u=",",d=e.param={};e.$on("$ionicView.beforeEnter",function(){d.branch=[],d.branch_data=[],d.province_data=[],d.default_branch=n.default_branch,c()}),e.provinceChange=function(){d.branch_data=[];for(var e=0;e<d.branch.length;e++)d.branch[e].province_no==d.province_no&&d.branch_data.push(d.branch[e])},e.branchChange=function(){for(var e=0;e<d.branch_data.length;e++)d.branch_data[e].val==d.branch_no&&(d.province_no=d.branch_data[e].province_no)},e.submitBranch=function(){if(a.isStrEmpty(d.branch_no))a.showAlert({message:"您还未选择营业部!"});else{r.show();var e={branch_no:d.branch_no};i.selectBranch(e).then(function(e){i.getCurrentOpenUser().then(function(e){o.setOpenUser(e),r.hide(),t.go("open-uploadID")})})}}}return e.$inject=["$scope","$state","$stateParams","$ionicLoading","LocalCacheService","CommonService","WebService"],e}),define("controllers/open/UploadIDCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c,s){function l(){var e="抱歉！身份证未能识别，请重新拍摄。<ol><li>手动对焦，确保拍摄证件文字、头像清晰</li><li>在光线充足环境拍摄，避免反光（将证件放在角落拍摄可避免反光）</li><li>确保身份证四角都能在拍摄框内</li><li>请将手机横过来拍摄</li></ol>";a.showConfig({okText:"我知道了",message:e})}function u(){return d.front_img||d.reverse_img?d.front_img?!!d.reverse_img||(a.showAlert({message:"请上传身份证反面"}),!1):(a.showAlert({message:"请上传身份证正面"}),!1):(a.showAlert({message:"请上传身份证正反面后再提交"}),!1)}var d=e.param={};d.info={},d.info.branch_no=r.branch_no?r.branch_no:null,e.$on("$ionicView.beforeEnter",function(){var e=s.get("img_base64_6a");e?d.front_img=c.getBase64StrHead()+e:d.front_img=null,e=s.get("img_base64_6b"),e?d.reverse_img=c.getBase64StrHead()+e:d.reverse_img=null}),e.uploadID=function(){"undefined"!=typeof IDCardScanner?IDCardScanner.popScanner(function(e){0==e.error_no&&(1==e.type?(d.info.id_no=e.code,d.info.client_gender="男"==e.gender?"0":"1",d.info.nation=e.nation,d.info.address=e.address,d.info.name=e.name,s.set("img_base64_6a",e.base64str),s.set("info_6a",d.info),d.front_img=c.getBase64StrHead()+e.base64str):(d.info.issue=e.issue,d.info.valid=e.valid,d.info.starttime=e.starttime,d.info.endtime=c.getEndtime(e.endtime),s.set("img_base64_6b",e.base64str),s.set("info_6b",d.info),d.reverse_img=c.getBase64StrHead()+e.base64str),o.resize())}):(n.hide(),a.showAlert({message:"控件检测失败，请重新下载app"}))},e.nextClick=function(){if(u()){n.show(),d.info.source=a.getSource(),d.info.img_base64_6a=s.get("img_base64_6a"),d.info.img_base64_6b=s.get("img_base64_6b");var e=s.get("info_6a");d.info.id_no=e.id_no,d.info.client_gender=e.client_gender,d.info.nation=e.nation,d.info.address=e.address,d.info.name=e.name,e=s.get("info_6b"),d.info.issue=e.issue,d.info.valid=e.valid,d.info.starttime=e.starttime,d.info.endtime=e.endtime,i.uploadID(d.info).then(function(e){n.hide(),t.go("open-personInfo")},function(e){n.hide(),l()})}}}return e.$inject=["$scope","$state","$ionicLoading","$stateParams","$ionicScrollDelegate","CommonService","WebService","DictionaryService","LocalCacheService"],e}),define("controllers/open/PersonInfoCtrl",["require","exports","module","common/distpicker.min","xdate"],function(e){"use strict";function t(e,t,n,r,o,a,i,c,s,l){function u(){s.getCurrentOpenUser().then(function(e){p.client_name=e.client_name,p.id_no=e.id_no,p.branch_no=e.branch_no,p.issued_depart=e.issued_depart,p.id_address=e.address,p.id_begindate=i.stringToDate(e.id_begindate);var t=c.getEndtime(e.id_enddate);t==c.getDefEndtime()&&(p.isLongTerm=!0),p.id_enddate=i.stringToDate(t)},function(){t.go("open-msgVerify")}),d()}function d(){var t=o.defer();return e.address_modal?t.resolve():r.fromTemplateUrl("open/changeAddress.html",{scope:e,animation:"slide-in-up"}).then(function(n){e.address_modal=n,t.resolve()}),t.promise}function f(){if(i.isStrEmpty(p.client_name))return i.showAlert({message:"请输入姓名！"}),!1;if(i.isStrEmpty(p.id_no))return i.showAlert({message:"请输入身份证号！"}),!1;if(i.isStrEmpty(p.id_address))return i.showAlert({message:"请输入身份证地址！"}),!1;if(i.isStrEmpty(p.id_begindate)||isNaN(p.id_begindate.getTime()))return i.showAlert({message:"请选择身份证有效期起始日期！"}),!1;if(p.id_begindate>new Date)return i.showAlert({message:"身份证有效期起始日期不可大于当前日期！"}),!1;if(!p.isLongTerm){if(i.isStrEmpty(p.id_enddate)||isNaN(p.id_enddate.getTime()))return i.showAlert({message:"请选择身份证有效期截止日期！"}),!1;if(p.id_enddate<new Date)return i.showAlert({message:"身份证有效期截止日期不可早于起始日期！"}),!1}if(i.isStrEmpty(p.issued_depart))return i.showAlert({message:"请输入签发机关！"}),!1;if(i.isStrEmpty(p.profession_code))return i.showAlert({message:"请选择职业！"}),!1;if(i.isStrEmpty(p.degree_code))return i.showAlert({message:"请选择学历！"}),!1;var e=i.checkIdCard(p.id_no);if(!e)return i.showAlert({message:"身份证号码输入有误！"}),!1;var t=i.jsGetAge(e);return!(t<18||t>70)||(i.showAlert({message:"您的年龄不符合开户要求，18岁--70岁之间可正常开户。"}),!1)}var p=e.param={};p.profession_ads=c.getProfessionAds(),p.degree_ads=c.getDegreeAds(),p.address={},p.user={},p.profession_code="04",p.degree_code="4",e.$on("$ionicView.beforeEnter",function(){u()}),e.showIdNoInfo=function(){a.show({cssClass:"kDialog",template:"为保证身份证号与您上传的身份证上一致，身份证号不允许修改。<br/>如身份证号有误，请选择”返回重传“，返回上一步重传身份证正面照片，务必保证扫描出正确的身份证号。<br/><br/><p class='fs0'>如有疑问，请联系客服：400-800-5000。</p>",scope:e,buttons:[{text:"<b>取消</b>"},{text:"返回重传",type:"button-positive",onTap:function(t){return e.goUploadId(),!1}}]})},e.goUploadId=function(){t.go("open-uploadID")},e.goChangeAddress=function(){e.address_modal.show(),$("#distpicker").distpicker({autoSelect:!1})},e.changeAddress=function(){if(!p.address.province)return void i.showAlert({message:"请选择省！"});if(!p.address.city)return void i.showAlert({message:"请选择市！"});var t=angular.element(document.querySelector("#city")),n=null;n=0==t.find("option:selected")?$("#city option:last").attr("data-code"):$("#city option:selected").attr("data-code");var r=ChineseDistricts[n];return!p.address.district&&r?void i.showAlert({message:"请选择区！"}):p.address.more?(p.id_address=p.address.province+p.address.city+p.address.district+p.address.more,void e.address_modal.hide()):void i.showAlert({message:"请输入详细门牌信息！"})},e.closeModal=function(){e.address_modal.hide()},e.$on("$destroy",function(){e.address_modal.remove()}),e.register=function(){if(f()){n.show();var r,o=new XDate(p.id_begindate).toString("yyyyMMdd");r=p.isLongTerm?c.getDefEndtime():new XDate(p.id_enddate).toString("yyyyMMdd");var u={client_name:p.client_name,id_no:p.id_no,profession_code:p.profession_code,degree_code:p.degree_code,issued_depart:p.issued_depart,id_begindate:o,id_enddate:r,conduit_no:l.getRecommendInfos(),recommend_no:p.recommend_no,branch_no:p.branch_no,id_address:p.id_address,source:i.getSource()};s.open(u).then(function(e){n.hide(),t.go("open-installCert")},function(t){if("XCM-100006,XCM-100007".indexOf(t.error_no)>-1){a.show({cssClass:"kDialog",template:"无法获取客户公安信息。请核实身份证号和姓名后重试。如有疑问，请联系客服：400-800-5000。",scope:e,buttons:[{text:"重新上传",onTap:function(t){return e.goUploadId(),!1}}]})}else i.showAlert({message:t.error_info})})}}}e("common/distpicker.min"),e("xdate");return t.$inject=["$scope","$state","$ionicLoading","$ionicModal","$q","$ionicPopup","CommonService","DictionaryService","WebService","LocalCacheService"],t}),define("controllers/open/InstallCertCtrl",[],function(){"use strict";function e(e,t,n,r){function o(){var e="cert";r.getEncontract(e).then(function(e){a.econtract_name=e.econtract_name,a.econtract_content=e.econtract_content})}var a=e.param={};a.step1=!0,a.step2=!1,a.step3=!1,e.$on("$ionicView.beforeEnter",function(){o()}),e.agree=function(){a.step1=!1,a.step2=!0,r.certInstall().then(function(e){t(function(){a.step2=!1,a.step3=!0},2e3)},function(e){n.showAlert({message:"证书安装失败，请重试"}),a.step1=!0,a.step2=!1})}}return e.$inject=["$scope","$timeout","CommonService","WebService"],e}),define("controllers/open/RiskAssessCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i){function c(){i.getRiskPaper().then(function(e){for(var t=0;t<e.length;t++){var n=e[t],r=new Array;$.each(n.answer_content,function(e,t){"1"==n.question_kind&&e==n.default_answer?r.push({key:e,value:t,checked:!0}):r.push({key:e,value:t}),n.answer_content=r}),n.paper_answer=n.default_answer,n.question_idx=t+1,l.questions.push(n)}})}function s(){for(var e=0;e<l.questions.length;e++){var t=l.questions[e];if(a.isStrEmpty(t.paper_answer))return a.showAlert({message:"第"+t.question_idx+"题未答！"}),!1;if("1"==t.question_kind){for(var n=t.answer_content,r="",o=0;o<n.length;o++)n[o].checked&&(r+=n[o].key+"&");if(a.isStrEmpty(r))return a.showAlert({message:"第"+t.question_idx+"题未答！"}),!1;t.paper_answer=r.substring(0,r.length-1)}}return!!l.risk_warn||(a.showAlert({message:"请勾选《本人确认已理解上述风险测评内容，愿意承担由此带来的风险。》"}),!1)}var l=e.param={};l.risk_step=2,l.questions=new Array,e.$on("$ionicView.beforeEnter",function(){l.risk_step=2,l.questions=new Array,e.user=o.getUser(),c()}),e.expandClick=function(){l.risk_step=2,n(function(){r.resize()},500)},e.submitClick=function(){if(s()){t.show();for(var n="",c=0;c<l.questions.length;c++){var u=l.questions[c];n+=u.question_no+"&"+u.paper_answer+"|"}var d={paper_answer:n,source:a.getSource()};i.openSubmitPaper(d).then(function(){i.getCurrentOpenUser().then(function(n){t.hide(),o.setOpenUser(n),r.scrollTop(),e.user=o.getOpenUser(),l.risk_step=3})})}},e.showLevelDetail=function(){var t={dict_entry:"FXJGJS",subentry:e.user.corp_risk_level};i.qryDictInfo(t).then(function(t){var n="--";t&&t.length>0&&(n=t[0].dict_prompt),a.showConfig({okText:"我知道了",message:e.user.risk_level_name+"："+n})})}}return e.$inject=["$scope","$ionicLoading","$timeout","$ionicScrollDelegate","LocalCacheService","CommonService","WebService"],e}),define("controllers/open/SetPwdCtrl",[],function(){"use strict";function e(e,t,n,r,o){function a(){o.getCurrentOpenUser().then(function(e){l=e.id_no,u=e.mobile_tel},function(){t.go("open-msgVerify")})}function i(){return c(d.trade_pwd,d.trade_pwd_again,"交易")?!(d.switch_fund&&!c(d.fund_pwd,d.fund_pwd_again,"资金"))||(d.fund_pwd=d.fund_pwd_again="",!1):(d.trade_pwd=d.trade_pwd_again="",!1)}function c(e,t,n){return r.isStrEmpty(e)||6!=e.length?(r.showAlert({message:"请输入6位数字"+n+"密码，请重新输入!"}),!1):!!s(e,l,u)&&(!r.isStrEmpty(e)&&!r.isStrEmpty(t)&&e==t||(r.showAlert({message:n+"密码与第一次不符，请重新输入!"}),!1))}function s(e,t,n){var o="^[0-9]{6}$";if(!r.checkRegex(o,e)||6!=e.length)return r.showAlert({message:"请输入6位数字密码"}),!1;if(e==t.substring(6,12)||e==t.substring(8,14))return r.showAlert({message:"密码不能是出生日期的一部分！"}),!1;if(t.indexOf(e)!=-1)return r.showAlert({message:"密码不能是证件号码的一部分！"}),!1;for(var a=0;a<e.length;a++){for(var i=e.charAt(a),c=0,s=0;s<e.length;s++)i==e.charAt(s)&&c++;if(c>=3)return r.showAlert({message:"密码中&nbsp;"+i+"&nbsp;出现的次数超过了三次！"}),!1}var l=["012345","123456","234567","345678","456789","987654","876543","765432","654321","543210"];if(l.indexOf(e)!=-1)return r.showAlert({message:"密码不能是顺序递增或者递减！"}),!1;if(n.indexOf(e)!=-1)return r.showAlert({message:"密码不能是移动电话的一部分！"}),!1;var u=["111111","222222","333333","444444","555555","666666","777777","888888","999999","101010","202020","303030","404040","505050","606060","707070","808080","909090","101010","121212","131313","141414","151515","161616","171717","181818","191919","202020","212121","232323","242424","252525","262626","272727","282828","292929","303030","313131","323232","343434","353535","363636","373737","383838","393939","404040","414141","424242","434343","454545","464646","474747","484848","494949","505050","515151","525252","535353","545454","565656","575757","585858","595959","606060","616161","626262","636363","646464","656565","676767","686868","696969","707070","717171","727272","737373","747474","757575","767676","787878","797979","808080","818181","828282","838383","848484","858585","868686","878787","898989","909090","919191","929292","939393","949494","959595","969696","979797","989898","123412","234523","345634","456745","567856","678967","123012","123123","234234","345345","456456","567567","678678","789789","112233","111222","123412","123443","234567","123456","876543","111122","222233","333344","444455","555566","666677","777788","888899","999900","111111","111122","111133","111144","111155","111166","111177","111188","111199","111100"];return u.indexOf(e)==-1||(r.showAlert({message:"请勿输入简单组合的密码！"}),!1)}var l,u,d=e.param={};e.$on("$ionicView.beforeEnter",function(){d.switch_abc=!1,d.switch_fund=!1,a()}),e.setPwd=function(){if(i()){n.show();var e=d.trade_pwd,a=e;d.switch_fund&&(a=d.fund_pwd);var c={password:e,fund_password:a,source:r.getSource()};o.setPwd(c).then(function(e){n.hide(),t.go("open-bindOpenDeposit",{b:1})})}}}return e.$inject=["$scope","$state","$ionicLoading","CommonService","WebService"],e}),define("controllers/open/SignAgreementCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i){function c(){i.qryDjTa().then(function(e){for(var t=e.length-1;t>=0;t--){var n=e[t];n.checked=!0,u.ta_array.push(n)}}),s()}function s(){var t=o.defer();return e.company_modal?t.resolve():r.fromTemplateUrl("open/fundCompanyList.html",{scope:e,animation:"slide-in-up"}).then(function(n){e.company_modal=n,t.resolve()}),t.promise}function l(){return u.fund_sel?!!u.agreement_sel||(a.showAlert({message:"请勾选《我已阅读并同意签署相关开户协议》"}),!1):(a.showAlert({message:"请勾选《同意开通相关基金账户》"}),!1)}var u=e.param={};e.$on("$ionicView.beforeEnter",function(){u.econtract_type="1",u.fund_sel=!0,u.agreement_sel=!0,u.ta_array=new Array,c()}),e.closeModal=function(){e.company_modal.hide()},e.$on("$destroy",function(){e.company_modal.remove()}),e.fundCompanyList=function(){e.company_modal.show()},e.selFundCompany=function(){for(var t=!1,n=0;n<u.ta_array.length;n++)u.ta_array[n].checked&&(t=!0);t?e.company_modal.hide():a.showAlert({message:"请选择至少一个基金公司"})},e.signAgreement=function(){if(l()){n.show();for(var e="",r=0;r<u.ta_array.length;r++)u.ta_array[r].checked&&(e+=0==r?u.ta_array[r].fund_company:u.ta_array[r].fund_company);i.saveEcontract().then(function(e){n.hide(),t.go("open-revisitPaper")})}}}return e.$inject=["$scope","$state","$ionicLoading","$ionicModal","$q","CommonService","WebService"],e}),define("controllers/open/RevisitPaperCtrl",[],function(){"use strict";function e(e,t,n,r,o){function a(){o.qryRevisitPaper().then(function(e){for(var t=0;t<e.length;t++){var n=e[t],r=new Array;$.each(n.answer_content,function(e,t){r.push({key:e,value:t}),n.answer_content=r}),n.paper_answer="",n.question_idx=t+1,s.questions.push(n)}})}function i(){for(var e=0;e<s.questions.length;e++){var t=s.questions[e];if(r.isStrEmpty(t.paper_answer))return r.showAlert({message:"第"+t.question_idx+"题未答！"}),!1}for(var e=0;e<s.questions.length;e++){var t=s.questions[e];if(t.paper_answer!=t.default_answer)return c(t.question_idx+""),!1}return!0}function c(e){switch(e){case"1":TF.Bubble.show("如不是本人意愿，无法成功申请账户！");break;case"2":TF.Bubble.show('请仔细阅读协议后，选择"是"，否则无法成功申请账户！');break;case"3":TF.Bubble.show("非本人设置密码将影响账户安全，无法成功申请账户！");break;case"4":TF.Bubble.show("若工作人员违规操作，请拨打我们客服电话反馈。否则无法成功申请账户！");break;case"5":TF.Bubble.show('请选择"是"，非本人操作将无法成功申请账户！')}}var s=e.param={};e.$on("$ionicView.beforeEnter",function(){s.questions=new Array,a()}),e.radioClick=function(e,t,n){t!=n&&c(e)},e.submitPaper=function(){if(i()){n.show();for(var e="",a=0;a<s.questions.length;a++){var c=s.questions[a];e+=c.question_no+"&"+c.paper_answer+"|"}var l={paper_answer:e,source:r.getSource()};o.submitRevisitPaper(l).then(function(e){n.hide(),"0,1,9".indexOf(e.open_status)>-1?t.go("open-openResult",{open_status:e.open_status}):t.go("open-bindOpenDeposit",{b:"0"})})}}}return e.$inject=["$scope","$state","$ionicLoading","CommonService","WebService"],e}),define("controllers/open/OpenResultCtrl",[],function(){"use strict";function e(e,t,n,r,o,a){function i(e){a.openActChannelInfo(e).then(function(e){e&&e.paper_id&&r.confirm({cssClass:"kDialog",template:"您已完成开户，现小财迷正在举办“体验赢大奖”活动，体验即有机会赢取1000元现金红包，诚邀您的参与！",okText:"立即参加",cancelText:"不参加"}).then(function(e){e&&a.channelStep("date").then(function(e){if(e&&e.length>0){var n=e[0].imgUrl.split("/")[1],r=e[0].imgUrl.split("/")[2];t.go(n,{id:r})}})})})}var c=e.param={};e.$on("$ionicView.beforeEnter",function(){e.user=o.getOpenUser(),c.open_status=n.open_status,1==c.open_status&&i(e.user.client_id),a.wtAd("xcm_open_result").then(function(e){c.ads=e})})}return e.$inject=["$scope","$state","$stateParams","$ionicPopup","LocalCacheService","WebService"],e}),define("controllers/open/ChannelRiskCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c,s){function l(){var e={product_no:d.product_no,conduit_no:i.getRecommendInfos(),source:c.getSource()};s.qryChannelRiskPaper(e).then(function(e){for(var t=0;t<e.length;t++){var n=e[t];if("0,1".indexOf(n.question_kind)>-1){var r=new Array;$.each(n.answer_content,function(e,t){"1"==n.question_kind&&e==n.default_answer?r.push({key:e,value:t,checked:!0}):r.push({key:e,value:t}),n.answer_content=r})}n.paper_answer=n.default_answer,n.question_idx=t+1,d.questions.push(n)}})}function u(){for(var e=0;e<d.questions.length;e++){var t=d.questions[e];if("0"==t.question_kind&&c.isStrEmpty(t.paper_answer))return c.showAlert({message:"第"+t.question_idx+"题未答！"}),!1;if("1"==t.question_kind){for(var n=t.answer_content,r="",o=0;o<n.length;o++)n[o].checked&&(r+=n[o].key+"&");if(c.isStrEmpty(r))return c.showAlert({message:"第"+t.question_idx+"题未答！"}),!1;t.paper_answer=r.substring(0,r.length-1)}if("2"==t.question_kind){var r=t.paper_answer;if(c.isStrEmpty(r)){var a=i.getUser();a&&(t.paper_answer=a.mobile_tel)}else if(!c.checkRegex("^1[0-9][0-9]\\d{8}$",c.trim(r)))return c.showAlert({message:"第"+t.question_idx+"题请输入正确的手机号格式！"}),!1}}return!0}var d=e.param={};e.$on("$ionicView.beforeEnter",function(){d.paper_id=t.paper_id,d.product_no=t.product_no,d.questions=new Array,d.show_question=!0,e.user=i.getUser(),l()}),e.onExitKeyDown=function(){a.confirm({cssClass:"kDialog",template:"您确定要退出问卷填写吗？",okText:"确定",cancelText:"取消"}).then(function(e){e&&o.go("tab.index")})},e.submitClick=function(){if(u()){n.show();for(var t="",o=0;o<d.questions.length;o++){var a=d.questions[o];t+=a.question_no+"&"+a.paper_answer+"|"}var l={client_id:e.user.client_id,conduit_no:i.getRecommendInfos(),answer_content:t,source:c.getSource(),paper_id:d.paper_id,product_no:d.product_no};s.submitChannelRiskPaper(l).then(function(){n.hide(),t="",d.show_question=!1,r.scrollTop()})}}}return e.$inject=["$scope","$stateParams","$ionicLoading","$ionicScrollDelegate","$state","$ionicPopup","LocalCacheService","CommonService","WebService"],e}),define("controllers/open/BindDepositBankCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c,s,l){function u(){s.qryAllDepositBank().then(function(t){for(var r=0;r<t.length;r++){var o=t[r];o.brief=n.trustAsHtml(o.brief),e.deposit_banks.push(o)}}),c.isStrEmpty(h.b)||"0"!=h.b||(h.step=2,s.qryOpenResult().then(function(e){h.fail_info="存管绑定处理失败，失败原因："+e.open_result+"</br>请重新绑定"})),d()}function d(){var t=i.defer();return e.bank_modal?t.resolve():a.fromTemplateUrl("open/depositBankList.html",{scope:e,animation:"slide-in-up"}).then(function(n){e.bank_modal=n,t.resolve()}),t.promise}function f(){if(h.step=2,o.hide(),!c.isStrEmpty(h.bank_account)){var e=h.bank_account;h.bank_account_msg="尾号<em>"+e.substr(e.length-4)+"</em>"}h.bind_success=2,c.isStrEmpty(h.b)||("0"==h.b?t.go("open-revisitPaper"):t.go("open-signAgreement"))}function p(e){if(h.step=2,o.hide(),"XCM-300001"==e.error_no)c.showNotice(e.error_info);else if("XCM-200011"==e.error_no){if(!c.isStrEmpty(h.bank_account)){var n=h.bank_account;h.bank_account_msg="尾号<em>"+n.substr(n.length-4)+"</em></br>我们会在1个交易日内完成您的资料审核，并在审核完成后短信通知您结果。成功后您就可以购买产品了。"}h.bind_success=2,c.isStrEmpty(h.b)||("0"==h.b?t.go("open-revisitPaper"):t.go("open-signAgreement"))}else"IFS-1045"==e.error_no?h.bind_success=3:h.fail_info="失败原因："+c.getErrorInfo(e)+"</br>请重新绑定"}function m(){if(c.isStrEmpty(h.bank_no))return c.showAlert({message:"请选择银行"}),!1;if(2!=h.contract_way){if(c.isStrEmpty(h.bank_account))return c.showAlert({message:"请输入银行卡号"}),!1;if(h.bank_account=c.trim(h.bank_account),!/^\d{16,19}$/.test(h.bank_account))return c.showAlert({message:"请输入正确银行卡号16-19位"}),!1;if(1==h.ispwd){if(c.isStrEmpty(h.bank_pwd))return c.showAlert({message:"请输入银行密码"}),!1;if(!c.checkRegex("^[0-9]{6}$",h.bank_pwd))return c.showAlert({message:"银行密码格式不正确"}),!1}}return!!h.agreement||(c.showAlert({message:"请勾选我已阅读并同意签署相关银行存管协议"}),!1)}var h=e.param={};h.step=1,e.$on("$ionicView.beforeEnter",function(){if(h.step=1,h.b=r.b,e.deposit_banks=new Array,h.bank_name="请选择银行",h.agreement=!0,h.bind_success=1,l.get("BindDepositBankCtrl_bankInfo")){var t=l.get("BindDepositBankCtrl_bankInfo");h.bank_name=t.bank_name,h.contract_way=t.contract_way,h.ispwd=t.ispwd,h.brief=t.brief,h.econtract_id=t.econtract_id,h.bank_no=t.bank_no,h.bank_account=t.bank_account,h.bank_pwd=t.bank_pwd,l.remove("BindDepositBankCtrl_bankInfo")}u()}),e.$on("$destroy",function(){e.bank_modal.remove()}),e.closeModal=function(){e.bank_modal.hide()},e.showBankClick=function(){e.bank_modal.show()},e.selectBank=function(t){"5"==t.bank_no?h.pwd_msg="请输入电话银行密码":h.pwd_msg="请输入银行卡密码",h.contract_way=t.contract_way,h.ispwd=t.ispwd,h.brief=t.brief,h.bank_no=t.bank_no,h.econtract_id=t.econtract_id,h.bank_name=t.bank_name,h.bank_account=null,h.bank_pwd=null,e.bank_modal.hide()},e.saveBankInfo=function(){var e={contract_way:h.contract_way,ispwd:h.ispwd,brief:h.brief.toString(),bank_no:h.bank_no,econtract_id:h.econtract_id,bank_name:h.bank_name,bank_account:h.bank_account,bank_pwd:h.bank_pwd};l.set("BindDepositBankCtrl_bankInfo",e)},e.bindBankClick=function(){if(m()){o.show();var e={bank_no:h.bank_no,bank_account:h.bank_account,econtract_id:h.econtract_id,source:c.getSource()};h.need_pwd&&$.extend(e,{bk_password:h.bank_pwd}),c.isStrEmpty(h.b)?s.reopenBankAccount(e).then(function(e){f()},function(e){p(e)}):s.openBankAccount(e).then(function(e){f()},function(e){p(e)})}},e.reBind=function(){h.step=1,h.bank_name="请选择银行",h.agreement=!0,h.bind_success=1,h.bank_no="",h.bank_account="",h.contract_way="",h.ispwd=""}}return e.$inject=["$scope","$state","$sce","$stateParams","$ionicLoading","$ionicModal","$q","CommonService","WebService","LocalCacheService"],e}),define("controllers/open/BindQuickBankCtrl",[],function(){"use strict";
function e(e,t,n,r,o,a,i,c,s,l){function u(){l.qeyAllPayBank().then(function(t){for(var n=0;n<t.length;n++)e.qucik_banks.push(t[n])}),d()}function d(){var t=i.defer();return e.bank_modal?t.resolve():o.fromTemplateUrl("open/quickBankList.html",{scope:e,animation:"slide-in-up"}).then(function(n){e.bank_modal=n,t.resolve()}),t.promise}function f(e){if("0000"==e.code){var n={bank_no:m.bank_no,bank_account:m.bank_account,bank_name:m.bank_name,from:m.from,fromUrl:m.from_url,toUrl:m.to_state,source:s.getSource(),is_ajax:"ajax",conduit_no:c.getRecommendInfos()};l.signSuccess(n).then(function(e){r.hide(),e.error_info?(m.step=2,m.error_info=e.error_info):"open"==e.from?t.go(m.to_state.stateName,m.to_state.stateParams):(m.step=2,m.success_info="快捷支付银行卡："+e.bank_name+"   尾号<em>"+e.bank_account.substr(e.bank_account.length-4),m.bind_success=!0)},function(e){r.hide(),s.showNotice(e.error_info)})}else r.hide(),s.showAlert({message:e.msg})}function p(){return s.isStrEmpty(m.bank_no)?(s.showAlert({message:"请选择银行"}),!1):s.isStrEmpty(m.bank_account)?(s.showAlert({message:"请输入银行卡号"}),!1):(m.bank_account=s.trim(m.bank_account),/^\d{16,19}$/.test(m.bank_account)?!!m.agreement||(s.showAlert({message:"请勾选我已阅读并同意签署《天风证券快捷支付协议》"}),!1):(s.showAlert({message:"请输入正确银行卡号16-19位"}),!1))}var m=e.param={};m.b=n.b,m.step=1,e.$on("$ionicView.beforeEnter",function(){if(e.qucik_banks=new Array,m.b=n.b,m.step=1,m.agreement=!0,m.bind_success=!1,m.bank_name="请选择银行",m.from="open",m.to_state={stateName:"open-signAgreement"},m.from_url=location.href,"2"==m.b){var t=c.get("buy_state");t?m.to_state=t:m.to_state=c.get("lcty_state")}if(c.get("BindQuickBankCtrl_bankInfo")){var r=c.get("BindQuickBankCtrl_bankInfo");m.bank_name=r.bank_name,m.bank_no=r.bank_no,m.econtract_id=r.econtract_id,m.bank_account=r.bank_account,c.remove("BindQuickBankCtrl_bankInfo")}u()}),e.$on("$destroy",function(){e.bank_modal.remove()}),e.onBackKeyDown=function(){a.goBack()},e.closeModal=function(){e.bank_modal.hide()},e.showBankClick=function(){e.bank_modal.show()},e.selectBank=function(t){m.bank_no=t.bank_no,m.econtract_id=t.econtract_id,m.bank_name=t.bank_name,m.bank_account=null,e.bank_modal.hide()},e.saveBankInfo=function(){var e={bank_name:m.bank_name,bank_no:m.bank_no,econtract_id:m.econtract_id,bank_account:m.bank_account};c.set("BindQuickBankCtrl_bankInfo",e)},e.bindBankClick=function(){if(s.isStrEmpty(m.b)&&(m.from="manager"),p()){r.show();var e={bank_no:m.bank_no,bank_account:m.bank_account,econtract_id:m.econtract_id,from:m.from};l.signBankMsg(e).then(function(e){var t=new ChinaPay;t.auth([e.json],f,function(e){r.hide()})},function(e){r.hide(),"XCM-300001"==e.error_no?s.showNotice(e.error_info):s.showAlert({message:e.error_info})})}},e.reBind=function(){m.step=1,m.agreement=!0,m.bind_success=!1,m.bank_name="请选择银行",m.bank_no="",m.bank_account=""}}return e.$inject=["$scope","$state","$stateParams","$ionicLoading","$ionicModal","$ionicHistory","$q","LocalCacheService","CommonService","WebService"],e}),define("controllers/open/FillCustomerInfoCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i){function c(){"1"!=h&&(e.checkIdNo=function(){if(f()){var t={id_no:e.info.id_no};i.checkIdNo(t).then(function(t){t?e.idNoFlag=!0:(e.idNoFlag=!1,a.showAlert({message:"身份证号已注册！"}))})}})}function s(){return p()&&f(!0)&&d()&&u()&&l()}function l(){var t=e.agreeAgreements=o.get("agreeAgreements");return t.indexOf("2011")!=-1&&t.indexOf("2012")!=-1&&t.indexOf("2010")!=-1||(a.showAlert({message:"请选中相关协议"}),!1)}function u(){var t=angular.element(document.querySelector("#repassword"));return e.info.repassword==e.info.password||(a.showAlert({message:"两次输入的密码不一致！"}),t.focus(),!1)}function d(){var t=angular.element(document.querySelector("#password")),n=e.info.password;return n&&null!=n&&""!=a.trim(n)?(n=a.trim(n),!!/^\d{6}$/.test(n)||(a.showAlert({message:"交易密码为6位数字！"}),t.focus(),!1)):(a.showAlert({message:"交易密码必填！"}),t.focus(),!1)}function f(t){var n=e.info.id_no,r=angular.element(document.querySelector("#id_no"));if(!n||null==n||""==a.trim(n))return a.showAlert({message:"身份证号码必填！"}),t&&r.focus(),!1;if(n=a.trim(n),e.birthday=a.checkIdCard(n),!e.birthday)return a.showAlert({message:"身份证号码输入有误！"}),t&&r.focus(),!1;var o=a.jsGetAge(e.birthday);return o<18||o>70?(a.showAlert({message:"您的年龄不符合开户要求，18岁--88岁之间可正常开户。"}),t&&r.focus(),!1):!(t&&!e.idNoFlag)||(r.focus(),!1)}function p(){var t=angular.element(document.querySelector("#client_name")),n=e.info.client_name;return n&&null!=n&&""!=a.trim(n)?(n=a.trim(n),!(n.length>6)||(a.showAlert({message:"真实姓名长度不能大于6！"}),t.focus(),!1)):(a.showAlert({message:"真实姓名必填！"}),t.focus(),!1)}function m(e){return e=a.trim(e.replace(/ /g,"")),15==e.length?e.substring(14,15)%2==0?"F":"M":18==e.length?e.substring(14,17)%2==0?"F":"M":null}e.info={},e.idNoFlag=!0,e.birthday=null,e.agreeAgreements=o.get("agreeAgreements"),e.agreeAgreements&&(e.agreeAgreements.indexOf("2011")!=-1&&(e.agreement2011=!0),e.agreeAgreements.indexOf("2012")!=-1&&(e.agreement2011=!0),e.agreeAgreements.indexOf("2010")!=-1&&(e.agreement2011=!0));var h=n.b;e.$on("$ionicView.loaded",function(){c()}),e.next=function(){if(s()){var n=a.trim(e.info.id_no),c="中华人民共和国家",l=a.trim(e.info.password),u=m(n),d=a.trim(e.info.client_name),f=o.get("lcyt_branch_no")?o.get("lcyt_branch_no"):null;r.show();var p={client_name:d,id_no:n,address:c,password:l,birthday:e.birthday,client_gender:u,id_address:c,source:a.getSource(),branch_no:f};i.open0(p).then(function(e){r.hide(),t.go("open-bindOpenBank",{b:2})})}}}return e.$inject=["$scope","$state","$stateParams","$ionicLoading","LocalCacheService","CommonService","WebService"],e}),define("controllers/account/ConcernCtrl",[],function(){"use strict";function e(e,t,n,r){function o(){e.userCareFunds=new Array,e.otherFunds=new Array,e.items=new Array,a(),i()}function a(){var n=t.getConcernList();e.concernSize=n.length,""!=n?r.getProdBriefs(n).then(function(t){t&&(e.userCareFunds=t,e.concernSize=e.userCareFunds.length,e.init=!0,e.total_no=Math.ceil(e.concernSize/e.page_size))}):e.vm.showOther=!0}function i(){r.getOthersCare().then(function(t){t&&(e.otherFunds=t,c(e.otherFunds))})}function c(e){for(var t=0;t<e.length;t++){var r=e[t];r.url=n.productPageUrl(r.prod_profit_mode,r.prod_source,r.prod_catalog_mark)}}e.vm={},e.page_no=1,e.page_size=20,e.init=!1,e.vm.showOther=!1,o(),e.$on("$ionicView.afterEnter",function(){e.vm.loadMore=!0}),e.loadMore=function(){e.page_no*e.page_size>=e.concernSize?e.items=e.items.concat(e.userCareFunds.slice((e.page_no-1)*e.page_size,e.userCareFunds.length)):e.items=e.items.concat(e.userCareFunds.slice((e.page_no-1)*e.page_size,e.page_no*e.page_size)),e.page_no==e.total_no?(e.vm.loadMore=!1,e.vm.showOther=!0):e.page_no++,c(e.items),e.$broadcast("scroll.infiniteScrollComplete")},e.unCare=function(n){t.concern(n);for(var r=e.items,o=0;o<r.length;o++)n==r[o].prod_code&&(r.splice(o,1),e.concernSize=r.length)}}return e.$inject=["$scope","ConcernService","CommonService","InfoService"],e}),define("controllers/account/IndexCtrl",[],function(){"use strict";function e(e,t,n,r,o,a){function i(){e.user=n.getUser();var a=e.user.busineState,i="";if("-1"==a?i="当前业务操作不可用[-1]，如有疑问请联系在线客服或客服电话！":"1"==a?i="您尚未绑定手机号[1]，请携带身份证件到附近营业部绑定，若有疑问请联系在线客服或客服电话！":"2"==a?i="您尚未绑定手机号[2]，请携带身份证件到附近营业部绑定。若已绑定，请联系在线客服或客服电话！":"3"==a?i="您客户号绑定的手机号与开户时注册的手机号不一致[3]，如有疑问请联系在线客服或客服电话！":"4"==a?i="您客户号绑定的手机号与开户时注册的手机号不一致[4]，如有疑问请联系在线客服或客服电话！":"5"==a?i="您尚未绑定手机号[5]，请携带身份证件到附近营业部绑定，若有疑问请联系在线客服或客服电话！":"6"==a&&(i="您尚未绑定手机号[6]，请携带身份证件到附近营业部绑定，若有疑问请联系在线客服或客服电话！"),0!=a)return o.showConfig({message:i}),void t.go("tab.index");e.userAccounts=[{title:"沪A股票开户",value:"",href:"tab.account-openAccount",param:1,isOpen:!1},{title:"深A股票开户",value:"",href:"tab.account-openAccount",param:2,isOpen:!1},{title:"沪市TA基金开户",value:"",href:"tab.account-openta",param:1,isOpen:!1},{title:"深市TA基金开户",value:"",href:"tab.account-openta",param:2,isOpen:!1},{title:"创业板转签",value:"",href:"tab.account-entrep",param:null,isOpen:!1},{title:"签署电子签名约定书",value:"",href:null,param:null,isOpen:!1}];var c={client_id:e.user.client_id};r.qryStockholder(c).then(function(t){e.userAccounts[0].isOpen=!0,e.userAccounts[1].isOpen=!0,e.userAccounts[4].isOpen=!0,"1"!=t.H_A.open_status&&null==t.H_A.open_date||"1"!=t.H_A.regflag||(e.userAccounts[0].value="已开通"),"1"!=t.S_A.open_status&&null==t.S_A.open_date||(e.userAccounts[1].value="已开通",t.S_A.holder_rights.indexOf("j")!=-1&&(e.userAccounts[4].value="已开通"))});var s={client_id:e.user.client_id,fund_account:e.user.fund_account};r.qryOfStockHolderAccount(s).then(function(t){e.userAccounts[2].isOpen=!0,e.userAccounts[3].isOpen=!0,"1"==t.H_TA.open_status&&(e.userAccounts[2].value="已开通"),"1"==t.S_TA.open_status&&(e.userAccounts[3].value="已开通")})}var c=!0;e.go=function(e){c?t.go(e):n.getUser()||t.go(e)},e.onBackKeyDown=function(){c?a.isTDX()?a.tdxTradeLocked().then(function(e){"1"!=e.text&&1!=e.text&&t.go("tab.account-assets-index")}):t.go("tab.account-assets-index"):n.getUser()||t.go("tab.index")},e.$on("$ionicView.beforeEnter",function(){a.isTDX()?a.checkUser(i):i()}),e.eSign=function(){a.isTDX()&&a.openDzht().then(function(e){})},e.set=function(){a.isTDX()&&(c=!1,a.sysSet().then(function(){a.checkUser(function(){c=!0,i()})}))}}return e.$inject=["$scope","$state","LocalCacheService","WebService","CommonService","TdxLocalFuncService"],e}),define("controllers/account/AssetsIndexCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c){function s(){e.status="",u.total_invest=0,u.enable_balance=0,u.market_values=0,u.repayment_amount=0,u.total=0,e.user=r.getUser();var t=r.get("AssetsIndexCtrl_show");t?u.show="1"==t:u.show=!0,u.market_values=0,a.totalMoney().then(function(t){e.status+="1",u.market_values=parseFloat(t.market_value)}),a.getUserDepositBankCards().then(function(e){e.length>0&&"1,2".indexOf(e[0].bkaccount_regflag)>-1&&(u.show_recharge=!0,l())}),a.queryTotalIncome().then(function(t){e.status+="1",t&&(u.total_income=parseFloat(t.total_income),u.total_invest=parseFloat(t.total_invest))})}function l(){a.queryBalance().then(function(t){e.status+="1",u.enable_balance=parseFloat(t.enable_balance)})}var u=e.param=new Array;e.onBackKeyDown=function(){t.go("tab.index")},e.showIllustration=function(){var e=i.show({cssClass:"kDialog",template:"<span class='tal'>本账户数据暂只包含小财迷平台理财产品的资产数据，不含股票资产。<br>持仓盈亏是指目前持有产品的合计总盈亏；<br>总投资额是指目前持有产品的总金额，含产品盈亏；<br>账户余额是指本账户内供投资人用于购买产品的资金金额，投资者可以通过充值提现功能将银行卡中的资金转账到账户余额中，也可以将可取余额提现到银行卡。<br>账户中显示的收益数据未扣除手续费，实际收益以基金公司实际到账金额为准。<br>如有疑问，请咨询客服：400-800-5000。</span>",buttons:[{text:"我知道了",type:"button-default"}]});e.then(function(e){})},e.changeShow=function(){r.set("AssetsIndexCtrl_show",u.show?"1":"0")},e.doRefresh=function(){s(),e.$broadcast("scroll.refreshComplete")},e.$on("$ionicView.beforeEnter",function(){s()}),e.$watch("status",function(e,t){e&&e.length>=3&&(u.total=u.total_invest+u.enable_balance+u.market_values-u.repayment_amount)}),e.goRechargeAndWithdraw=function(){t.go("recharge-and-withdraw")}}return e.$inject=["$scope","$state","$rootScope","LocalCacheService","FinancingService","WebService","$ionicPopup","TdxLocalFuncService"],e}),define("controllers/account/ManagerCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c){function s(){for(var t,r,a=n.getUser(),i=o.getProfessionAds(),c=o.getDegreeAds(),s=0;s<i.length;s++)i[s].val==a.profession_code&&(t=i[s].text);for(var l=0;l<c.length;l++)c[l].val==a.degree_code&&(r=c[l].text);e.userInfo=[{title:"姓名",value:a.client_name,href:""},{title:"客户号",value:a.client_id,href:""},{title:"手机",value:a.mobile_tel,href:"tab.account-phoneModify"},{title:"通信地址",value:a.address,href:"tab.account-address"},{title:"邮政编码",value:a.zipcode,href:"tab.account-postcode"},{title:"职业",value:t,href:"tab.account-profession"},{title:"学历",value:r,href:"tab.account-degree"}],e.systemInfo=[{title:"密码修改",value:"",href:""},{title:"银行卡",value:"",href:"#/tab/account-bank"},{title:"身份证信息",value:"",href:"#/tab/account-identification"},{title:"风险测评",value:0!=a.corp_risk_status?1==a.corp_risk_status?"未测评":"已过期":a.risk_level_name,href:"#/tab/account-risk"}],e.btnStatus=!1}e.$on("$ionicView.beforeEnter",function(){s()}),e.modifyPwd=function(){i.isTDX()&&i.modifyPwd().then(function(){i.checkUser(s)})},e.exitClick=function(){e.btnStatus=!0,a.logout().then(function(){e.btnStatus=!1,"undefined"!=typeof Messenger&&Messenger.sendMsg("ym_profileSignOff",null,null,null),i.isTDX()?(i.logout(),n.removeUser()):c.isTHS()?(c.logout(),n.removeUser()):n.removeUser(),"2"==sessionStorage.tf_hunme_from?Messenger.send("close"):t.go("tab.index")},function(){e.btnStatus=!1,r.showAlert({message:"账户退出失败"})})}}return e.$inject=["$scope","$state","LocalCacheService","CommonService","DictionaryService","WebService","TdxLocalFuncService","ThsLocalFuncService"],e}),define("controllers/account/OpenTACtrl",[],function(){"use strict";function e(e,t,n,r,o,a){function i(){e.account={accountType:t.typeid,checked:!1},e.openTA={},e.user=r.getUser();var o={client_id:e.user.client_id,fund_account:e.user.fund_account};n.show(),a.qryOfStockHolderAccount(o).then(function(t){n.hide();var r=e.account.accountType,o=null,a=null;"1"==r?(e.openTA.status=t.H_TA.open_status,o=t.H_TA.stock_account,a="99"):"2"==r&&(e.openTA.status=t.S_TA.open_status,o=t.S_TA.stock_account,a="98"),"1"==e.openTA.status?"99"==a?e.openTA.subtext="您已有上海TA（场外基金）账户（"+o+"）。如有疑问，请拨打客服热线：400-800-5000。":"98"==a&&(e.openTA.subtext="您已有深圳TA（场外基金）账户（"+o+"）。如有疑问，请拨打客服热线：400-800-5000。"):"9"==e.openTA.status&&(e.openTA.subtext="您已经提交了开户申请，系统正在处理中，无需再次提交申请。如有疑问，请拨打客服热线：400-800-5000。")},function(){n.hide(),e.openTA.status="5",e.openTA.subtext="获取信息错误"})}e.$on("$ionicView.beforeEnter",function(){i()}),e.submit=function(){var t=e.account.accountType,r=null;"1"==t?r="99":"2"==t&&(r="98");var i={client_id:e.user.client_id,fund_account:e.user.fund_account,fund_company:r};n.show(),a.addOfStockHolderAccount(i).then(function(t){n.hide(),t.error_info?(e.openTA.status=1,e.openTA.subtext=t.error_info):o.showComplete("../view/template/accounttemplate.html","返回首页","tab.account-index")},function(){n.hide(),o.showAlert({message:"提交失败"})})}}return e.$inject=["$scope","$stateParams","$ionicLoading","LocalCacheService","CommonService","WebService"],e}),define("controllers/account/OpenAccountCtrl",["store"],function(e){"use strict";function t(t,n,r,o,a,i,c){function s(){t.account={accountType:r.typeid,checked:!1},t.openAccount={},t.user=a.getUser();var n=t.account.accountType,i=null;"1"==n?i="10":"2"==n&&(i="20");var s={client_id:t.user.client_id,exchange_kind:i};o.show(),c.qryStockholderDetail(s).then(function(n){o.hide(),t.openAccount.needVideo="true"!=n.hasVideo,t.openAccount.status=n.open_status,t.openAccount.needUploadIDCard="true"!=n.hasUploadIDCard,e.set("needVideo",t.openAccount.needVideo),e.set("needUploadIDCard",t.openAccount.needUploadIDCard),e.set("exchange_kind",i),"1"==n.open_status?"10"==i?"1"==n.regflag?t.openAccount.subtext="您已有上海A股账户（"+n.stock_account+"）。如有疑问，请拨打客服热线：400-800-5000。":"0"==n.regflag&&("1"==n.csdc_time_flag?"0"==n.csdc_relation_flag?t.openAccount.subtext="您已有上海A股账户（"+n.stock_account+"），但未指定在天风证券，可能是由于您之前提交过新开户或转户申请，系统尚未处理完成。请您在下一交易日查询处理结果，如果未开户或转户成功，可以再次提交申请。如有疑问，请拨打客服热线：400-800-5000。":"1"==n.csdc_relation_flag&&(t.openAccount.subtext="您已有上海A股账户（"+n.stock_account+"）,但已指定在其它证券公司。如有疑问，请拨打客服热线：400-800-5000。"):"0"==n.csdc_time_flag&&(t.openAccount.subtext="您已有上海A股账户（"+n.stock_account+"），但未指定在天风证券，可能是由于您之前提交过新开户或转户申请，系统尚未处理完成。请您在下一交易日查询处理结果，如果未开户或转户成功，可以再次提交申请。如有疑问，请拨打客服热线：400-800-5000。")):"20"==i&&(t.openAccount.subtext="您已有深圳A股账户（"+n.stock_account+"）。如有疑问，请拨打客服热线：400-800-5000。"):"9"==n.open_status&&(t.openAccount.subtext="您已经提交了开户申请，系统正在处理中，无需再次提交申请。如有疑问，请拨打客服热线：400-800-5000。")},function(){o.hide(),t.openAccount.status="5",t.openAccount.subtext="获取信息错误"})}t.$on("$ionicView.beforeEnter",function(){s()}),t.submit=function(){if(t.openAccount.needUploadIDCard)n.go("tab.account-openAccountId",{typeid:r.typeid});else if(t.openAccount.needVideo)n.go("tab.account-openAccountVideo",{typeid:r.typeid});else{var e=t.account.accountType,a=null;"1"==e?a="10":"2"==e&&(a="20");var s={exchange_kind:a,sc_open_flag:1};o.show(),c.addStockAccount(s).then(function(e){o.hide(),e.error_info?(t.openAccount.status=1,t.openAccount.subtext=e.error_info):i.showComplete("../view/template/accounttemplate.html","返回首页","tab.account-index")},function(){o.hide(),i.showAlert({message:"提交失败"})})}},t.trans=function(){n.go("tab.account-transAccount",{typeid:r.typeid})}}return t.$inject=["$scope","$state","$stateParams","$ionicLoading","LocalCacheService","CommonService","WebService"],t}),define("controllers/account/OpenAccountIdCtrl",["store"],function(e){"use strict";function t(t,n,r,o,a,i,c,s){function l(){t.status=!1,t.identification={photo:{positive:"../img/id_positive.png",negative:"../img/id_negative.png"},status:!0}}function u(a,i,l){o.show(),s.uploadIDCard({image_no:i,image_data:a}).then(function(a){if(o.hide(),0!=a.error_no)return void c.showAlert({message:a.error_info});if("6A"==i&&l(),"6B"==i){var s=e.get("needVideo"),u=e.get("exchange_kind");if(s)e.set("exchange_kind",u),n.go("tab.account-openAccountVideo",{typeid:r.typeid});else{var d={exchange_kind:u,sc_open_flag:1};o.show(),WebService.addStockAccount(d).then(function(e){o.hide(),e.error_info?(t.openAccount.status=1,t.openAccount.subtext=e.error_info):c.showComplete("../view/template/accounttemplate.html","返回首页","tab.account-index")},function(){o.hide(),c.showAlert({message:"申请失败"})})}}},function(e){o.hide(),c.showAlert({message:e.error_info})})}t.$on("$ionicView.beforeEnter",function(){l()}),t.getPhoto=function(e){i.showSelectDevice(function(n){n.result&&n.result.base64&&a(function(){"positive"==e?t.identification.photo.positive=n.result.base64:t.identification.photo.negative=n.result.base64,t.identification.photo.positive.indexOf(".png")<0&&t.identification.photo.negative.indexOf(".png")<0&&(t.identification.status=!1)},1e3)})},t.submit=function(){u(t.identification.photo.positive.substring(22),"6A",function(){u(t.identification.photo.negative.substring(22),"6B",null)})}}return t.$inject=["$scope","$state","$stateParams","$ionicLoading","$timeout","DeviceService","CommonService","IdentificationService"],t}),define("controllers/account/OpenAccountVideoCtrl",["store"],function(e){"use strict";function t(t,n,r,o,a,i,c,s){function l(){t.user={name:u.client_name}}var u=a.getUser();t.$on("$ionicView.beforeEnter",function(){l()}),t.video=function(){var t={user_id:u.user_id,client_name:u.client_name,branch_no:u.branch_no,businessNumber:"2"};i.asyncVideo(t,function(t){if(o.show(),0==t.error_no){var r=e.get("exchange_kind"),a={exchange_kind:r,sc_open_flag:1};s.addStockAccount(a).then(function(e){return o.hide(),0!=e.error_no&&e.error_info?void c.showAlert({message:e.error_info}):void c.showComplete("../view/template/accounttemplate.html","返回首页","tab.account-index")},function(e){o.hide(),c.showAlert({message:c.getErrorInfo(e)})})}else 2==t.error_no?(o.hide(),n.go("tab.account-openAccountId")):(o.hide(),t.errorInfo&&c.showAlert({message:t.errorInfo}))})}}return t.$inject=["$scope","$state","$stateParams","$ionicLoading","LocalCacheService","DeviceService","CommonService","WebService"],t}),define("controllers/account/TransAccountCtrl",["store"],function(e){"use strict";function t(t,n,r,o,a,i,c){function s(){t.onBackKeyDown=function(){c.goBack(),e.remove("account_code")},t.transAccount={},t.account={accountType:n.typeid,checked:!1,accountCode:e.get("account_code")?e.get("account_code"):""},t.$watch("account.accountCode",function(t,n){t&&e.set("account_code",t)}),t.user=o.getUser();var a=t.account.accountType,s=null;"1"==a?s="10":"2"==a&&(s="20");var l={client_id:t.user.client_id,exchange_kind:s};r.show(),i.qryStockholderDetail(l).then(function(e){r.hide(),t.transAccount.status=e.open_status,"1"==e.open_status?"10"==s?"1"==e.regflag?t.transAccount.subtext="您已有上海A股账户（"+e.stock_account+"）。如有疑问，请拨打客服热线：400-800-5000。":"0"==e.regflag&&("1"==e.csdc_time_flag?"0"==e.csdc_relation_flag?t.transAccount.subtext="您已有上海A股账户（"+e.stock_account+"），但未指定在天风证券，可能是由于您之前提交过新开户或转户申请，系统尚未处理完成。请您在下一交易日查询处理结果（处理成功时账号会显示在“我的账户”首页），如果未开户或转户成功，可以再次提交申请。如有疑问，请拨打客服热线：400-800-5000。":"1"==e.csdc_relation_flag&&(t.transAccount.subtext="您已有上海A股账户（"+e.stock_account+"）,但已指定在其它证券公司。如有疑问，请拨打客服热线：400-800-5000。"):"0"==e.csdc_time_flag&&(t.transAccount.subtext="您已有上海A股账户（"+e.stock_account+"），但未指定在天风证券，可能是由于您之前提交过新开户或转户申请，系统尚未处理完成。请您在下一交易日查询处理结果（处理成功时账号会显示在“我的账户”首页），如果未开户或转户成功，可以再次提交申请。如有疑问，请拨打客服热线：400-800-5000。")):"20"==s&&(t.transAccount.subtext="您已有深圳A股账户（"+e.stock_account+"）。如有疑问，请拨打客服热线：400-800-5000。"):"9"==e.open_status&&(t.transAccount.subtext="您已经提交了转户申请，系统正在处理中，请耐心等待处理结果。如有疑问，请拨打客服热线：400-800-5000")},function(){r.hide(),t.transAccount.status="5",t.transAccount.subtext="获取信息错误"})}t.$on("$ionicView.beforeEnter",function(){s()}),t.submit=function(){e.remove("account_code");var n=t.account.accountType,o=null;"1"==n?o="10":"2"==n&&(o="20");var c={exchange_kind:o,sc_open_flag:2,stock_account:t.account.accountCode};r.show(),i.addStockAccount(c).then(function(e){r.hide(),e.error_info?(t.transAccount.status=0,t.transAccount.subtext=e.error_info):a.showComplete("../view/template/transtemplate.html","返回首页","tab.account-index")},function(){r.hide(),a.showAlert({message:"提交失败"})})}}return t.$inject=["$scope","$stateParams","$ionicLoading","LocalCacheService","CommonService","WebService","$ionicHistory"],t}),define("controllers/account/AgreementListCtrl",[],function(){"use strict";function e(e,t){function n(){var n="1";t.getEncontractList(n).then(function(t){t&&t.length>0&&(e.agreementList=t)})}e.$on("$ionicView.beforeEnter",function(){n()})}return e.$inject=["$scope","WebService"],e}),define("controllers/account/AgreementCtrl",[],function(){"use strict";function e(e,t,n,r,o){function a(){o.getEncontract(r.id).then(function(t){e.agreement=t,e.agreement.econtract_content=n.trustAsHtml(e.agreement.econtract_content)})}e.$on("$ionicView.beforeEnter",function(){a()}),e.back=function(){t.go("tab.account-agreementlist")}}return e.$inject=["$scope","$state","$sce","$stateParams","WebService"],e}),define("controllers/account/EntrepreneurshipCtrl",[],function(){"use strict";function e(e,t,n,r){function o(){e.user=n.getUser();var o={client_id:e.user.client_id};r.checkStockSecond(o).then(function(t){"0"!=t.error_no?"-998"==t.error_no?(e.entrep.state=2,e.entrep.alert="您尚未在天风证券开立深A股东账户！"):"-8"==t.error_no?(e.entrep.state=4,e.entrep.alert="您好，创业板转签请在交易日09:00-16:00进行办理。"):"-9"==t.error_no&&"您未签约创业板，不具备创业板登记条件"==t.error_info?(e.entrep.state=3,e.entrep.alert="您尚未开通过创业板！根据证监会要求，首次开通创业板需到营业部办理！"):(e.entrep.state=4,e.entrep.alert=t.error_info):(e.entrep.state=1,e.entrep.alert="您已满足所有条件！")},function(){t.showAlert({message:"检测失败"})}),e.entrep={state:0,alert:"正在检测转签条件..."}}e.$on("$ionicView.beforeEnter",function(){o()})}return e.$inject=["$scope","CommonService","LocalCacheService","WebService"],e}),define("controllers/account/SaleDepartmentCtrl",[],function(){"use strict";function e(e,t){function n(){e.status=!0,t.getSaleDepartment().then(function(t){e.status=!1,t&&t.length>0&&(e.departmentList=t)})}e.$on("$ionicView.beforeEnter",function(){n()})}return e.$inject=["$scope","WebService"],e}),define("controllers/account/SignCtrl",["store"],function(e){"use strict";function t(t,n,r,o,a){function i(){var i=e.get("SignInfo");t.contracter={mobile:null!=i?i.mobile:"",name:null!=i?i.name:"",relationship:null!=i?i.relationship:{}},t.formEvents={submit:function(){var e={second_contact_name:t.contracter.name,second_contact_mobile:t.contracter.mobile,second_contact_relative:t.contracter.relationship.val};r.show(),a.saveSecondInfo(e).then(function(e){r.hide(),"0"!=e.error_no?"-8"==e.error_no?o.showAlert({message:"您好，创业板转签请在交易日09:00-16:00进行办理。"}):o.showAlert({message:e.error_info}):o.showComplete("../view/template/signtemplate.html","返回首页","tab.account-index")},function(){o.showAlert({message:"转签申请失败"})})},goRelationship:function(){e.set("SignInfo",t.contracter),n.go("tab.account-relationship")}}}t.$on("$ionicView.beforeEnter",function(){i()})}return t.$inject=["$scope","$state","$ionicLoading","CommonService","WebService"],t}),define("controllers/account/RelationshipCtrl",["store"],function(e){"use strict";function t(t,n,r){function o(){t.relationships=r.getRelationshipAds(),t.selectRelationship={val:e.get("SignInfo").relationship.val}}t.$on("$ionicView.beforeEnter",function(){o()}),t.change=function(){for(var n,r=0;r<t.relationships.length;r++)if(t.selectRelationship.val==t.relationships[r].val){n=t.relationships[r].text;var o=e.get("SignInfo");return o.relationship={text:n,val:t.selectRelationship.val},void e.set("SignInfo",o)}},t.onBackKeyDown=function(){n.go("tab.account-sign")}}return t.$inject=["$scope","$state","DictionaryService"],t}),define("controllers/account/DegreeCtrl",[],function(){"use strict";function e(e,t,n,r,o){function a(){e.degrees=n.getDegreeAds(),e.user=t.getUser()}e.$on("$ionicView.beforeEnter",function(){a()}),e.change=function(){o.modifyDegree(e.user.degree_code).then(function(){t.setUser(e.user)},function(){r.showAlert({message:"修改失败"})})}}return e.$inject=["$scope","LocalCacheService","DictionaryService","CommonService","WTService"],e}),define("controllers/account/ProfessionCtrl",[],function(){"use strict";function e(e,t,n,r,o){function a(){e.professions=n.getProfessionAds(),e.user=t.getUser()}e.$on("$ionicView.beforeEnter",function(){a()}),e.change=function(){o.modifyProfession(e.user.profession_code).then(function(){t.setUser(e.user)},function(){r.showAlert({message:"修改失败"})})}}return e.$inject=["$scope","LocalCacheService","DictionaryService","CommonService","WTService"],e}),define("controllers/account/PhoneModifyCtrl",[],function(){"use strict";function e(e){function t(){e.modifyInfo=[{title:"手机号码修改",value:"当前号码使用中",href:"#/tab/account-modifyPhoneFirst"},{title:"手机号码重置",value:"当前号码已不使用",href:"#/tab/account-resetPhoneFirst"}]}e.$on("$ionicView.beforeEnter",function(){t()})}return e.$inject=["$scope"],e}),define("controllers/account/ModifyPhoneFirstCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i){function c(){return 0==u?(e.buttonState.checkState=!1,e.buttonState.checkText="获取验证码",void(u=180)):(u--,e.buttonState.checkText=u+"秒后失效",void(l=n(function(){c()},1e3)))}function s(){l&&n.cancel(l),u=180;var s=o.getUser();d.source=a.getSource(),e.mobileOld={mobile:s.mobile_tel,vCode:""},e.buttonState={checkState:!1,submitState:!1,checkText:"获取验证码"},e.formEvents={getCode:function(){d.recommendInfos=o.getRecommendInfos();var t={mobile_tel:s.mobile_tel,type:"1",app_id:"gcszt"};e.buttonState.checkState=!0,i.sendMobileCode(t).then(function(){c()},function(t){e.buttonState.checkState=!1;var n=a.getErrorInfo(t);"参数传入错误"==n&&(n="请输入正确的手机号码"),a.showAlert({message:n})})},next:function(){t.show();var n={mobile_tel:s.mobile_tel,mobile_code:e.mobileOld.vCode,app_id:"gcszt"};i.checkMobileCode(n).then(function(e){t.hide(),e.error_info?a.showAlert({message:e.error_info}):r.go("tab.account-modifyPhoneLast")},function(e){t.hide();var n=a.getErrorInfo(e);switch(n){case"参数传入错误":n="请输入正确的手机号码及验证码";break;case"未知错误":n="验证码错误"}a.showAlert({message:n})})}}}var l,u,d=e.param={};e.$on("$ionicView.beforeEnter",function(){s()})}return e.$inject=["$scope","$ionicLoading","$timeout","$state","LocalCacheService","CommonService","WTService"],e}),define("controllers/account/ModifyPhoneLastCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i){function c(){return 0==u?(e.buttonState.checkState=!1,e.buttonState.checkText="获取验证码",void(u=180)):(u--,e.buttonState.checkText=u+"秒后失效",void(l=n(function(){c()},1e3)))}function s(){l&&n.cancel(l),u=180,e.mobileNew={mobile:"",vCode:""},e.buttonState={checkState:!1,submitState:!1,checkText:"获取验证码"},e.formEvents={getCode:function(){e.buttonState.checkState=!0;var t={mobile_tel:e.mobileNew.mobile,type:"2",app_id:"gcszt"};i.sendMobileCode(t).then(function(){c()},function(t){e.buttonState.checkState=!1;var n=o.getErrorInfo(t);"参数传入错误"==n&&(n="请输入正确的手机号码"),o.showAlert({message:n})})},submit:function(){t.show();var n={mobile_tel:e.mobileNew.mobile,mobile_code:e.mobileNew.vCode,app_id:"gcszt"};i.checkMobileCode(n).then(function(e){if(t.hide(),e.error_info)o.showAlert({message:e.error_info});else{var a={new_mobile_tel:n.mobile_tel,app_id:"gcszt"};i.modifyMobile(a).then(function(e){if(t.hide(),e.error_info)o.showAlert({message:e.error_info});else{var a=r.getUser();a.mobile_tel=n.mobile_tel,r.setUser(a),o.showComplete("../view/template/phonetemplate.html","返回","tab.account-manager")}},function(){t.hide(),o.showAlert({message:"手机号修改失败"})})}},function(e){t.hide();var n=o.getErrorInfo(e);switch(n){case"参数传入错误":n="请输入正确的手机号码及验证码";break;case"未知错误":n="验证码错误"}o.showAlert({message:n})})}}}var l,u;e.$on("$ionicView.beforeEnter",function(){s()})}return e.$inject=["$scope","$ionicLoading","$timeout","LocalCacheService","CommonService","WebService","WTService"],e}),define("controllers/account/ResetPhoneFirstCtrl",["store"],function(e){"use strict";function t(t,n,r,o,a,i,c,s){function l(){return 0==f?(t.buttonState.checkState=!1,t.buttonState.checkText="获取验证码",void(f=180)):(f--,t.buttonState.checkText=f+"秒后失效",void(d=r(function(){l()},1e3)))}function u(){d&&r.cancel(d),f=180,n.show(),s.initCheck().then(function(r){if(0!=r.error_no)return n.hide(),void i.showAlert({message:r.error_info});var u=r.hasUploadIDCard;s.getCheckRecordStatus().then(function(r){return n.hide(),0!=r.error_no?void i.showAlert({message:r.error_info}):(t.status=!1,p.source=i.getSource(),t.mobileNew={mobile:"",vCode:""},t.buttonState={checkState:!1,submitState:!1,checkText:"获取验证码"},void(t.formEvents={getCode:function(){p.recommendInfos=a.getRecommendInfos();var e={mobile_tel:t.mobileNew.mobile,type:"2",app_id:"gcszt"};t.buttonState.checkState=!0,c.sendMobileCode(e).then(function(){l()},function(e){t.buttonState.checkState=!1;var n=i.getErrorInfo(e);"参数传入错误"==n&&(n="请输入正确的手机号码"),i.showAlert({message:n})})},next:function(){n.show();var r={mobile_tel:t.mobileNew.mobile,mobile_code:t.mobileNew.vCode,app_id:"gcszt"};c.checkMobileCode(r).then(function(r){if(n.hide(),r.error_info)i.showAlert({message:r.error_info});else if(e.set("idCardCheck",{mobile_tel:t.mobileNew.mobile}),"true"==u){var a={business_info:t.mobileNew.mobile,status:"2"};s.uploadCheckSumbit(a).then(function(e){return n.hide(),0!=e.error_no?void i.showAlert({message:e.error_info}):void o.go("tab.account-resetPhoneThird")},function(e){n.hide(),i.showAlert({message:e.error_info})})}else o.go("tab.account-resetPhoneSecond")},function(r){n.hide();var a=i.getErrorInfo(r);switch(a){case"参数传入错误":a="请输入正确的手机号码及验证码";break;case"未知错误":a="验证码错误"}i.showAlert({message:a}),e.set("idCardCheck",{mobile_tel:t.mobileNew.mobile}),o.go("tab.account-resetPhoneSecond")})}}))},function(e){n.hide(),i.showAlert({message:e.error_info})})},function(e){n.hide(),i.showAlert({message:e.error_info}),o.go("tab.account-manager")})}var d,f,p=t.param={};t.$on("$ionicView.beforeEnter",function(){u()})}return t.$inject=["$scope","$ionicLoading","$timeout","$state","LocalCacheService","CommonService","WTService","IdentificationService"],t}),define("controllers/account/ResetPhoneSecondCtrl",["store"],function(e){"use strict";function t(t,n,r,o,a,i,c,s){function l(){t.identification={photo:{positive:"../img/id_positive.png",negative:"../img/id_negative.png"},status:!0}}function u(t,a,c){o.show();var l=n.getUser();s.getCheckPhotoInfo({image_no:a,image_data:t,mobile_tel:l.mobile_tel}).then(function(t){if(o.hide(),0!=t.error_no)return void i.showAlert({message:t.error_info});if("6A"==a&&c(),"6B"==a){var n={id_begindate:t.id_begindate,id_enddate:t.id_enddate,business_info:e.get("idCardCheck").mobile_tel,status:"2"};s.uploadCheckSumbit(n).then(function(e){return o.hide(),0!=e.error_no?void i.showAlert({message:e.error_info}):void r.go("tab.account-resetPhoneThird")},function(e){o.hide(),i.showAlert({message:e.error_info})})}},function(e){o.hide(),i.showAlert({message:e.error_info})})}t.$on("$ionicView.beforeEnter",function(){l()}),t.getPhoto=function(e){c.showSelectDevice(function(n){n.result&&n.result.base64&&a(function(){
"positive"==e?t.identification.photo.positive=n.result.base64:t.identification.photo.negative=n.result.base64,t.identification.photo.positive.indexOf(".png")<0&&t.identification.photo.negative.indexOf(".png")<0&&(t.identification.status=!1)},1e3)})},t.submit=function(){u(t.identification.photo.positive.substring(22),"6A",function(){u(t.identification.photo.negative.substring(22),"6B",null)})}}return t.$inject=["$scope","LocalCacheService","$state","$ionicLoading","$timeout","CommonService","DeviceService","IdentificationService"],t}),define("controllers/account/ResetPhoneThirdCtrl",["store"],function(e){"use strict";function t(t,n,r,o,a,i,c,s){function l(){t.user={name:u.client_name}}var u=o.getUser();t.$on("$ionicView.beforeEnter",function(){l()}),t.video=function(){var t={user_id:u.user_id,client_name:u.client_name,branch_no:u.branch_no,businessNumber:"6"};c.asyncVideo(t,function(t){if(a.show(),0==t.error_no)r.resetMobile("5").then(function(t){if(a.hide(),0!=t.error_no)return void i.showAlert({message:t.error_info});var n=o.getUser();n.mobile_tel=e.get("idCardCheck").mobile_tel,o.setUser(n),i.showComplete("../view/template/phonetemplate.html","返回","tab.account-manager")},function(e){a.hide(),i.showAlert({message:i.getErrorInfo(e)})});else if(2==t.error_no){var c={status:"4"};s.uploadCheckSumbit(c).then(function(e){return a.hide(),0!=e.error_no?void i.showAlert({message:e.error_info}):void n.go("tab.account-resetPhoneSecond")},function(e){a.hide(),i.showAlert({message:e.error_info})})}else a.hide(),t.errorInfo&&i.showAlert({message:t.errorInfo})})}}return t.$inject=["$scope","$state","WTService","LocalCacheService","$ionicLoading","CommonService","DeviceService","IdentificationService"],t}),define("controllers/account/PostCodeCtrl",[],function(){"use strict";function e(e,t,n,r,o){function a(){e.user=n.getUser(),e.formEvents={submit:function(){o.modifyZipcode(e.user.zipcode).then(function(){n.setUser(e.user),t.go("tab.account-manager")},function(){r.showAlert({message:"修改失败"})})}}}e.$on("$ionicView.beforeEnter",function(){a()})}return e.$inject=["$scope","$state","LocalCacheService","CommonService","WTService"],e}),define("controllers/account/AddressCtrl",[],function(){"use strict";function e(e,t,n,r,o){function a(){e.user=n.getUser(),e.formEvents={submit:function(){o.modifyAddress(e.user.address).then(function(){n.setUser(e.user),t.go("tab.account-manager")},function(){r.showAlert({message:"修改失败"})})}}}e.$on("$ionicView.beforeEnter",function(){a()})}return e.$inject=["$scope","$state","LocalCacheService","CommonService","WTService"],e}),define("controllers/account/IdentificationCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i){function c(e){var t;return t=8==e.length?e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2):e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2)+" "+e.substr(8,2)+":"+e.substr(10,2)+":"+e.substr(12,2)}function s(){e.idStatus={},n.show(),a.init().then(function(t){return 0!=t.error_no?(n.hide(),void o.showAlert({message:t.error_info})):void a.getRecordStatus().then(function(t){if(n.hide(),0!=t.error_no)return void o.showAlert({message:t.error_info});if(100==t.idcard_term_record_status)return e.idStatus.status=1,void(e.idStatus.subtext="您的身份证有效期信息异常，无法进行该项操作！");e.idStatus.status=0;var a=r.getUser(),i=c(a.id_begindate)+" ~ "+c(a.id_enddate);e.identifications=[{key:"姓名",value:a.client_name},{key:"身份证",value:a.id_no},{key:"证件地址",value:a.id_address},{key:"签发机关",value:a.issued_depart},{key:"证件有效期",value:i}]},function(e){n.hide(),o.showAlert({message:e.error_info})})},function(e){n.hide(),o.showAlert({message:e.error_info}),t.go("tab.account-manager")})}e.change=function(){i.tdxTradeLocked().then(function(e){if("1"!=e.text&&1!=e.text){var n=new Date,r=n.getHours(),a=n.getDay();0==a||6==a||r<8||r>22?o.showConfig({message:"请在交易日08:00--22:00内办理。"}):t.go("tab.account-changeid")}})},e.$on("$ionicView.beforeEnter",function(){s()})}return e.$inject=["$scope","$state","$ionicLoading","LocalCacheService","CommonService","IdentificationService","TdxLocalFuncService"],e}),define("controllers/account/ChangeIdCtrl",["store"],function(e){"use strict";function t(t,n,r,o,a,i,c){function s(){t.status=!1,t.identification={photo:{positive:"../img/id_positive.png",negative:"../img/id_negative.png"},status:!0}}function l(t,o,a){r.show(),c.getPhotoInfo({image_no:o,image_data:t}).then(function(t){return r.hide(),0!=t.error_no?void i.showAlert({message:t.error_info}):("6A"==o&&(e.set("idCard1",{addr:t.id_address}),a()),void("6B"==o&&(e.set("idCard2",{policeorg:t.issued_depart,idbegindate:t.id_begindate,idenddate:t.id_enddate}),n.go("tab.account-idcheck"))))},function(e){r.hide(),i.showAlert({message:e.error_info})})}t.$on("$ionicView.beforeEnter",function(){s()}),t.getPhoto=function(e){a.showSelectDevice(function(n){n.result&&n.result.base64&&o(function(){"positive"==e?t.identification.photo.positive=n.result.base64:t.identification.photo.negative=n.result.base64,t.identification.photo.positive.indexOf(".png")<0&&t.identification.photo.negative.indexOf(".png")<0&&(t.identification.status=!1)},1e3)})},t.submit=function(){l(t.identification.photo.positive.substring(22),"6A",function(){l(t.identification.photo.negative.substring(22),"6B",null)})}}return t.$inject=["$scope","$state","$ionicLoading","$timeout","DeviceService","CommonService","IdentificationService"],t}),define("controllers/account/IdCheckCtrl",["store"],function(e){"use strict";function t(t,n,r,o,a,i){function c(){var n=o.getUser();t.idInfo={name:n.client_name,identification:n.id_no,organization:e.get("idCard2").policeorg,address:e.get("idCard1").addr,start:e.get("idCard2").idbegindate,end:s,validity:!1}}var s=e.get("idCard2").idenddate;t.$on("$ionicView.beforeEnter",function(){c()}),t.changeValidity=function(){t.idInfo.validity?t.idInfo.end="3000-12-31":t.idInfo.end=s},t.check=function(){r.show();var e={id_begindate:t.idInfo.start,id_enddate:t.idInfo.end};i.uploadSumbit(e).then(function(e){return r.hide(),0!=e.error_no?void a.showAlert({message:e.error_info}):void n.go("tab.account-userInfoVideo")},function(e){r.hide(),a.showAlert({message:e.error_info})})}}return t.$inject=["$scope","$state","$ionicLoading","LocalCacheService","CommonService","IdentificationService"],t}),define("controllers/account/UserInfoVideoCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i){function c(){e.user={name:s.client_name}}var s=n.getUser();e.$on("$ionicView.beforeEnter",function(){c()}),e.video=function(){var e={user_id:s.user_id,client_name:s.client_name,branch_no:s.branch_no,businessNumber:"4"};o.asyncVideo(e,function(e){r.show(),0==e.error_no?i.qryUserInfo().then(function(e){r.hide(),n.setUser(e),a.showComplete("../view/template/videotemplate.html","返回","tab.account-manager")},function(e){r.hide(),a.showAlert({message:e.error_info})}):2==e.error_no?(r.hide(),t.go("tab.account-changeid")):(r.hide(),e.errorInfo&&a.showAlert({message:e.errorInfo}))})}}return e.$inject=["$scope","$state","LocalCacheService","$ionicLoading","DeviceService","CommonService","WebService"],e}),define("controllers/account/ModifyPwdCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i){function c(){if(u.old_pwd==u.new_pwd)return o.showAlert({message:"新密码和旧密码不能相同！"}),u.new_pwd="",u.confirm_pwd="",!1;if("2"==u.pwd_type){if(!s(u.new_pwd,u.confirm_pwd,"交易"))return!1}else if("1"==u.pwd_type&&!s(u.new_pwd,u.confirm_pwd,"资金"))return!1;return!0}function s(t,n,r){return o.isStrEmpty(t)||6==t.length?!!l(t,e.user.id_no,e.user.mobile_tel)&&(!(!o.isStrEmpty(t)&&!o.isStrEmpty(n)&&t!=n)||(o.showAlert({message:r+"密码与第一次不符，请重新输入!"}),!1)):(o.showAlert({message:"请输入6位数字"+r+"密码，请重新输入!"}),!1)}function l(e,t,n){var r="^[0-9]{6}$";if(!o.checkRegex(r,e)||6!=e.length)return o.showAlert({message:"请输入6位数字密码"}),!1;if(e==t.substring(6,12)||e==t.substring(8,14))return o.showAlert({message:"密码不能是出生日期的一部分！"}),!1;if(t.indexOf(e)!=-1)return o.showAlert({message:"密码不能是证件号码的一部分！"}),!1;for(var a=0;a<e.length;a++){for(var i=e.charAt(a),c=0,s=0;s<e.length;s++)i==e.charAt(s)&&c++;if(c>=3)return o.showAlert({message:"密码中&nbsp;"+i+"&nbsp;出现的次数超过了三次！"}),!1}var l=["012345","123456","234567","345678","456789","987654","876543","765432","654321","543210"];if(l.indexOf(e)!=-1)return o.showAlert({message:"密码不能是顺序递增或者递减！"}),!1;if(n.indexOf(e)!=-1)return o.showAlert({message:"密码不能是移动电话的一部分！"}),!1;var u=["111111","222222","333333","444444","555555","666666","777777","888888","999999","101010","202020","303030","404040","505050","606060","707070","808080","909090","101010","121212","131313","141414","151515","161616","171717","181818","191919","202020","212121","232323","242424","252525","262626","272727","282828","292929","303030","313131","323232","343434","353535","363636","373737","383838","393939","404040","414141","424242","434343","454545","464646","474747","484848","494949","505050","515151","525252","535353","545454","565656","575757","585858","595959","606060","616161","626262","636363","646464","656565","676767","686868","696969","707070","717171","727272","737373","747474","757575","767676","787878","797979","808080","818181","828282","838383","848484","858585","868686","878787","898989","909090","919191","929292","939393","949494","959595","969696","979797","989898","123412","234523","345634","456745","567856","678967","123012","123123","234234","345345","456456","567567","678678","789789","112233","111222","123412","123443","234567","123456","876543","111122","222233","333344","444455","555566","666677","777788","888899","999900","111111","111122","111133","111144","111155","111166","111177","111188","111199","111100"];return u.indexOf(e)==-1||(o.showAlert({message:"请勿输入简单组合的密码！"}),!1)}var u=e.param={};e.$on("$ionicView.beforeEnter",function(){e.user=r.getUser(),u.pwd_type="2",u.modify_pwd=!0,u.modify_tab=!0,u.modify_result="",u.remark="注：交易密码是证券交易时的密码。"}),e.backClick=function(){"2"==sessionStorage.tf_hunme_from?(u.modify_tab=!1,$.cookie("back_url_2")&&t.go($.cookie("back_url_2"))):t.go("tab.account-manager")},e.typeCLick=function(){"2"==u.pwd_type?(u.pwd_type="1",u.remark="注：资金密码是资金转出到银行卡时的密码。"):(u.pwd_type="2",u.remark="注：交易密码是证券交易时的密码。"),u.old_pwd="",u.new_pwd="",u.confirm_pwd=""},e.modifyClick=function(){c()&&(n.show(),a.modifyPwd(u.new_pwd,u.old_pwd,u.pwd_type).then(function(){n.hide(),u.modify_pwd=!1,u.modify_tab?"2"==u.pwd_type?(i.isTHS()&&i.modifyPwd(e.user.client_id,u.new_pwd).then(function(e){console.log(e)}),u.modify_result="交易密码已修改，请妥善保管！"):u.modify_result="资金密码已修改，请妥善保管！":u.modify_result="密码已修改，请妥善保管！"},function(e){n.hide(),"XCM-200002"==e.error_no?u.old_pwd="":(u.old_pwd="",u.new_pwd="",u.confirm_pwd=""),o.showConfig({message:e.error_info})}))}}return e.$inject=["$scope","$state","$ionicLoading","LocalCacheService","CommonService","WebService","ThsLocalFuncService"],e}),define("controllers/account/RiskCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c){function s(){var r=n.getUser();e.riskInfo={risk_level_name:r.risk_level_name,corp_risk_level:r.corp_risk_level,corp_risk_status:r.corp_risk_status,risk_end_date:r.corp_end_date},e.from=t.from,l(r)}function l(t){var n={dict_entry:"FXJGJS",subentry:t.corp_risk_level};r.qryDictInfo(n).then(function(t){e.riskInfo.msg="--",t&&t.length>0&&(e.riskInfo.msg=t[0].dict_prompt)})}e.$on("$ionicView.beforeEnter",function(){s()}),e.toRiskEval=function(){a.isTDX()?a.tdxTradeLocked().then(function(e){"1"!=e.text&&1!=e.text&&(t.from?o.go("tab.account-riskEval",{from:t.from,fromParams:t.fromParams,typeid:1}):o.go("tab.account-riskEval"))}):t.from?o.go("tab.account-riskEval",{from:t.from,fromParams:t.fromParams,typeid:1}):o.go("tab.account-riskEval")},e.goBuy=function(){a.isTDX()?a.tdxTradeLocked().then(function(e){"1"!=e.text&&1!=e.text&&t.from&&"trade-buy"==t.from&&o.go(t.from,angular.fromJson(t.fromParams))}):t.from&&"trade-buy"==t.from&&o.go(t.from,angular.fromJson(t.fromParams))},e.next=function(){c.showConfirm({btn1Text:"不同意",btn2Text:"同意",message:"已知晓本人的风险承受能力与本人所选择的投资产品不匹配，本人愿意承担由此带来的风险及造成的后果！"},function(){return!1},function(){o.go("tab.account-OpenStocksHK",{typeid:t.fromParams,go:"must"})})},e.onBackKeyDown=function(){"tab.account-OpenStocksHK"==e.from?o.go("tab.account-index"):i.goBack()}}return e.$inject=["$scope","$stateParams","LocalCacheService","WebService","$state","TdxLocalFuncService","$ionicHistory","CommonService"],e}),define("controllers/account/RiskEvalCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i){function c(){i.getRiskPaper().then(function(e){for(var t=0;t<e.length;t++){var n=e[t],r=new Array;$.each(n.answer_content,function(e,t){r.push({key:e,value:t}),n.answer_content=r}),n.paper_answer="",n.question_idx=t+1,l.questions.push(n)}})}function s(){for(var e=0;e<l.questions.length;e++){var t=l.questions[e];if("0"==t.question_kind&&a.isStrEmpty(t.paper_answer))return a.showAlert({message:"第"+t.question_idx+"题未答！"}),!1;if("1"==t.question_kind){for(var n=t.answer_content,r="",o=0;o<n.length;o++)n[o].checked&&(r+=n[o].key+"&");if(a.isStrEmpty(r))return a.showAlert({message:"第"+t.question_idx+"题未答！"}),!1;t.paper_answer=r.substring(0,r.length-1)}}return!!l.risk_warn||(a.showAlert({message:"请勾选《本人确认已理解上述风险测评内容，愿意承担由此带来的风险。》"}),!1)}var l=e.param={};e.$on("$ionicView.beforeEnter",function(){l.questions=new Array,c()}),e.submitClick=function(){if(s()){r.show();for(var e="",c=0;c<l.questions.length;c++){var u=l.questions[c];e+=u.question_no+"&"+u.paper_answer+"|"}var d={paper_answer:e,isReSubmit:"1",source:a.getSource()};i.submitPaper(d).then(function(){i.qryUserInfo().then(function(e){r.hide(),o.setUser(e),1==n.typeid?n.from?t.go("tab.account-risk",{from:n.from,fromParams:n.fromParams}):t.go("tab.account-risk"):t.go("tab.account-easyFinancingRisk")},function(){r.hide(),a.showAlert({message:"测评已成功；更新用户信息失败"})})},function(){r.hide(),a.showAlert({message:"测评失败"})})}}}return e.$inject=["$scope","$state","$stateParams","$ionicLoading","LocalCacheService","CommonService","WebService"],e}),define("controllers/account/BankCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c){function s(){return e.q_bank=new Array,e.d_bank=null,u.is_hunme=!1,("2"==sessionStorage.tf_hunme_from||o.isBuyExperience())&&(u.is_hunme=!0),r.all([l()])}function l(){var t=a.getUserDepositBankCards();return t.then(function(t){if(t.length>0){if(e.d_bank=t[0],"1,3".indexOf(e.d_bank.bkaccount_regflag)>-1&&"2"==e.d_bank.contract_way)e.d_bank.bank_account_short="",e.d_bank.un_card="unCard";else{var n=e.d_bank.bank_account;e.d_bank.bank_account_short="<span>尾号("+n.substr(n.length-4)+")</span>","农业银行"!=e.d_bank.bank_name&&"建设银行"!=e.d_bank.bank_name||(e.d_bank.showIcon=!0),e.d_bank.un_card="unCard"}"1,3".indexOf(e.d_bank.bkaccount_regflag)>-1?e.d_bank.deposit_class="unfinished":e.d_bank.deposit_class=""}},function(e){o.showAlert({message:o.getErrorInfo(e)})}),t}var u=e.param={};e.$on("$ionicView.beforeEnter",function(){s()}),e.doRefresh=function(){s()["finally"](function(){e.$broadcast("scroll.refreshComplete")})},e.showConfigDetail=function(){i.show({cssClass:"kDialog",template:"由于银行系统原因，此处展示的4位数字为银行分配的账号尾号，而不是实际银行卡的末4位数字。",buttons:[{text:"我知道了"}]})},e.unRegister=function(){c.tdxTradeLocked().then(function(r){"1"!=r.text&&1!=r.text&&a.checkCancelTime().then(function(r){1!=r.yhyw_time_flag?i.show({cssClass:"kDialog",template:"当前为非交易时间，请在交易日09:00-16:00内办理撤销。",buttons:[{text:"确定"}]}):o.showConfirm({message:"请确认是否要办理预指定银行卡撤销？点击“确认”表示办理并同意《三方存管银行变更申请表》。"},function(){},function(){t.show(),a.cancelBankAccount2(e.d_bank.bank_no).then(function(e){o.showAlert({message:"撤销成功!"}),n.go("tab.account-manager"),t.hide()},function(e){o.showConfig({message:"很抱歉，您的预指定银行卡撤销失败！如有疑问，请拨打客服热线：400-800-5000"}),t.hide()})})},function(e){o.showConfig({message:o.getErrorInfo(e)})})})},e.showActivateMsg=function(){o.showConfig({okText:"关闭",message:e.d_bank.brief})}}return e.$inject=["$scope","$ionicLoading","$state","$q","CommonService","WebService","$ionicPopup","TdxLocalFuncService"],e}),define("controllers/account/UnbindBankCtrl",[],function(){"use strict";function e(e,t,n,r,o,a){function i(){return!!o.checkRegex("^[0-9]{6}$",s.password)||(o.showAlert({message:"请输入6位资金密码!"}),!1)}var c=!1,s=e.param={};s.unbind=!0,s.bank_no=t.bank_no,s.bank_account=t.bank_account,s.bank_account_msg=s.bank_account.substr(s.bank_account.length-4),s.bank_name=decodeURI(t.bank_name),s.bank_msg=s.bank_name+"（尾号"+s.bank_account_msg+"）",e.onBackKeyDown=function(){r.goBack()},e.unbindBank=function(){i()&&!c&&(n.show(),c=!0,a.unbindBank(s.bank_no,s.bank_account,s.password).then(function(e){n.hide(),s.unbind=!1,s.success=!0},function(e){n.hide(),s.error_info=o.getErrorInfo(e),s.unbind=!1,s.success=!1}))}}return e.$inject=["$scope","$stateParams","$ionicLoading","$ionicHistory","CommonService","WebService"],e}),define("controllers/account/SharesCtrl",["require","exports","module","xdate"],function(e,t,n){"use strict";function r(e,t,n,r,o,a){function i(){e.shares=new Array,l=new Array,a.show(),n.getAllShares().then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var n=e[t];c(n)}s.isLoaded=!0,a.hide()})}function c(t){o.getFundGeneral(t.prod_code).then(function(n){n&&"0,1,2,3,4".indexOf(n.prod_profit_mode)>-1?(r.isBuyExperience()||$.cookie("back_url_2")?t.fund_alias="":t.fund_alias=n.channelName,"0"==t.bank_no&&(t.pay_account=""),t.pay_account_empty=r.isStrEmpty(t.pay_account),t.prod_profit_mode=n.prod_profit_mode,t.prod_catalog_mark=n.prod_catalog_mark,t.prod_status=n.prod_status,t.enableSell=t.enable_amount>0,"0"==t.prod_profit_mode?(t.prod_gain=n.prod_gain,"dzxfund"==n.prod_catalog_mark&&o.getShortTermFund(t.prod_code,t.trans_account).then(function(e){if(e&&e.length>0){for(var n=0,o=1;o<e.length;o++)n+=parseFloat(e[o].availablevol);var a=e[0];t.enableSell="1"==a.is_redeem_date&&a.sell_time>="09"&&a.sell_time<"15"&&t.enable_amount>0&&r.controlNum(t.enable_amount,2)!=r.controlNum(n,2),t.short_term_fund=e}})):"2"==t.prod_profit_mode?(t.reIncome="--",isNaN(n.prod_duration)||(t.reIncome=parseFloat(t.current_amount)*parseFloat(n.prod_profit_rate)*parseInt(n.prod_duration)/parseFloat(36500)),t.prod_expire_date=n.prod_expire_date,t.total_income=t.current_amount):"3"==t.prod_profit_mode&&(t.prod_expire_date=n.prod_expire_date,t.shareDesc=n.prod_attr_ext_info.prod_share_desc),l.push(t),e.shares=l.sort(function(e,t){return e.prod_code>t.prod_code?1:-1})):r.showConfig({message:"产品信息有误："+n.prod_code})})}var s=e.param=new Array,l=new Array;e.onBackKeyDown=function(){t.go("tab.account-assets-index")},e.$on("$ionicView.beforeEnter",function(){s.prevDate=r.getPrevDate(),s.sys_time=new XDate(new Date).toString("yyyyMMdd"),s.isLoaded=!1,i()}),e.doRefresh=function(){i(),e.$broadcast("scroll.refreshComplete")},e.shortDetail=function(e,t,a,i){o.getShortTermFund(e,t).then(function(o){o&&0!=o.length?n.getOrders(a,e,t).then(function(e){for(var t="<div>卖出开放日提醒（逾期未卖出份额将自动滚存新一期）<ol>",n=0;n<o.length;n++){var c=o[n],s=parseFloat(c.availablevol);if(0==n&&e&&e.length>0){if("1"==a)for(var l=0;l<e.length;l++){var u=e[l];s-=parseFloat(u.entrust_amount)}if("2"==a)for(var l=0;l<e.length;l++){var u=e[l];s-=parseFloat(u.shares)}}var d=r.isStrEmpty(i)?" 9:00-15:00，可卖出":" 当日15:00前，可卖出";t+="<li>"+c.redeem_end_date+d+s+"份</li>"}t+="</ol></div>",r.showConfig({okText:"关闭",message:t})}):r.showAlert("数据获取失败，请重试")})},e.redeemDetail=function(e,t,n,a){o.getProfitDate(e,t).then(function(e){if(e){var o="<div>产品到期时间提醒：<br />";o+=r.formatDate(t)+"到期自动赎回，赎回资金将于"+r.formatDate(e.income_begin_date)+"到账至您的"+n,o+=r.isStrEmpty(a)?"</div>":" 尾号"+a+"</div>",r.showConfig({okText:"关闭",message:o})}})},e.gatherDetail=function(e){r.showConfig({okText:"关闭",message:e})}}e("xdate");return r.$inject=["$scope","$state","WebService","CommonService","InfoService","$ionicLoading"],r}),define("controllers/account/OrdersCtrl",["require","exports","module","xdate"],function(e,t,n){"use strict";function r(e,t,n,r,o,a,i){function c(){e.curOrders=new Array,e.preMon1Orders=new Array,e.preMon2Orders=new Array,d.curMon="--",d.preMon1="--",d.preMon2="--",localStorage.redirect_url&&(d.redirect_url=localStorage.redirect_url),i.show(),o.queryCurOrders().then(function(e){for(var t=0;t<e.length;t++)l(e[t],"0");s(),i.hide()})}function s(){o.queryHisOrders().then(function(t){for(var n=0;n<t.length;n++)l(t[n],"1");0==e.curOrders.length&&(d.curMon=new XDate(new Date).toString("yyyy年MM月"))})}function l(t,n){if("0"==t.isCurRecord){if(0==e.curOrders.length){var r=t.entrust_time;d.curMon=r.substr(0,4)+"年"+r.substr(4,2)+"月"}u(t,n),e.curOrders.push(t)}else if("1"==t.isCurRecord){if(0==e.preMon1Orders.length){var r=t.entrust_time;d.preMon1=r.substr(0,4)+"年"+r.substr(4,2)+"月"}u(t,n),e.preMon1Orders.push(t)}else if("2"==t.isCurRecord){if(0==e.preMon2Orders.length){var r=t.entrust_time;d.preMon2=r.substr(0,4)+"年"+r.substr(4,2)+"月"}u(t,n),e.preMon2Orders.push(t)}}function u(e,t){("1,2".indexOf(e.prodSource)>-1&&"9"!=e.entrust_status||"0"==e.prodSource&&"3"!=e.entrust_status)&&(e.url="#/tab/account-orderDetail?allotNo="+e.allot_no+"&&prodSource="+e.prodSource+"&&isCurrent="+t),"1,2".indexOf(e.prodSource)>-1&&"9"==e.entrust_status&&1==e.pay_kind&&(e.url="#/tab/account-orderDetail?co_serial_no="+e.co_serial_no+"&allotNo="+e.allot_no+"&&prodSource="+e.prodSource+"&&isCurrent="+t),e.entrust_time=a.formatTime(e.entrust_time),"1,2".indexOf(e.prodSource)>-1?"7,8".indexOf(e.entrust_status)>-1?e.success_class="succeed":"0,1,2,V".indexOf(e.entrust_status)>-1?e.success_class="":e.success_class="failed":"2".indexOf(e.entrust_status)>-1?e.success_class="succeed":"0,1,Q".indexOf(e.entrust_status)>-1?e.success_class="":e.success_class="failed"}var d=e.param=new Array;d.isExpand0=!0,d.isExpand1=!1,d.isExpand2=!1,e.onBackKeyDown=function(){t.go("tab.account-assets-index")},e.$on("$ionicView.beforeEnter",function(){c()}),e.doRefresh=function(){c(),e.$broadcast("scroll.refreshComplete")},e.expand=function(){n(function(){r.resize()},500)},e.changeUrl=function(e){location.href=e}}e("xdate");return r.$inject=["$scope","$state","$timeout","$ionicScrollDelegate","WebService","CommonService","$ionicLoading"],r}),define("controllers/account/OrderProdHistoryCtrl",["require","exports","module"],function(e,t,n){"use strict";function r(e,t,n,r,o,a,i){function c(){e.dateMap=new Object,e.dates=new Array,u.prodCode=r.prodCode,u.prodSource=r.prodSource,u.trans_account=r.trans_account,a.queryOrdersByProd(u.prodCode,u.prodSource,u.trans_account).then(function(e){s(e),u.isLoaded=!0})}function s(t){for(var n=t.length-1;n>=0;n--){var r=t[n].entrust_time,o=r.substr(0,4)+"年"+r.substr(4,2)+"月";null!=e.dateMap[o]&&"undefined"!=typeof e.dateMap[o]||(e.dateMap[o]=new Array,n==t.length-1&&(e.dateMap[o].isExpand=!0),e.dates.push(o));var a=t[n];e.dateMap[o].push(l(a))}}function l(e){var t=e.current?"1":"0";return("1,2".indexOf(e.prodSource)>-1&&"9"!=e.entrust_status||"0"==e.prodSource&&"3"!=e.entrust_status)&&(e.url="#/tab/account-orderDetail?allotNo="+e.allot_no+"&&prodSource="+e.prodSource+"&&isCurrent="+t),"1,2".indexOf(e.prodSource)>-1&&"9"==e.entrust_status&&1==e.pay_kind&&(e.url="#/tab/account-orderDetail?co_serial_no="+e.co_serial_no+"&allotNo="+e.allot_no+"&&prodSource="+e.prodSource+"&&isCurrent="+t),e.entrust_time=i.formatTime(e.entrust_time),"V,7,8,Q".indexOf(e.entrust_status)>-1?e.success_class="succeed":"0,1,2".indexOf(e.entrust_status)>-1?e.success_class="":e.success_class="failed",e}var u=e.param=new Array;e.$on("$ionicView.beforeEnter",function(){c(),u.isLoaded=!1}),e.doRefresh=function(){c(),e.$broadcast("scroll.refreshComplete")},e.expand=function(){n(function(){o.resize()},500)}}return r.$inject=["$scope","$state","$timeout","$stateParams","$ionicScrollDelegate","WebService","CommonService"],r}),define("controllers/account/ShareDetailCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i){function c(){o.getShares(u.prodSource,u.allotNo,u.prodCode).then(function(t){1==t.length?(e.holdFund=t[0],"1"==u.prodSource?u.total_income=e.holdFund.total_income:"2"==u.prodSource&&(u.total_income=e.holdFund.income_balance),s()):a.showAlert({message:"持仓信息查询失败",onUnblock:function(){n(function(){e.onBackKeyDown()},3e3)}})})}function s(){i.getFundGeneral(u.prodCode).then(function(t){t&&(e.prodInfo=t,e.prodInfo.inYestoday=parseFloat(e.holdFund.current_amount)/1e4*parseFloat(t.prod_gain),l())})}function l(){e.prodInfo.url=a.productPageUrl(e.prodInfo.prod_profit_mode,e.prodInfo.prod_source),null!=e.prodInfo.url&&"undefined"!=typeof e.prodInfo.url||a.showConfig({message:"产品收益模式未配置:"+e.prodInfo.prod_code})}var u=e.param=new Array;e.onBackKeyDown=function(){t.go("tab.account-shares")},e.$on("$ionicView.beforeEnter",function(){e.holdFund={},e.prodInfo={},u.prevDate=a.getPrevDate(),u.allotNo=r.allotNo,u.prodCode=r.prodCode,u.prodSource=r.prodSource,u.total_income="--",c()}),e.doRefresh=function(){c(),e.$broadcast("scroll.refreshComplete")}}return e.$inject=["$scope","$state","$timeout","$stateParams","WebService","CommonService","InfoService"],e}),define("controllers/account/ShareDetailShortCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i){function c(){o.getShares(d.prodSource,d.allotNo,d.prodCode).then(function(t){t&&1==t.length?(e.holdFund=t[0],"2"==d.prodSource&&(e.holdFund.total_income=e.holdFund.income_balance),s()):a.showAlert({message:"持仓信息查询失败",onUnblock:function(){n(function(){e.onBackKeyDown()},3e3)}})})}function s(){i.getFundGeneral(d.prodCode).then(function(t){t&&(e.prodInfo=t,i.getShortTermFund(d.prodCode,e.holdFund.trans_account).then(function(t){if(t&&t.length>0){f=t[0];for(var n=0;n<t.length;n++)e.short_term_fund.push(t[n]);u()}else d.enableSell=e.holdFund.enable_amount>0}),l())})}function l(){e.prodInfo.url=a.productPageUrl(e.prodInfo.prod_profit_mode,e.prodInfo.prod_source),null!=e.prodInfo.url&&"undefined"!=typeof e.prodInfo.url||a.showConfig({message:"产品收益模式未配置:"+e.prodInfo.prod_code})}function u(){o.getOrders(d.prodSource,d.prodCode,e.holdFund.trans_account).then(function(e){if(d.enable_amount=parseFloat(f.availablevol),e&&e.length>0){if(p=e,"1"==d.prodSource)for(var t=0;t<p.length;t++){var n=p[t];d.enable_amount=d.enable_amount-parseFloat(n.entrust_amount)}if("2"==d.prodSource)for(var t=0;t<p.length;t++){var n=p[t];d.enable_amount=d.enable_amount-parseFloat(n.shares)}}d.enableSell="1"==f.is_redeem_date&&f.sell_time>="09"&&f.sell_time<"15"&&d.enable_amount>0})}var d=e.param=new Array,f={},p={};e.onBackKeyDown=function(){t.go("tab.account-shares")},e.$on("$ionicView.beforeEnter",function(){e.short_term_fund=new Array,e.holdFund={},e.prodInfo={},d.prevDate=a.getPrevDate(),d.allotNo=r.allotNo,d.prodCode=r.prodCode,d.prodSource=r.prodSource,d.payAccount=r.payAccount,d.pay_account_empty=a.isStrEmpty(d.payAccount),d.enable_amount=r.enable_amount,d.enableSell=!1,c()}),e.doRefresh=function(){c(),e.$broadcast("scroll.refreshComplete")},e.shortDetail=function(){for(var t="<div>卖出开放日提醒（逾期未卖出份额将自动滚存新一期）<ol>",n=0;n<e.short_term_fund.length;n++){var r=e.short_term_fund[n],o=parseFloat(r.availablevol);if(0==n&&p&&p.length>0){if("1"==d.prodSource)for(var i=0;i<p.length;i++){var c=p[i];o-=parseFloat(c.entrust_amount)}if("2"==d.prodSource)for(var i=0;i<p.length;i++){var c=p[i];o-=parseFloat(c.shares)}}var s=a.isStrEmpty(d.payAccount)?" 9:00-15:00，可卖出":" 当日15:00前，可卖出";t+="<li>"+r.redeem_end_date+s+o+"份</li>"}t+="</ol></div>",a.showConfig({okText:"关闭",message:t})}}return e.$inject=["$scope","$state","$timeout","$stateParams","WebService","CommonService","InfoService"],e}),define("controllers/account/ShareDetailBankCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i){function c(){o.getShares(u.prodSource,u.allotNo,u.prodCode).then(function(t){1==t.length?(e.holdFund=t[0],1!=u.prodSource&&(e.holdFund.market_value=e.holdFund.current_amount),s()):a.showAlert({message:"持仓信息查询失败",onUnblock:function(){n(function(){e.onBackKeyDown()},3e3)}})})}function s(){i.getFundGeneral(u.prodCode).then(function(t){t&&(e.prodInfo=t,isNaN(t.prod_duration)||(e.prodInfo.reIncome=parseFloat(e.holdFund.current_amount)*parseFloat(t.prod_profit_rate)*parseInt(t.prod_duration)/parseFloat(36500)),1==u.prod_source?u.moreUrl="#/tab/product-detail-otc/"+t.contentId:u.moreUrl="#/tab/product-detail/"+t.contentId,l())})}function l(){e.prodInfo.url=a.productPageUrl(e.prodInfo.prod_profit_mode,e.prodInfo.prod_source,e.prodInfo.prod_catalog_mark),null!=e.prodInfo.url&&"undefined"!=typeof e.prodInfo.url||a.showConfig({message:"产品收益模式未配置:"+e.prodInfo.prod_code})}var u=e.param=new Array;e.onBackKeyDown=function(){t.go("tab.account-shares")},e.$on("$ionicView.beforeEnter",function(){e.holdFund={},e.prodInfo={},u.allotNo=r.allotNo,u.prodCode=r.prodCode,u.prodSource=r.prodSource,u.moreUrl="",c()}),e.doRefresh=function(){c(),e.$broadcast("scroll.refreshComplete")}}return e.$inject=["$scope","$state","$timeout","$stateParams","WebService","CommonService","InfoService"],e}),define("controllers/account/ShareDetailGatherCtrl",["require","exports","module","xdate"],function(e,t,n){"use strict";function r(e,t,n,r,o,a,i){function c(){o.getShares(u.prodSource,u.allotNo,u.prodCode).then(function(t){1==t.length?(e.holdFund=t[0],"2"==u.prodSource&&(e.holdFund.total_income=e.holdFund.income_balance),s()):a.showAlert({message:"持仓信息查询失败",onUnblock:function(){n(function(){e.onBackKeyDown()},3e3)}})})}function s(){i.getFundGeneral(u.prodCode).then(function(t){t&&(e.prodInfo=t,l())})}function l(){e.prodInfo.url=a.productPageUrl(e.prodInfo.prod_profit_mode,e.prodInfo.prod_source),null!=e.prodInfo.url&&"undefined"!=typeof e.prodInfo.url||a.showConfig({message:"产品收益模式未配置:"+e.prodInfo.prod_code})}var u=e.param=new Array;e.onBackKeyDown=function(){t.go("tab.account-shares")},e.$on("$ionicView.beforeEnter",function(){e.holdFund={},e.prodInfo={},u.sys_time=new XDate(new Date).toString("yyyyMMdd"),u.allotNo=r.allotNo,u.prodCode=r.prodCode,u.prodSource=r.prodSource,c()}),e.doRefresh=function(){c(),e.$broadcast("scroll.refreshComplete")},e.gatherDetail=function(e){a.showConfig({okText:"关闭",message:e})}}e("xdate");return r.$inject=["$scope","$state","$timeout","$stateParams","WebService","CommonService","InfoService"],r}),define("controllers/account/ShareDetailQDIICtrl",["require","exports","module"],function(e,t,n){"use strict";function r(e,t,n,r,o,a,i){function c(){o.getShares(u.prodSource,u.allotNo,u.prodCode).then(function(t){1==t.length?(e.holdFund=t[0],"2"==u.prodSource&&(e.holdFund.total_income=e.holdFund.income_balance),s()):a.showAlert({message:"持仓信息查询失败",onUnblock:function(){n(function(){e.onBackKeyDown()},3e3)}})})}function s(){i.getFundGeneral(u.prodCode).then(function(t){t&&(e.prodInfo=t,l())})}function l(){e.prodInfo.url=a.productPageUrl(e.prodInfo.prod_profit_mode,e.prodInfo.prod_source),null!=e.prodInfo.url&&"undefined"!=typeof e.prodInfo.url||a.showConfig({message:"产品收益模式未配置:"+e.prodInfo.prod_code})}var u=e.param=new Array;e.onBackKeyDown=function(){t.go("tab.account-shares")},e.$on("$ionicView.beforeEnter",function(){e.holdFund={},e.prodInfo={},u.allotNo=r.allotNo,u.prodCode=r.prodCode,u.prodSource=r.prodSource,c()}),e.doRefresh=function(){c(),e.$broadcast("scroll.refreshComplete")}}return r.$inject=["$scope","$state","$timeout","$stateParams","WebService","CommonService","InfoService"],r}),define("controllers/account/OrderDetailCtrl",["require","exports","module","xdate"],function(e,t,n){"use strict";function r(e,t,n,r,o,a,i){function c(){return u.isFailureOrder?s():l()}function s(){o.getOrderDetail(u.allotNo,u.prodSource,u.isCurrent).then(function(t){t&&(e.failureOrder=t)}),e.isLoadingPayResult=!0;var t=o.queryBankTransfer(u.co_serial_no,u.isCurrent);return t.then(function(t){e.isLoadingPayResult=!1,0==t.status?e.pay_result="扣款失败，"+t.bank_error_info:e.pay_result="交易失败，但银行扣款成功，请联系客服400-800-5000"}),t}function l(){var t=o.getOrderDetail(u.allotNo,u.prodSource,u.isCurrent);return t.then(function(t){if(t)if(e.orderDetail=t,"0"==t.buyOrSell){var n=t.profitStartDate,r=t.profitShowDate,o=t.prodBeginDate;if(e.orderDetail.isSpecialBuyOrder=a.isStrEmpty(n)||a.isStrEmpty(r),e.orderDetail.isSpecialBuyOrder)if(!a.isStrEmpty(o)&&o.length>=8){t.sysTime>=o&&(e.orderDetail.trade_class="lit",e.orderDetail.prod_begin_class="lit");
var i=new Date(o.substr(0,4),parseFloat(o.substr(4,2))-1,o.substr(6,2));t.prodBeginDate=new XDate(i).toString("MM-dd")+" "+d[i.getDay()]}else t.prodBeginDate="产品成立当日确认购买份额，开始计算收益";else{t.sysTime<n||(t.sysTime>=n&&t.sysTime<r?(e.orderDetail.trade_class="lit",e.orderDetail.profit_start_class="lit none"):(e.orderDetail.trade_class="lit",e.orderDetail.profit_start_class="lit",e.orderDetail.profit_show_class="lit"));var c=new Date(n.substr(0,4),parseFloat(n.substr(4,2))-1,n.substr(6,2)),s=new Date(r.substr(0,4),parseFloat(r.substr(4,2))-1,r.substr(6,2));e.orderDetail.profitStartDate=new XDate(c).toString("MM-dd")+" "+d[c.getDay()],e.orderDetail.profitShowDate=new XDate(s).toString("MM-dd")+" "+d[s.getDay()]}}else{var l=t.redeemShowDate;if(e.orderDetail.trade_class="lit",e.orderDetail.redeem_show_class="lit",a.isStrEmpty(t.pay_account)||(e.orderDetail.pay_account="尾号"+t.pay_account),a.isStrEmpty(l))e.orderDetail.redeemShowDate="--";else{var u=new Date(l.substr(0,4),parseFloat(l.substr(4,2))-1,l.substr(6,2));e.orderDetail.redeemShowDate=new XDate(u).toString("MM-dd")+" "+d[u.getDay()]}}}),t}var u=e.param=new Array;e.onBackKeyDown=function(){var e=r.backView();e&&"tab.account-productOrderHistory"==e.stateName?r.goBack():t.go("tab.account-orders")},e.$on("$ionicView.beforeEnter",function(){e.failureOrder={},e.orderDetail={},e.pay_result=null,u.co_serial_no=n.co_serial_no,u.allotNo=n.allotNo,u.prodSource=n.prodSource,u.isCurrent=n.isCurrent,u.isFailureOrder=u.co_serial_no&&""!=u.co_serial_no,c()}),e.doRefresh=function(){c()["finally"](function(){e.$broadcast("scroll.refreshComplete")})};var d=i.getWeeks()}e("xdate");return r.$inject=["$scope","$state","$stateParams","$ionicHistory","WebService","CommonService","DictionaryService"],r}),define("controllers/account/RechargeCtrl",[],function(){"use strict";function e(e,t,n,r,o){function a(){r.getUserDepositBankCards().then(function(t){if(0!=t.length&&(e.bank=t[0],"1"!=e.bank.bkaccount_regflag)){var n=e.bank.bank_account;e.bank.bank_account_show=n.substr(n.length-4)}},function(e){o.showAlert({message:o.getErrorInfo(e),onUnblock:function(){n.goBack()}})})}e.recharge={},e.bank={},a(),e.fixBalance=function(){var t=e.recharge.occur_balance;angular.isNumber(t)?e.recharge.occur_balance=parseFloat(t.toFixed(2)):e.recharge.occur_balance=0},e.rechargeClick=function(){c()&&(t.show(),r.bankTransfer(e.recharge.bank_password,e.recharge.occur_balance,e.bank.bank_no).then(function(n){switch(t.hide(),n){case"2":i("充值成功",!0);break;case"3":i("充值失败",!1);break;case"4":i("查询存管银行失败。",!1);break;case"5":i("您的存管银行卡还未激活，请激活后再进行充值提现。</br>"+e.bank.remark,!0);break;default:i("充值请求已提交，请于下个交易日9:00后确认结果。",!1)}},function(e){t.hide(),i("充值失败:"+e.error_info,!1)}))};var i=function(e,t){o.showConfig({title:"充值结果",message:e}).then(function(e){t&&n.goBack()})},c=function(){return o.checkRegex("^[0-9]+(.[0-9]{1,2})?$",e.recharge.occur_balance)?0==e.recharge.occur_balance?(o.showAlert({message:"输入金额必须大于零"}),!1):!!o.checkRegex("^[0-9]{6}$",e.recharge.bank_password)||(o.showAlert({message:"请输入6位银行卡密码"}),!1):(o.showAlert({message:"请输入正确的金额,支持两位小数"}),!1)}}return e.$inject=["$scope","$ionicLoading","$ionicHistory","WebService","CommonService"],e}),define("controllers/account/QueryBalanceCtrl",[],function(){"use strict";function e(e,t,n,r,o){function a(){r.getUserDepositBankCards().then(function(t){if(0!=t.length&&(e.bank=t[0],"1"!=e.bank.bkaccount_regflag)){var n=e.bank.bank_account;e.bank.bank_account_show=n.substr(n.length-4)}},function(e){o.showAlert({message:o.getErrorInfo(e),onUnblock:function(){t.goBack()}})})}function i(){return void 0==e.bank.bank_no?(o.showAlert({message:"请选择银行卡"}),!1):!!o.checkRegex("^[0-9]{6}$",e.queryBalance.bank_password)||(o.showAlert({message:"请输入6位银行卡密码"}),!1)}e.$on("$ionicView.beforeEnter",function(){e.bank={},e.queryBalance={},a()}),e.goQueryBalance=function(){i()&&(n.show(),r.queryBankBanlance(e.queryBalance.bank_password,e.bank.bank_no).then(function(e){switch(e.entrust_status){case"2":c('您卡内的余额为：<em class="amount">'+e.occur_balance+"</em>元");break;case"3":c(e.bank_error_info);break;default:c("银行余额查询失败：请在工作日的09:00-16:00进行查询。")}},function(e){c("IFS--61"==e.error_no?"银行余额查询失败：请在工作日的9:00-16:00进行查询":"银行余额查询失败："+e.error_info)}))};var c=function(e){n.hide(),o.showConfig({title:"查询银行卡余额",message:e}).then(function(e){t.goBack()})}}return e.$inject=["$scope","$ionicHistory","$ionicLoading","WebService","CommonService"],e}),define("controllers/account/WithdrawCtrl",[],function(){"use strict";function e(e,t,n,r,o){function a(){o.getUserDepositBankCards().then(function(t){if(0!=t.length){if(e.bank=t[0],"1"!=e.bank.bkaccount_regflag){var n=e.bank.bank_account;e.bank.bank_account_show=n.substr(n.length-4)}i()}},function(e){r.showAlert({message:r.getErrorInfo(e),onUnblock:function(){t.goBack()}})})}function i(){o.queryBalance().then(function(t){e.amount=t.fetch_balance})}e.withdraw={},e.bank={},a(),e.fixBalance=function(){var t=e.withdraw.occur_balance;angular.isNumber(t)?e.withdraw.occur_balance=parseFloat(t.toFixed(2)):e.withdraw.occur_balance=0},e.withdrawClick=function(){s()&&(n.show(),o.bankWithdraw(e.withdraw.fund_password,e.withdraw.occur_balance,e.bank.bank_no).then(function(e){switch(n.hide(),e){case"2":i(),c("提现成功",!0);break;case"3":c("提现失败",!1);break;case"4":c("查询存管银行失败。",!1);break;case"5":c("您的存管银行卡还未激活，请激活后再进行充值提现。",!0);break;default:c("提现请求已提交，请于下个交易日9:00后确认结果。",!1)}},function(e){n.hide(),c("取现失败："+e.error_info,!1)}))};var c=function(e,n){r.showConfig({title:"取现结果",message:e}).then(function(e){n&&t.goBack()})},s=function(){return r.checkRegex("^[0-9]+(.[0-9]{1,2})?$",e.withdraw.occur_balance)?0==e.withdraw.occur_balance?(r.showAlert({message:"输入金额必须大于零"}),!1):r.controlNum(e.withdraw.occur_balance,2)>r.controlNum(e.amount,2)?(r.showAlert({message:"输入金额不能大于可提现金额"}),!1):!!r.checkRegex("^[0-9]{6}$",e.withdraw.fund_password)||(r.showAlert({message:"请输入6位资金密码"}),!1):(r.showAlert({message:"请输入正确的金额,支持两位小数"}),!1)}}return e.$inject=["$scope","$ionicHistory","$ionicLoading","CommonService","WebService"],e}),define("controllers/account/TransferDetailsCtrl",[],function(){"use strict";function e(e,t){function n(){t.queryTransferDetails().then(function(t){e.items=t})}e.items={},n(),e.$on("transferDetailsRefresh",function(e,t){n()})}return e.$inject=["$scope","WebService"],e}),define("controllers/account/RechargeAndWithdrawCtrl",[],function(){"use strict";function e(e){e.vm={},e.vm.activeTab=1,e.doRefresh=function(){e.$broadcast("transferDetailsRefresh"),e.$broadcast("scroll.refreshComplete")}}return e.$inject=["$scope"],e}),define("controllers/trade/BuyCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c,s,l,u,d,f,p,m,h){function g(){T.isSuccess=!1,T.continueBuyUrl="",e.buy={},e.buy.checkProtocol=!1,e.buy.checkRisk=!1,e.buy.checkOpen=!0,e.pay={},e.pay.payAccountStatus=-1,e.buy.risk_confirm_flag=!1,e.payWays=[],e.depositBankData=new Array,e.quickBankData={},e.cmsProdInfo={},e.ifsProdInfo={},e.buy2={},_().then(v),h.qryUserInfo().then(function(t){e.user=t,d.setUser(t),b()},function(){d.removeUser(),s.$emit("userIntercepted","sessionOut")})}function _(){var t=u.defer();return e.buy2Modal?t.resolve():c.fromTemplateUrl("trade/buyStep2.html",{scope:e,animation:"slide-in-up"}).then(function(n){e.buy2Modal=n,t.resolve()}),t.promise}function v(){var t=d.get("SelectPayWayCtrl_pay"),n=d.get("BuyCtrl_buy"),r=i.forwardView();n&&(e.buy=n),!r||"selectPayWay"!=r.stateName&&"recharge-and-withdraw"!=r.stateName||w(t)}function b(){if(f.isBuyExperience()?T.continueBuyUrl="#"+d.get("lcty_state").url:T.continueBuyUrl="#/tab/product-tfTerm/205?index=1",f.isStrEmpty(T.prodCode)||f.isStrEmpty(T.prodSource)){var n=f.showConfig({title:"提示",message:"未选择任何产品"});t(function(){n.close(),r.go("tab.product-tfTerm",{id:205,index:1})},3e3)}if(T.add||h.isAddTrade(T.prodCode,T.prodSource).then(function(e){1==e&&(T.add=1)}),h.getUserDepositBankCards().then(function(t){e.depositBankData=t,y()},function(){y()}),null!=e.user.corp_risk_status&&"0"!=e.user.corp_risk_status){var a;"1"==e.user.corp_risk_status?a="您还未进行风险测评，请先完成风险测评，才能购买此产品！":"2"==e.user.corp_risk_status&&(a="您的风险测评结果已过期，请重新完成风险测评，才能购买此产品！"),e.riskConfirmPopup=o.confirm({cssClass:"kDialog",template:a,cancelText:"放弃",okText:"去风险测评"}),e.riskConfirmPopup.then(function(e){if(e){var t=i.currentView();r.go("tab.account-risk",{from:t.stateName,fromParams:angular.toJson(t.stateParams),step:1})}else i.goBack()})}}function y(){var t=e.depositBankData;"0,2".indexOf(T.prodSource)>-1?0==t.length?M():"1,3".indexOf(t[0].bkaccount_regflag)>-1?R(t[0].bkaccount_regflag):P(T.prodCode,T.prodSource,F):0==t.length||"1,3".indexOf(t[0].bkaccount_regflag)>-1?M():P(T.prodCode,T.prodSource,F)}function C(){h.clientRights().then(function(e){e?T.autographShow=!1:T.autographShow=!0})}function w(t){t?(e.pay=t,S()):h.checkPayStatus(e.buy.entrust_balance).then(function(t){if(e.pay.payAccountStatus=t.status,e.pay.enable_balance=t.enable_balance,t.status==-1)return void f.showAlert({message:"查询支付方式失败,请检查保证金账户是否正常"});if(1==t.status)e.pay.html='<span class="txt">账户余额支付</span>',e.pay.pay_kind=0,e.pay.bank_no=0,e.pay.pay_account="",e.pay.full=!0;else{if(4==t.status)return void M();2!=t.status&&3!=t.status||(e.pay.html=l.trustAsHtml('<span class="txt"><em  style="padding-right: 20px;display: inline-block;">余额不足，请充值</em>账户余额支付</span>'),e.pay.pay_kind=0,e.pay.bank_no=0,e.pay.pay_account="")}S()})}function S(){e.buy2.password=null,d.set("BuyCtrl_buy",e.buy),e.buy2Modal.show()}function k(){if(0==e.pay.pay_kind&&!e.pay.full)return"0"==T.prodSource||"2"==T.prodSource?f.showAlert({message:"余额不足，请充值"}):f.showAlert({message:"余额不足，请充值或选择其他支付方式"}),!1;var t=e.buy2.password;return!f.isStrEmpty(t)||(f.showAlert({message:"请输入交易密码"}),!1)}function x(t){e.buy2Modal.hide(),d.remove("SelectPayWayCtrl_pay"),f.isBuyExperience()&&(location.href=localStorage.redirect_url),T.isSuccess=!0,e.success=t;var n=t.income_begin_date,r=t.income_show_date,o=e.cmsProdInfo.prod_setup_date;if(f.isStrEmpty(n)||f.isStrEmpty(r)){if(e.success.type=2,e.success.begin_time=l.trustAsHtml("产品成立当日确认购买份额，开始计算收益"),!f.isStrEmpty(o)&&o.length>=8){var a=new Date(o.substr(0,4),parseFloat(o.substr(4,2))-1,o.substr(6,2));e.success.begin_time=new XDate(a).toString("MM-dd")+" "+O[a.getDay()]}}else{e.success.type=1;var i=new Date(n.substr(0,4),parseFloat(n.substr(4,2))-1,n.substr(6,2));e.success.income_begin_time=new XDate(i).toString("MM-dd")+" "+O[i.getDay()];var c=new Date(r.substr(0,4),parseFloat(r.substr(4,2))-1,r.substr(6,2));e.success.income_show_time=new XDate(c).toString("MM-dd")+" "+O[c.getDay()]}"otcfdsy"==e.cmsProdInfo.prod_catalog_mark&&h.getChannelPaper(T.prodCode,e.buy.entrust_balance).then(function(e){e&&e.paper_id&&e.remaining_number>0&&$(e.paper_id,T.prodCode)},function(e){})}function $(e,t){o.confirm({cssClass:"kDialog",template:"您已完成购买，请关注“天风证券小财迷”微信公众号，填写体验问卷，参与抽奖活动，即有机会赢取1000元现金大奖！",buttons:[{text:"我知道了"}]})}function A(e){var t=e?0==e?"购买金额需≥0.01元":"购买金额需≥"+e+"元":"";return t}function I(t,n){var r="";return t&&(r=A("1"==n?"4"==t.prod_status?t.prod_allot_share:t.prod_allot_subscribe:"4"==e.cmsProdInfo.prod_status?t.prod_min_share:t.prod_min_subscribe)),r}function D(e,t){var n=0;if(0==e||1==e)switch(t){case"0":n=0;break;case"1":n=1;break;case"2":case"3":n=2;break;case"4":n=3;break;case"5":case"6":n=4;break;default:n=0}else switch(t){case"0":n=0;break;case"1":case"2":n=1;break;case"3":n=2;break;case"4":case"5":n=4;break;default:n=0}return n}var T=e.param={};e.$on("$ionicView.beforeEnter",function(){T.prodCode=n.prodCode,T.prodSource=n.prodSource,T.add=n.add,T.autographShow=!1,g()});var P=function(t,n,r){p.getFundGeneral(t).then(function(o){o?(e.cmsProdInfo=o,"0,1,2,3,4".indexOf(e.cmsProdInfo.prod_profit_mode)<0&&f.showConfig({message:"产品收益模式未配置:"+e.cmsProdInfo.prod_code}),r(t,n,j)):(a.hide(),f.showAlert({message:"未获取到产品信息"}))})},F=function(t,n,r){h.queryIFSProdInfo(t,n).then(function(t){1==t.length?(e.ifsProdInfo=t[0],e.buy.entrust_balance_placeholder=I(e.cmsProdInfo,T.add),r(),"0"==n||"1"==n?T.prodRiskLevel=D(n,e.ifsProdInfo.prodrisk_level):"2"==n&&(T.prodRiskLevel=D(n,e.ifsProdInfo.ofund_risklevel))):(a.hide(),f.showAlert({message:"基金信息查询失败"}))})},B=function(){var t="";"0"==T.prodSource||"1"==T.prodSource?t=e.ifsProdInfo.prodta_no:"2"==T.prodSource&&(t=e.ifsProdInfo.fund_company),h.isTAOpen(T.prodSource,t).then(function(e){T.ta_open=e.ta_open})},j=function(){p.getProdFiles(e.cmsProdInfo.prod_id).then(function(t){t&&t.length>0&&(e.agreementList=t,C()),B()}),a.hide()};e.entrustBalanceBlur=function(){var t=parseFloat(e.buy.entrust_balance);isNaN(t)&&e.cmsProdInfo&&e.cmsProdInfo.prod_code&&(e.buy.entrust_balance_placeholder=I(e.cmsProdInfo,T.add))},e.next=function(){U()&&w()},e.toAgreeContent=function(e,t){ionic.Platform.isAndroid()&&"undefined"!=typeof tfPdfView?tfPdfView.show({filePath:e,fileName:t},function(e){}):ionic.Platform.isIOS()&&"undefined"!=typeof tf&&tf.otherService.openWebPage({pageUrl:e,fileName:t},function(e){})};var U=function(){if(T.autographShow)return o.show({cssClass:"kDialog",template:"您尚未签署电子签名约定书，需要先签署电子签名约定书，才能签署协议！",title:"提示",buttons:[{text:"取消"},{text:"立即签署",onTap:function(e){r.go("autograph")}}]}),!1;if(e.buy.risk_confirm_flag=!1,parseFloat(e.user.corp_risk_level)<parseFloat(T.prodRiskLevel)){if(!e.buy.checkRisk){var t="您购买的理财产品风险等级超出了您的承受等级，若继续购买请勾选“同意购买的基金风险等级高于风险承受等级”！";return"1"==e.cmsProdInfo.is_entrust&&(t="您购买的理财产品风险等级超出了您的承受等级，按照监管要求，您将不能购买此产品！若您的资产状况已改善，可以重新进行风险评测！"),o.show({cssClass:"kDialog",template:t,title:"提示",buttons:[{text:"我知道了"}]}),!1}e.buy.risk_confirm_flag=!0}if(!T.isOpen&&!e.buy.checkOpen)return o.show({cssClass:"kDialog",template:"请勾选同意开通该机构TA账户",title:"提示",buttons:[{text:"我知道了"}]}),!1;if(!e.buy.checkProtocol&&e.agreementList)return o.show({cssClass:"kDialog",template:"您尚未同意签署相关协议，若继续购买请阅读并勾选“我同意并签署以下协议”！",title:"提示",buttons:[{text:"我知道了"}]}),!1;if(isNaN(parseFloat(e.buy.entrust_balance)))return f.showAlert({message:"请正确输入购买金额！"}),!1;f.checkRegex("^[0-9]+(.[0-9]{1,2})?$",e.buy.entrust_balance)||(e.buy.entrust_balance=parseFloat(e.buy.entrust_balance.toFixed(2)));var n=e.buy.entrust_balance;if(0==n)return f.showAlert({message:"输入金额必须大于零"}),!1;var a=e.ifsProdInfo;if(a){if("1"==T.add){if(n<parseFloat("4"==e.cmsProdInfo.prod_status?e.cmsProdInfo.allot_limitshare:e.cmsProdInfo.prod_allot_subscribe))return f.showAlert({message:"输入金额应大于或等于最低追加金额"}),!1}else if(n<parseFloat("4"==e.cmsProdInfo.prod_status?e.cmsProdInfo.prod_min_share:e.cmsProdInfo.prod_min_subscribe))return f.showAlert({message:"输入金额应大于或等于最低购买金额"}),!1;if("otcfdsy"==e.cmsProdInfo.prod_catalog_mark&&n%1e4!=0)return f.showAlert({message:"输入金额须为10000元的整数倍"}),!1}return!0};e.closeModal=function(){s.closeDigitalKeyboard(),e.buy2Modal.hide()},e.$on("$destroy",function(){e.buy2Modal.remove()}),e.$on("modal.hidden",function(){s.closeDigitalKeyboard()}),e.selectOtherPayWay=function(){return("2"!=T.prodSource||"1"!=e.pay.payAccountStatus&&"3"!=e.pay.payAccountStatus)&&(d.set("BuyCtrl_pay",e.pay),d.set("BuyCtrl_quickBankData",e.quickBankData),e.buy2Modal.hide(),void r.go("selectPayWay"))},e.goRecharge=function(){d.set("BuyCtrl_pay",e.pay),d.set("BuyCtrl_quickBankData",e.quickBankData),e.buy2Modal.hide(),r.go("recharge-and-withdraw")};var M=function(){o.show({cssClass:"kDialog",template:"您还未开通保证金账户，请绑定三方存管银行卡以开通保证金账户！",title:"提示",buttons:[{text:"取消",onTap:function(e){i.goBack()}},{text:"<b>立即绑定</b>",type:"button-positive",onTap:function(e){r.go("tab.account-bank")}}]})},R=function(e){var t="绑定存管银行未确认",n="抱歉，您的三方存管已在受理中，请等待确认后再购买。";"1"==e&&(t="绑定存管银行未激活",n="抱歉，您的三方存管尚未激活，请激活后再购买。"),o.show({cssClass:"kDialog",template:'<h5 class="popup-sub-title">'+n+"</h5>",title:t,buttons:[{text:"确定",onTap:function(e){i.goBack()}}]})};e.submitBuy=function(){if(k()){a.show("正在提交购买请求");var t=null;"0"==T.prodSource?t=h.buyBankProduct(e.ifsProdInfo.prod_code,e.buy2.password,e.buy.entrust_balance,e.pay.pay_kind,e.pay.bank_no,e.pay.pay_account,e.ifsProdInfo.prodta_no,e.cmsProdInfo.prod_name,e.cmsProdInfo.prod_setup_date,e.buy.risk_confirm_flag):"1"==T.prodSource?t=h.buyDjProduct(e.ifsProdInfo.prod_code,e.buy2.password,e.buy.entrust_balance,e.pay.pay_kind,e.pay.bank_no,e.pay.pay_account,e.ifsProdInfo.prodta_no,e.cmsProdInfo.prod_name,e.cmsProdInfo.prod_setup_date,e.buy.risk_confirm_flag):"2"==T.prodSource&&(t=h.buyUfProduct(e.ifsProdInfo.fund_code,e.ifsProdInfo.fund_company,e.buy2.password,e.buy.entrust_balance,e.ifsProdInfo.charge_type,e.cmsProdInfo.prod_name,e.cmsProdInfo.prod_setup_date,e.buy.risk_confirm_flag)),t.then(function(e){a.hide(),x(e)},function(e){a.hide(),"XCM-300001"==e.error_no?f.showNotice(e.error_info):"XCM-100001"==e.error_no||e.error_no.indexOf("160073")>-1?f.showAlert({message:e.error_info}):f.showConfig({message:e.error_info})})}};var O=m.getWeeks()}return e.$inject=["$scope","$timeout","$stateParams","$state","$ionicPopup","$ionicLoading","$ionicHistory","$ionicModal","$rootScope","$sce","$q","LocalCacheService","CommonService","InfoService","DictionaryService","WebService"],e}),define("controllers/trade/AgreementListCtrl",[],function(){"use strict";function e(e,t,n,r,o,a){function i(){e.prod_id&&e.prod_id.length>0?(e.type=1,r.getProdFiles(e.prod_id).then(function(t){t&&t.length>0&&(e.agreementList=t)})):(e.type=2,o.getEncontractList(e.econtract_type).then(function(t){t&&t.length>0&&(e.agreementList=t)}))}e.prod_id=t.prod_id,e.econtract_type=t.econtract_type,e.$on("$ionicView.loaded",function(){i()}),e.closeAgreementList=function(){n.goBack()}}return e.$inject=["$scope","$stateParams","$ionicHistory","InfoService","WebService","CommonService"],e}),define("controllers/trade/AgreementCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c){function s(){e.econtract_id&&e.econtract_id.length>0?c.getEncontract(e.econtract_id).then(function(t){var n=t.econtract_content;t.econtract_content=null,e.agreement=t,e.agreement.file_name=e.agreement.econtract_name,l(n)}):i.getProdFileContent(e.id).then(function(t){var n=t.file_content;t.file_content=null,e.agreement=t,l(n)})}function l(e){r.show(),o(function(){var t=angular.element(document.querySelector("#file_content"));t.html(e),r.hide()},600)}e.id=t.id,e.econtract_id=t.econtract_id,e.$on("$ionicView.loaded",function(){s()}),e.closeAgreementContent=function(){var t=a.get("agreeAgreements");t||(t=""),t.indexOf(e.id)==-1&&(t+=","+e.id),a.set("agreeAgreements",t),n.goBack()}}return e.$inject=["$scope","$stateParams","$ionicHistory","$ionicLoading","$timeout","LocalCacheService","InfoService","WebService"],e}),define("controllers/trade/AutographCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c,s){function l(){c.getEncontract(e.id).then(function(n){e.fund=n,e.fund.econtract_content=t.trustAsHtml(n.econtract_content)})}function u(){return!!e.fund.isChecked||(s.show({cssClass:"kDialog",template:"您尚未勾选同意电子签名约定书内容，若继续签署请阅读并勾选“我已阅读并同意以上内容”！",title:"提示",buttons:[{text:"我知道了"}]}),!1)}e.fund={};e.$on("$ionicView.loaded",function(){e.id="1104",l()}),e.closeAgreementContent=function(){u()&&c.openElectronic().then(function(e){e?s.show({cssClass:"kDialog",template:"签署电子签名约定书成功！以后您将可直接签署协议！",title:"提示",buttons:[{text:"继续购买",onTap:function(e){n.goBack()}}]}):s.show({cssClass:"kDialog",template:"签约失败，请稍后再试！",title:"提示",buttons:[{text:"我知道了"}]})})}}return e.$inject=["$scope","$sce","$ionicHistory","$ionicLoading","$timeout","LocalCacheService","InfoService","WebService","$ionicPopup"],e}),define("controllers/trade/SelectPayWayCtrl",[],function(){"use strict";function e(e,t,n,r){function o(){e.pay=n.get("BuyCtrl_pay"),e.quickBankData=n.get("BuyCtrl_quickBankData"),e.selectPayWay=1==e.pay.pay_kind?e.pay.pay_kind+"_"+e.pay.pay_account:e.pay.pay_kind;var o=t.forwardView();o&&("recharge-and-withdraw"==o.stateName?r.queryBalance().then(function(t){var r=t.fetch_balance,o=n.get("BuyCtrl_buy");parseFloat(r)>=o.entrust_balance&&(e.pay.payAccountStatus=1)}):"tab.account-bindQuickBank"==o.stateName&&r.getUserQuickBankCards().then(function(t){var r=t;n.set("BuyCtrl_quickBankData",r),e.quickBankData=t}))}e.$on("$ionicView.beforeEnter",function(){o()}),e.changPayWay=function(r){var o={};0==r?(o.pay_kind=0,o.bank_no=0,o.pay_account="",o.html='<span class="txt">保证金账户余额支付</span>',o.full=!0):(o.pay_kind=1,o.bank_no=r.bank_no,o.pay_account=r.bank_account,o.html='<span class="title">快捷支付</span><span class="txt_m">'+r.bank_name+" 尾号"+r.bank_account.substring(r.bank_account.length-3)+"</span>"),o.payAccountStatus=e.pay.payAccountStatus,n.set("SelectPayWayCtrl_pay",o),t.goBack()}}return e.$inject=["$scope","$ionicHistory","LocalCacheService","WebService"],e}),define("controllers/trade/SellCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c,s,l,u){function d(){if(v.isSuccess=!1,v.prodName="",e.sell={},e.sell.placeholder="请输入卖出份额",e.pay={},e.short_fund={},i.isStrEmpty(v.prodCode)||i.isStrEmpty(v.prodSource)){var n=i.showConfig({message:"未选择任何产品"});t(function(){n.close(),a.goBack()},3e3)}f(),h()}function f(){l.getShares(v.prodSource,v.allotNo,v.prodCode).then(function(n){n&&1==n.length?(e.holdFund=n[0],"1"==v.prodSource?v.prodName=e.holdFund.prod_name:v.prodName=e.holdFund.fund_name,"1"==v.prodSource?m():e.pay.bank_name="您的保证金账户",p()):i.showAlert({message:"持仓信息查询失败",onUnblock:function(){t(function(){a.goBack()},3e3)}})})}function p(){s.getShortTermFund(v.prodCode,e.holdFund.trans_account).then(function(t){var n="";t&&0!=t.length?(e.short_fund=t[0],n=parseFloat(e.short_fund.availablevol),l.getOrders(v.prodSource,v.prodCode,e.holdFund.trans_account).then(function(t){if(t&&t.length>0){if("1"==v.prodSource)for(var r=0;r<t.length;r++){var o=t[r];n-=parseFloat(o.entrust_amount)}if("2"==v.prodSource)for(var r=0;r<t.length;r++){var o=t[r];n-=parseFloat(o.shares)}}e.sell.placeholder="≤"+i.controlNum(n,2),e.sell.allShare=Number(i.controlNum(n,2))})):(n=e.holdFund.enable_amount,e.sell.placeholder="≤"+i.controlNum(n,2),e.sell.allShare=Number(i.controlNum(n,2)))})}function m(){l.getBankByTransAccount(e.holdFund.trans_account).then(function(t){i.isStrEmpty(t.bank_no)?e.pay.bank_name="您的保证金账户":(e.pay.bank_no=t.bank_no,e.pay.bank_name=t.bank_name,e.pay.pay_account=t.pay_account)})}function h(){l.queryIFSProdInfo(v.prodCode,v.prodSource).then(function(t){t&&1==t.length?e.ifsProdInfo=t[0]:i.showAlert({message:"未查到产品信息"})})}function g(){o.show();var t=e.sell.amount,n=null;"1"==v.prodSource?n=l.redeemDjProduct(v.prodCode,e.holdFund.prodta_no,t,v.allotNo,e.holdFund.prod_name,e.pay.bank_name,e.pay.pay_account):"2"==v.prodSource&&(n=l.redeemUfProduct(v.prodCode,e.holdFund.fund_company,t,e.holdFund.fund_name)),n.then(function(t){if(t){e.sell2Popup.close();var n=t.redeem_complete_date;i.isStrEmpty(e.pay.pay_account)||(n=t.redeem_success_date);var r="--";if(!i.isStrEmpty(n)&&8==n.length){var a=new Date(n.substr(0,4),parseFloat(n.substr(4,2))-1,n.substr(6,2));r=new XDate(a).toString("MM-dd")+" "+b[a.getDay()]}e.sell.redeem_show_date=r,v.isSuccess=!0,o.hide()}},function(e){"XCM-300001"==e.error_no?i.showNotice(e.error_info):"XCM-100002"==e.error_no?i.showAlert({message:e.error_info}):i.showConfig({message:e.error_info})})}function _(){if(null==e.holdFund||null==e.ifsProdInfo)return i.showAlert({message:"未查到卖出基金信息"}),!1;var t=e.sell.amount;if(i.isStrEmpty(t)||isNaN(t))return i.showAlert({message:"请输入有效数据！"}),!1;if(!i.checkRegex("^[0-9]+(.[0-9]{1,2})?$",t))return i.showAlert({message:"卖出份额只能精确到小数点后1到2位！"}),!1;if(t=Number(t),t<=0)return i.showAlert({message:"卖出份额应大于0"}),$("#amount").val(""),!1;var n=e.sell.allShare;if(t>n)return i.showAlert({message:"卖出份额应小于等于"+n}),e.sell.amount=0,!1;if(t==n)return!0;if(t<e.ifsProdInfo.redeem_limitshare)return i.showAlert({message:"卖出份额应大于等于"+e.ifsProdInfo.redeem_limitshare+"或选择全部卖出"}),e.sell.amount=0,!1;var r=0;return null!=e.short_fund&&(r=1e3),i.isStrEmpty(e.ifsProdInfo.hold_minshare)||(r=Number(e.ifsProdInfo.hold_minshare)),!(n!=t&&n-t<r)||(n>1e3?i.showAlert({message:"卖出后的当期剩余份额不可低于"+r+"份，请选择全部卖出或者减少卖出份额。"}):i.showAlert({message:"卖出后的当期剩余份额不可低于"+r+"份，请选择全部卖出。"}),!1)}var v=e.param={};e.$on("$ionicView.beforeEnter",function(){v.allotNo=n.allotNo,v.prodCode=n.prodCode,v.prodSource=n.prodSource,d()}),e.sellClick=function(){_()&&(e.sell2={},e.sell2Popup||(e.sell2Popup=r.show({template:'<div class="kDlgCell"><p>卖出品种：</p><div>'+v.prodName+'</div></div><div class="kDlgCell"><p>卖出份额：</p><div><em style="color:#eb6c35" >'+u("defNumber")(e.sell.amount,2)+"</em>份</div></div>",title:"确认卖出信息",scope:e,cssClass:"kDialog",buttons:[{text:"取消"},{text:"<b>确定</b>",type:"button-positive",onTap:function(e){e.preventDefault(),g()}}]}),e.sell2Popup.then(function(t){e.sell2Popup=null})))};var b=c.getWeeks()}return e.$inject=["$scope","$timeout","$stateParams","$ionicPopup","$ionicLoading","$ionicHistory","CommonService","DictionaryService","InfoService","WebService","$filter"],e}),define("controllers/promo/UeRewardCtrl",[],function(){"use strict";function e(e,t,n,r){function o(){r.channelStep("date").then(function(e){if(e&&e.length>0){var t=e[0];a.beginDate=new Date(Number(t.beginDate)),a.endDate=new Date(Number(t.endDate))}})}var a=e.param=new Array;e.$on("$ionicView.beforeEnter",function(){a.theme_id=t.id,o()}),e.doRefresh=function(){o(),e.$broadcast("scroll.refreshComplete")},e.onBackKeyDown=function(){n.go("tab.index")}}return e.$inject=["$scope","$stateParams","$state","WebService"],e}),define("controllers/promo/SubjectCtrl",[],function(){"use strict";function e(e,t,n,r,o){function a(){r.getThemeDetail(i.theme_mark).then(function(t){t&&t.relate_type&&(e.info=t,r.getProdByTheme(i.theme_mark,t.relate_type,t.order_rule).then(function(t){if(t){i=t;for(var r=0;r<i.length;r++){var a=i[r];a.prod_min_subscribe=n("prodMinSubscribe")(o.getMinAmount(a)),e.funds.push(a)}}}))})}e.channel={};var i=e.funds=new Array;e.$on("$ionicView.beforeEnter",function(){e.sub=t.sub,i.theme_mark=t.id,a()}),e.doRefresh=function(){a(),e.$broadcast("scroll.refreshComplete")}}return e.$inject=["$scope","$stateParams","$filter","InfoService","CommonService"],e}),define("controllers/promo/PastSubjectCtrl",[],function(){"use strict";function e(e,t){function n(){t.wtAd("xcm_history").then(function(t){e.subjectData=t})}e.subjectData=new Array,e.$on("$ionicView.loaded",function(){n()}),e.doRefresh=function(){n(),e.$broadcast("scroll.refreshComplete")},e.accessRecord=function(e){"undefined"!=typeof Messenger&&Messenger.sendMsg("ym_event",{eventID:"ls"+(1+e)},null,null)}}return e.$inject=["$scope","WebService"],e}),define("controllers/promo/OtcCtrl",[],function(){"use strict";function e(e,t,n,r,o,a,i,c){function s(){i.getThemeDetail(l.theme_mark).then(function(t){t&&t.relate_type&&(t.theme_desc&&(t.theme_desc=o.trustAsHtml(t.theme_desc)),e.info=t,i.getOtcProductsByChannelId(e.info.xcm_type).then(function(t){if(t&&t.length>0)for(var n=0;n<t.length;n++){var r=t[n];if(r.prod_min_subscribe=a("prodMinSubscribe")(r.prod_min_subscribe),"0"==r.otc_status){var o=c.stringToDate(r.ipo_begin_date).getTime()-(new Date).getTime();r.begin_date_show=Math.round(o/864e5)}r.sellStatus=c.getOtcSellStatus(r.prod_status,r.otc_status),r.ipo_begin_date_show=c.stringToDate(r.ipo_begin_date),r.prod_name_short=r.prod_name&&r.prod_name.indexOf("(")!=-1?r.prod_name.split("(")[0]:r.prod_name}e.funds=t}))})}var l=e.param=new Array;e.$on("$ionicView.beforeEnter",function(){l.theme_mark=n.id,s()}),e.doRefresh=function(){s(),e.$broadcast("scroll.refreshComplete")},e.expand=function(){t(function(){r.resize(),r.scrollBottom(!0)},100)}}return e.$inject=["$scope","$timeout","$stateParams","$ionicScrollDelegate","$sce","$filter","InfoService","CommonService"],e}),define("controllers/promo/WxQuestionCtrl",[],function(){"use strict";function e(e,t,n,r,o){function a(){if(!e.wx.q1)return n.showAlert({message:"请选择问题1"}),!1;if(!e.wx.q2)return n.showAlert({message:"请选择问题2"}),!1;if(n.isStrEmpty(e.wx.client_name))return n.showAlert({message:"请填写客户姓名"}),!1;var t=e.wx.client_id;if(n.isStrEmpty(t))return n.showAlert({message:"请填写客户号"}),!1;var r=e.wx.client_mobile;if(n.isStrEmpty(r))return n.showAlert({message:"请填写开户手机号"}),!1;if(!n.checkRegex("^1[0-9][0-9]\\d{8}$",r))return n.showAlert({message:"开户手机号格式错误"}),!1;if(n.isStrEmpty(e.wx.recommend_name))return n.showAlert({message:"请填写推荐人姓名"}),!1;var o=e.wx.recommend_id;if(n.isStrEmpty(o))return n.showAlert({message:"请填写推荐人客户号"}),!1;var a=e.wx.recommend_mobile;return n.isStrEmpty(a)?(n.showAlert({message:"请填写推荐人手机号"}),!1):n.checkRegex("^1[0-9][0-9]\\d{8}$",a)?t==o?(n.showAlert({message:"推荐人客户号不能与开户客户号相同"}),!1):r!=a||(n.showAlert({message:"推荐人手机号不能与开户手机号相同!"}),!1):(n.showAlert({message:"推荐人手机号格式错误"}),!1)}e.wx={},e.wx.isSuccess=!1,e.submitPaper=function(){if(a()){t.show();var n=e.wx.q1,i=e.wx.q2,c=e.wx.client_name+"^"+e.wx.client_id+"^"+e.wx.client_mobile,s=e.wx.recommend_name+"^"+e.wx.recommend_id+"^"+e.wx.recommend_mobile,l="1&"+n+"|2&"+i+"|3&"+c+"|4&"+s;o.submitChannelRiskPaper({client_id:e.wx.client_id,source:"weixin",conduit_no:"weixin",answer_content:l,paper_id:"230"}).then(function(n){t.hide(),e.wx.isSuccess=!0,r.scrollTop()})}}}return e.$inject=["$scope","$ionicLoading","CommonService","$ionicScrollDelegate","WebService"],e}),define("controllers/promo/ThemeCtrl",[],function(){"use strict";function e(e,t,n,r,o){function a(){n.getThemeDetail(c.theme_mark).then(function(o){o&&o.relate_type&&(e.funds=new Array,n.getProdByTheme(c.theme_mark,o.relate_type,o.order_rule).then(function(n){if(n){i=n;for(var o=0;o<i.length;o++){var a=i[o];a.prod_min_subscribe=t("prodMinSubscribe")(r.getMinAmount(a)),e.funds.push(a)}}}))})}e.theme={};var i=e.funds=new Array,c=e.param=new Array;e.$on("$ionicView.beforeEnter",function(){c.theme_mark=o.id,a()}),e.doRefresh=function(){a(),e.$broadcast("scroll.refreshComplete")}}return e.$inject=["$scope","$filter","InfoService","CommonService","$stateParams"],e}),define("controllers/promo/TermThemeCtrl",[],function(){"use strict";function e(e,t,n,r,o){function a(){e.funds=new Array,i()}function i(){e.term.channel.split(",");n.getThemeDetail(c.theme_mark).then(function(o){o&&o.relate_type&&(e.funds=new Array,n.getProdByTheme(c.theme_mark,o.relate_type,o.order_rule).then(function(n){if(n)for(var o=0;o<n.length;o++){var a=n[o];a.prod_min_subscribe=t("prodMinSubscribe")(r.getMinAmount(a)),e.funds.push(a)}}))})}e.term={};var c=(e.funds=new Array,e.param=new Array);e.$on("$ionicView.beforeEnter",function(){c.theme_mark=o.id,a()}),e.doRefresh=function(){a(),e.$broadcast("scroll.refreshComplete")}}return e.$inject=["$scope","$filter","InfoService","CommonService","$stateParams"],e}),define("controllers/promo/BankThemeCtrl",[],function(){"use strict";function e(e,t,n,r,o){function a(){i()}function i(){e.term.channel.split(",");n.getThemeDetail(s.theme_mark).then(function(r){r&&r.relate_type&&(e.funds=new Array,n.getProdByTheme(s.theme_mark,r.relate_type,r.order_rule).then(function(n){if(n){n=c(n);for(var r=0;r<n.length;r++){var a=n[r];a.prod_min_subscribe=t("prodMinSubscribe")(o.getMinAmount(a)),e.funds.push(a)}}}))})}function c(e){e=e.sort(function(e,t){return parseFloat(e.prodDuration)>parseFloat(t.prodDuration)?-1:1});for(var t=0;t<e.length;t++)0==t?e[t].recommend_reason="存钱买房，要求收益安全、稳健？":1==t?e[t].recommend_reason="近半年都不需用，追求安全、省心、方便？":2==t?e[t].recommend_reason="今年市场琢磨不定，想观望一段时间再做定夺？":3==t?e[t].recommend_reason="年终奖到手，待春节后再做打算？":4==t?e[t].recommend_reason="闲钱短期不用，或逃离股市暂时避险？":e[t].recommend_reason="";return e=e.sort(function(e,t){return parseFloat(e.prod_profit_rate)>parseFloat(t.prod_profit_rate)?-1:1})}e.term={};var s=(e.funds=new Array,e.param=new Array);e.$on("$ionicView.beforeEnter",function(){s.theme_mark=r.id,a()}),e.doRefresh=function(){a(),e.$broadcast("scroll.refreshComplete")}}return e.$inject=["$scope","$filter","InfoService","$stateParams","CommonService"],e}),define("controllers/promo/RewardCtrl",[],function(){"use strict";function e(e,t,n,r,o){var a=n.getUser();a&&(e.user=a),e.next=function(){e.user?o.openActChannelInfo().then(function(e){e&&e.paper_id?e.remaining_number>0?t.go("tab.product-index"):r.showAlert({message:"您已参加过该活动，谢谢您的参与"}):r.showAlert({message:"抱歉，本活动仅限于活动期间初次开户客户，且每个客户只能参加一次。"})},function(e){r.showAlert({message:"抱歉，本活动仅限于活动期间初次开户客户，且每个客户只能参加一次。"
})}):t.go("open-prepare")}}return e.$inject=["$scope","$state","LocalCacheService","CommonService","WebService"],e}),define("controllers/promo/PreviewCtrl",[],function(){"use strict";function e(e,t){function n(){t.wtAd("xcm_preview").then(function(t){e.ad=t&&t.length>0?t[0]:null})}e.$on("$ionicView.loaded",function(){n()})}return e.$inject=["$scope","WebService"],e}),define("controllers/us/IndexCtrl",[],function(){"use strict";function e(e){function t(){"undefined"!=typeof Messenger&&Messenger.request("shellVersion",n,null)}function n(t){e.version=t.version}e.$on("$ionicView.beforeEnter",function(){t()})}return e.$inject=["$scope","WebService","CommonService"],e}),define("controllers/us/FeedbackCtrl",[],function(){"use strict";function e(e,t,n,r,o){function a(){e.feedback={},e.feedback.disable=!0}e.$on("$ionicView.beforeEnter",function(){a()}),e.$watch("feedback.content",function(t,n){t&&t.length>0?e.feedback.disable=!1:e.feedback.disable=!0}),e.add=function(){var a=e.feedback.content;if(o.isStrEmpty(a))return o.showAlert({message:"请填写反馈内容！"}),!1;var i=e.feedback.mobile_tel;return i=o.trim(i),i&&!o.checkRegex("^1[0-9][0-9]\\d{8}$",o.trim(i))?(o.showAlert({message:"手机号格式错误！"}),!1):void n.confirm({cssClass:"kDialog",template:"是否确定发送反馈信息？",okText:"确定",cancelText:"返回修改"}).then(function(n){n&&(e.feedback.disable=!0,r.wtAddClientOpinion(a,e.feedback.mobile_tel).then(function(e){t.goBack(),o.showAlert({message:"感谢您的反馈！"})})["finally"](function(){e.feedback.disable=!1}))})}}return e.$inject=["$scope","$ionicHistory","$ionicPopup","WebService","CommonService"],e}),define("controllers/controllers",["require","exports","module","angular","services/services","config","controllers/IndexCtrl","controllers/LoginCtrl","controllers/product/ItemCtrl","controllers/product/DetailCtrl","controllers/product/ItemOtcCtrl","controllers/product/ItemOtcFloatCtrl","controllers/product/DetailOtcCtrl","controllers/product/ItemQDIICtrl","controllers/product/CurrentTermCtrl","controllers/product/MoreCtrl","controllers/product/StarTermCtrl","controllers/product/ShortTermCtrl","controllers/product/TFTermCtrl","controllers/product/LongTermCtrl","controllers/product/GoldTermCtrl","controllers/product/QDIITermCtrl","controllers/product/IndexTermCtrl","controllers/product/StockTermCtrl","controllers/product/SearchCtrl","controllers/product/FundTermCtrl","controllers/product/RateCtrl","controllers/help/IndexCtrl","controllers/help/ItemCtrl","controllers/help/ListCtrl","controllers/open/PrepareCtrl","controllers/open/MsgVerifyCtrl","controllers/open/SelectBranchCtrl","controllers/open/UploadIDCtrl","controllers/open/PersonInfoCtrl","controllers/open/InstallCertCtrl","controllers/open/RiskAssessCtrl","controllers/open/SetPwdCtrl","controllers/open/SignAgreementCtrl","controllers/open/RevisitPaperCtrl","controllers/open/OpenResultCtrl","controllers/open/ChannelRiskCtrl","controllers/open/BindDepositBankCtrl","controllers/open/BindQuickBankCtrl","controllers/open/FillCustomerInfoCtrl","controllers/account/ConcernCtrl","controllers/account/IndexCtrl","controllers/account/AssetsIndexCtrl","controllers/account/ManagerCtrl","controllers/account/OpenTACtrl","controllers/account/OpenAccountCtrl","controllers/account/OpenAccountIdCtrl","controllers/account/OpenAccountVideoCtrl","controllers/account/TransAccountCtrl","controllers/account/AgreementListCtrl","controllers/account/AgreementCtrl","controllers/account/EntrepreneurshipCtrl","controllers/account/SaleDepartmentCtrl","controllers/account/SignCtrl","controllers/account/RelationshipCtrl","controllers/account/DegreeCtrl","controllers/account/ProfessionCtrl","controllers/account/PhoneModifyCtrl","controllers/account/ModifyPhoneFirstCtrl","controllers/account/ModifyPhoneLastCtrl","controllers/account/ResetPhoneFirstCtrl","controllers/account/ResetPhoneSecondCtrl","controllers/account/ResetPhoneThirdCtrl","controllers/account/PostCodeCtrl","controllers/account/AddressCtrl","controllers/account/IdentificationCtrl","controllers/account/ChangeIdCtrl","controllers/account/IdCheckCtrl","controllers/account/UserInfoVideoCtrl","controllers/account/ModifyPwdCtrl","controllers/account/RiskCtrl","controllers/account/RiskEvalCtrl","controllers/account/BankCtrl","controllers/account/UnbindBankCtrl","controllers/account/SharesCtrl","controllers/account/OrdersCtrl","controllers/account/OrderProdHistoryCtrl","controllers/account/ShareDetailCtrl","controllers/account/ShareDetailShortCtrl","controllers/account/ShareDetailBankCtrl","controllers/account/ShareDetailGatherCtrl","controllers/account/ShareDetailQDIICtrl","controllers/account/OrderDetailCtrl","controllers/account/RechargeCtrl","controllers/account/QueryBalanceCtrl","controllers/account/WithdrawCtrl","controllers/account/TransferDetailsCtrl","controllers/account/RechargeAndWithdrawCtrl","controllers/trade/BuyCtrl","controllers/trade/AgreementListCtrl","controllers/trade/AgreementCtrl","controllers/trade/AutographCtrl","controllers/trade/SelectPayWayCtrl","controllers/trade/SellCtrl","controllers/promo/UeRewardCtrl","controllers/promo/SubjectCtrl","controllers/promo/PastSubjectCtrl","controllers/promo/OtcCtrl","controllers/promo/WxQuestionCtrl","controllers/promo/ThemeCtrl","controllers/promo/TermThemeCtrl","controllers/promo/BankThemeCtrl","controllers/promo/RewardCtrl","controllers/promo/PreviewCtrl","controllers/us/IndexCtrl","controllers/us/FeedbackCtrl"],function(e,t,n){"use strict";var r=e("angular"),o=(e("services/services"),e("config"),r.module("app.controllers",["app.services","app.config"]));return o.controller("IndexCtrl",e("controllers/IndexCtrl")),o.controller("LoginCtrl",e("controllers/LoginCtrl")),o.controller("product_ItemCtrl",e("controllers/product/ItemCtrl")),o.controller("product_DetailCtrl",e("controllers/product/DetailCtrl")),o.controller("product_ItemOtcCtrl",e("controllers/product/ItemOtcCtrl")),o.controller("product_ItemOtcFloatCtrl",e("controllers/product/ItemOtcFloatCtrl")),o.controller("product_DetailOtcCtrl",e("controllers/product/DetailOtcCtrl")),o.controller("product_ItemQDIICtrl",e("controllers/product/ItemQDIICtrl")),o.controller("product_CurrentTermCtrl",e("controllers/product/CurrentTermCtrl")),o.controller("product_MoreCtrl",e("controllers/product/MoreCtrl")),o.controller("product_StarTermCtrl",e("controllers/product/StarTermCtrl")),o.controller("product_ShortTermCtrl",e("controllers/product/ShortTermCtrl")),o.controller("product_TFTermCtrl",e("controllers/product/TFTermCtrl")),o.controller("product_LongTermCtrl",e("controllers/product/LongTermCtrl")),o.controller("product_GoldTermCtrl",e("controllers/product/GoldTermCtrl")),o.controller("product_QDIITermCtrl",e("controllers/product/QDIITermCtrl")),o.controller("product_IndexTermCtrl",e("controllers/product/IndexTermCtrl")),o.controller("product_StockTermCtrl",e("controllers/product/StockTermCtrl")),o.controller("product_SearchCtrl",e("controllers/product/SearchCtrl")),o.controller("product_FundTermCtrl",e("controllers/product/FundTermCtrl")),o.controller("product_RateCtrl",e("controllers/product/RateCtrl")),o.controller("help_IndexCtrl",e("controllers/help/IndexCtrl")),o.controller("help_ItemCtrl",e("controllers/help/ItemCtrl")),o.controller("help_ListCtrl",e("controllers/help/ListCtrl")),o.controller("open_PrepareCtrl",e("controllers/open/PrepareCtrl")),o.controller("open_MsgVerifyCtrl",e("controllers/open/MsgVerifyCtrl")),o.controller("open_SelectBranchCtrl",e("controllers/open/SelectBranchCtrl")),o.controller("open_UploadIDCtrl",e("controllers/open/UploadIDCtrl")),o.controller("open_PersonInfoCtrl",e("controllers/open/PersonInfoCtrl")),o.controller("open_InstallCertCtrl",e("controllers/open/InstallCertCtrl")),o.controller("open_RiskAssessCtrl",e("controllers/open/RiskAssessCtrl")),o.controller("open_SetPwdCtrl",e("controllers/open/SetPwdCtrl")),o.controller("open_SignAgreementCtrl",e("controllers/open/SignAgreementCtrl")),o.controller("open_RevisitPaperCtrl",e("controllers/open/RevisitPaperCtrl")),o.controller("open_OpenResultCtrl",e("controllers/open/OpenResultCtrl")),o.controller("open_ChannelRiskCtrl",e("controllers/open/ChannelRiskCtrl")),o.controller("open_BindDepositBankCtrl",e("controllers/open/BindDepositBankCtrl")),o.controller("open_BindQuickBankCtrl",e("controllers/open/BindQuickBankCtrl")),o.controller("open_FillCustomerInfoCtrl",e("controllers/open/FillCustomerInfoCtrl")),o.controller("account_ConcernCtrl",e("controllers/account/ConcernCtrl")),o.controller("account_IndexCtrl",e("controllers/account/IndexCtrl")),o.controller("account_AssetsIndexCtrl",e("controllers/account/AssetsIndexCtrl")),o.controller("account_ManagerCtrl",e("controllers/account/ManagerCtrl")),o.controller("account_OpenTACtrl",e("controllers/account/OpenTACtrl")),o.controller("account_OpenAccountCtrl",e("controllers/account/OpenAccountCtrl")),o.controller("account_OpenAccountIdCtrl",e("controllers/account/OpenAccountIdCtrl")),o.controller("account_OpenAccountVideoCtrl",e("controllers/account/OpenAccountVideoCtrl")),o.controller("account_TransAccountCtrl",e("controllers/account/TransAccountCtrl")),o.controller("account_AgreementListCtrl",e("controllers/account/AgreementListCtrl")),o.controller("account_AgreementCtrl",e("controllers/account/AgreementCtrl")),o.controller("account_EntrepreneurshipCtrl",e("controllers/account/EntrepreneurshipCtrl")),o.controller("account_SaleDepartmentCtrl",e("controllers/account/SaleDepartmentCtrl")),o.controller("account_SignCtrl",e("controllers/account/SignCtrl")),o.controller("account_RelationshipCtrl",e("controllers/account/RelationshipCtrl")),o.controller("account_DegreeCtrl",e("controllers/account/DegreeCtrl")),o.controller("account_ProfessionCtrl",e("controllers/account/ProfessionCtrl")),o.controller("account_PhoneModifyCtrl",e("controllers/account/PhoneModifyCtrl")),o.controller("account_ModifyPhoneFirstCtrl",e("controllers/account/ModifyPhoneFirstCtrl")),o.controller("account_ModifyPhoneLastCtrl",e("controllers/account/ModifyPhoneLastCtrl")),o.controller("account_ResetPhoneFirstCtrl",e("controllers/account/ResetPhoneFirstCtrl")),o.controller("account_ResetPhoneSecondCtrl",e("controllers/account/ResetPhoneSecondCtrl")),o.controller("account_ResetPhoneThirdCtrl",e("controllers/account/ResetPhoneThirdCtrl")),o.controller("account_PostCodeCtrl",e("controllers/account/PostCodeCtrl")),o.controller("account_AddressCtrl",e("controllers/account/AddressCtrl")),o.controller("account_IdentificationCtrl",e("controllers/account/IdentificationCtrl")),o.controller("account_ChangeIdCtrl",e("controllers/account/ChangeIdCtrl")),o.controller("account_IdCheckCtrl",e("controllers/account/IdCheckCtrl")),o.controller("account_UserInfoVideoCtrl",e("controllers/account/UserInfoVideoCtrl")),o.controller("account_ModifyPwdCtrl",e("controllers/account/ModifyPwdCtrl")),o.controller("account_RiskCtrl",e("controllers/account/RiskCtrl")),o.controller("account_RiskEvalCtrl",e("controllers/account/RiskEvalCtrl")),o.controller("account_BankCtrl",e("controllers/account/BankCtrl")),o.controller("account_UnbindBankCtrl",e("controllers/account/UnbindBankCtrl")),o.controller("account_SharesCtrl",e("controllers/account/SharesCtrl")),o.controller("account_OrdersCtrl",e("controllers/account/OrdersCtrl")),o.controller("account_OrderProdHistoryCtrl",e("controllers/account/OrderProdHistoryCtrl")),o.controller("account_ShareDetailCtrl",e("controllers/account/ShareDetailCtrl")),o.controller("account_ShareDetailShortCtrl",e("controllers/account/ShareDetailShortCtrl")),o.controller("account_ShareDetailBankCtrl",e("controllers/account/ShareDetailBankCtrl")),o.controller("account_ShareDetailGatherCtrl",e("controllers/account/ShareDetailGatherCtrl")),o.controller("account_ShareDetailQDIICtrl",e("controllers/account/ShareDetailQDIICtrl")),o.controller("account_OrderDetailCtrl",e("controllers/account/OrderDetailCtrl")),o.controller("account_RechargeCtrl",e("controllers/account/RechargeCtrl")),o.controller("account_QueryBalanceCtrl",e("controllers/account/QueryBalanceCtrl")),o.controller("account_WithdrawCtrl",e("controllers/account/WithdrawCtrl")),o.controller("account_TransferDetailsCtrl",e("controllers/account/TransferDetailsCtrl")),o.controller("account_RechargeAndWithdrawCtrl",e("controllers/account/RechargeAndWithdrawCtrl")),o.controller("trade_BuyCtrl",e("controllers/trade/BuyCtrl")),o.controller("trade_AgreementListCtrl",e("controllers/trade/AgreementListCtrl")),o.controller("trade_AgreementCtrl",e("controllers/trade/AgreementCtrl")),o.controller("trade_AutographCtrl",e("controllers/trade/AutographCtrl")),o.controller("trade_SelectPayWayCtrl",e("controllers/trade/SelectPayWayCtrl")),o.controller("trade_SellCtrl",e("controllers/trade/SellCtrl")),o.controller("promo_UeRewardCtrl",e("controllers/promo/UeRewardCtrl")),o.controller("promo_SubjectCtrl",e("controllers/promo/SubjectCtrl")),o.controller("promo_PastSubjectCtrl",e("controllers/promo/PastSubjectCtrl")),o.controller("promo_OtcCtrl",e("controllers/promo/OtcCtrl")),o.controller("promo_WxQuestionCtrl",e("controllers/promo/WxQuestionCtrl")),o.controller("promo_ThemeCtrl",e("controllers/promo/ThemeCtrl")),o.controller("promo_TermThemeCtrl",e("controllers/promo/TermThemeCtrl")),o.controller("promo_BankThemeCtrl",e("controllers/promo/BankThemeCtrl")),o.controller("promo_RewardCtrl",e("controllers/promo/RewardCtrl")),o.controller("promo_PreviewCtrl",e("controllers/promo/PreviewCtrl")),o.controller("us_IndexCtrl",e("controllers/us/IndexCtrl")),o.controller("us_FeedbackCtrl",e("controllers/us/FeedbackCtrl")),o.run(["$rootScope","$state","$ionicHistory","LocalCacheService","BASE_PATH","$http","offline","CacheFactory","$cordovaNetwork","PULLING_TEXT","REFRESHING_TEXT","TdxLocalFuncService","ThsLocalFuncService","WebService","$location",function(e,t,n,o,a,i,c,s,l,u,d,f,p,m,h){i.defaults.cache=s.createCache("offlineCache",{deleteOnExpire:"none",maxAge:0,storageMode:"localStorage",storagePrefix:"tfzq."}),c.start(i),e.toolbarDisplay=!0,e.basePath=a,e.PULLING_TEXT=u,e.REFRESHING_TEXT=d,e.isOffline=!1,e.$on("$cordovaNetwork:online",function(t,n){e.isOffline=!1}),e.$on("$cordovaNetwork:offline",function(t,n){console.log("got offline"),e.isOffline=!0}),e.closeDigitalKeyboard=function(){"undefined"!=typeof tf&&"undefined"!=typeof tf.digitalKeyboard&&tf.digitalKeyboard.close(function(e){})},e.goIndex=function(){"undefined"!=typeof Messenger&&Messenger.sendMsg("ym_event",{eventID:"s27"},null,null),t.go("tab.index")},e.goIndex_2=function(){"undefined"!=typeof Messenger&&Messenger.sendMsg("ym_event",{eventID:"s27"},null,null),t.go("tab.index")},e.goIndex_3=function(){"undefined"!=typeof Messenger&&Messenger.sendMsg("ym_event",{eventID:"s27"},null,null),t.go("tab.index")},e.goIndex_4=function(){"undefined"!=typeof Messenger&&Messenger.sendMsg("ym_event",{eventID:"s27"},null,null),t.go("tab.index")},e.goIndex_5=function(){"undefined"!=typeof Messenger&&Messenger.sendMsg("ym_event",{eventID:"s27"},null,null),t.go("tab.index")},e.goIndex_6=function(){"undefined"!=typeof Messenger&&Messenger.sendMsg("ym_event",{eventID:"s27"},null,null),t.go("tab.index")},e.goIndex_7=function(){"undefined"!=typeof Messenger&&Messenger.sendMsg("ym_event",{eventID:"s27"},null,null),t.go("tab.index")},e.goProductIndex=function(){"undefined"!=typeof Messenger&&Messenger.sendMsg("ym_event",{eventID:"s28"},null,null),t.go("tab.product-index")},e.goAccountIndex=function(){"undefined"!=typeof Messenger&&Messenger.sendMsg("ym_event",{eventID:"s29"},null,null);var e=o.getUser();if(e)t.go("tab.account-assets-index");else{var a=n.currentView();t.go("login",{from:a.stateName,fromParams:r.toJson(a.stateParams),w:"notLogin",to:"tab.account-assets-index",toParams:""})}},e.$on("$ionicView.beforeEnter",function(){e.hideTabs=!0,r.element(document.querySelector("#appLoading")).remove()}),e.$on("$stateChangeStart",function(e,n,a,i,c){"undefined"!=typeof Messenger&&(i&&""!=i.name&&Messenger.sendMsg("ym_endLogPageView",{pageID:i.url},null,null),Messenger.sendMsg("ym_beginLogPageView",{pageID:n.url},null,null)),"tab.index"!=i.name&&m.wtAddAccessRecord("gcs_fin_page",i.url,h.url(),null),"undefined"!=typeof tf&&"undefined"!=typeof tf.digitalKeyboard&&tf.digitalKeyboard.close(function(e){}),(n.loginStatus||n.openStatus)&&(n.loginStatus&&(o.getUser()?p.isTHS()&&p.getActivePtUser().then(function(e){},function(){o.removeUser(),t.go("login",{from:i.name,fromParams:r.toJson(c),w:"notLogin",to:n.name,toParams:r.toJson(a)})}):(e.preventDefault(),f.isTDX()?f.checkUser(function(){t.go(n,a)}):p.isTHS()?p.checkUser(function(){t.go(n,a)},function(){t.go("login",{from:i.name,fromParams:r.toJson(c),w:"notLogin",to:n.name,toParams:r.toJson(a)})}):t.go("login",{from:i.name,fromParams:r.toJson(c),w:"notLogin",to:n.name,toParams:r.toJson(a)}))),n.openStatus&&!o.getOpenUser()&&(e.preventDefault(),t.go("open-msgVerify")))}),e.$on("$stateChangeSuccess",function(t,n,r,o,a){f.isTDX()&&("tab.index"==n.name?(f.tdxShowBottomBar(),e.toolbarDisplay=!0):e.toolbarDisplay&&(f.tdxHideBottomBar(),e.toolbarDisplay=!1),f.tdxTradeLockRefresh())}),e.$on("userIntercepted",function(e,n){"login"!=t.current.name&&(f.isTDX()?f.checkUser(function(){f.tdxTradeLocked().then(function(e){"1"!=e.text&&1!=e.text&&t.go("tab.account-assets-index")})}):t.go("login",{from:t.current.name,w:n}))}),e.$on("openUserIntercepted",function(e,n){t.go("open-msgVerify")});var g=function(e){var n;if(n="Android"==device.platform?window.plugins.PushPlugin.receiveMessage.message:e.message,"undefined"!=typeof n){var r=JSON.parse(n),o=r.value.view;if("undefined"!=typeof o){var a=r.value.params;t.go(o,a)}}},_=function(e){try{var n;if(n="Android"==device.platform?window.plugins.PushPlugin.openNotification.alert:e.aps.alert,console.log("open Notificaiton:"+n),"undefined"!=typeof n){var r=JSON.parse(n.body),o=r.value.view;if("undefined"!=typeof o){var a=r.value.params;t.go(o,a)}}}catch(i){console.log("PushPlugin:onOpenNotification"+i)}},v=function(e){try{var n;if(n="Android"==device.platform?window.plugins.PushPlugin.receiveNotification.alert:e.aps.alert,console.log("Receive Notificaiton:"+n),"undefined"!=typeof n){var r=JSON.parse(n.body),o=r.value.view;if("undefined"!=typeof o){var a=r.value.params;t.go(o,a)}}}catch(i){console.log(exception)}};document.addEventListener("push.receiveMessage",g,!1),document.addEventListener("push.openNotification",_,!1),document.addEventListener("push.receiveNotification",v,!1)}]),o}),define("radialIndicator",["jquery"],function(){!function(e,t,n){"use strict";function r(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function o(e,t,n,r){return Math.round(n+(r-n)*e/t)}function a(e,t,n,a,i){var c=-1!=i.indexOf("#")?r(i):i.match(/\d+/g),s=-1!=a.indexOf("#")?r(a):a.match(/\d+/g),l=n-t,u=e-t;return c&&s?"rgb("+o(u,l,s[0],c[0])+","+o(u,l,s[1],c[1])+","+o(u,l,s[2],c[2])+")":null}function i(){for(var e=arguments,t=e[0],n=1,r=e.length;r>n;n++){var o=e[n];for(var a in o)o.hasOwnProperty(a)&&(t[a]=o[a])}return t}function c(e){return function(t){if(!e)return t.toString();t=t||0;for(var n=t.toString().split("").reverse(),r=e.split("").reverse(),o=0,a=0,i=r.length;i>o&&n.length;o++)"#"==r[o]&&(a=o,r[o]=n.shift());return r.splice(a+1,r.lastIndexOf("#")-a,n.reverse().join("")),r.reverse().join("")}}function s(e,t){t=t||{},t=i({},l.defaults,t),this.indOption=t,"string"==typeof e&&(e=n.querySelector(e)),e.length&&(e=e[0]),this.container=e;var r=n.createElement("canvas");e.appendChild(r),this.canElm=r,this.ctx=r.getContext("2d"),this.current_value=t.initValue||t.minValue||0}function l(e,t){var n=new s(e,t);return n.init(),n}var u=2*Math.PI,d=Math.PI/2;s.prototype={constructor:l,init:function(){var e=this.indOption,t=this.canElm,n=this.ctx,r=2*(e.radius+e.barWidth),o=r/2;return this.formatter="function"==typeof e.format?e.format:c(e.format),this.maxLength=e.percentage?4:this.formatter(e.maxValue).length,t.width=r,t.height=r,n.strokeStyle=e.barBgColor,n.lineWidth=e.barWidth,n.beginPath(),n.arc(o,o,e.radius,0,2*Math.PI),n.stroke(),this.imgData=n.getImageData(0,0,r,r),this.value(this.current_value),this},value:function(e){if(void 0===e||isNaN(e))return this.current_value;e=parseInt(e);var t=this.ctx,n=this.indOption,r=n.barColor,o=2*(n.radius+n.barWidth),i=n.minValue,c=n.maxValue,s=o/2;e=i>e?i:e>c?c:e;var l=Math.round(100*(e-i)/(c-i)*100)/100,f=n.percentage?l+"%":this.formatter(e);if(this.current_value=e,t.putImageData(this.imgData,0,0),"object"==typeof r)for(var p=Object.keys(r),m=1,h=p.length;h>m;m++){var g=p[m-1],_=p[m],v=r[g],b=r[_],y=e==g?v:e==_?b:e>g&&_>e&&(n.interpolate?a(e,g,_,v,b):b);if(0!=y){r=y;break}}if(t.strokeStyle=r,n.roundCorner&&(t.lineCap="round"),t.beginPath(),t.arc(s,s,n.radius,-d,u*l/100-d,!1),t.stroke(),n.displayNumber){var C=t.font.split(" "),w=n.fontWeight,S=n.fontSize||o/(this.maxLength-(Math.floor(1.4*this.maxLength/4)-1));C=n.fontFamily||C[C.length-1],t.fillStyle=n.fontColor||r,t.font=w+" "+S+"px "+C,t.textAlign="center",t.textBaseline="middle",t.fillText(f,s,s)}return this},animate:function(e){var t=this.indOption,n=this.current_value||t.minValue,r=this,o=Math.ceil((t.maxValue-t.minValue)/(t.frameNum||(t.percentage?100:500))),a=n>e;return this.intvFunc&&clearInterval(this.intvFunc),this.intvFunc=setInterval(function(){if(!a&&n>=e||a&&e>=n){if(r.current_value==n)return void clearInterval(r.intvFunc);n=e}r.value(n),n!=e&&(n+=a?-o:o)},t.frameTime),this},option:function(e,t){return void 0===t?this.option[e]:(-1!=["radius","barWidth","barBgColor","format","maxValue","percentage"].indexOf(e)&&(this.indOption[e]=t,this.init().value(this.current_value)),void(this.indOption[e]=t))}},l.defaults={radius:50,barWidth:5,barBgColor:"#eeeeee",barColor:"#99CC33",format:null,frameTime:10,frameNum:null,fontColor:null,fontFamily:null,fontWeight:"bold",fontSize:null,interpolate:!0,percentage:!1,displayNumber:!0,roundCorner:!1,minValue:0,maxValue:100,initValue:0},t.radialIndicator=l,e&&(e.fn.radialIndicator=function(t){return this.each(function(){var n=l(this,t);e.data(this,"radialIndicator",n)})})}(window.jQuery,window,document,void 0)}),define("featureCarousel",["jquery"],function(){!function(e){e.fn.featureCarousel=function(t){return t=e.extend({},e.fn.featureCarousel.defaults,t||{}),e(this).each(function(){function n(n){if(1==t.preload){var r=_.featuresContainer.find("img"),o=0,a=r.length;r.each(function(){e(this).load(function(){o++,o==a&&n()}),this.complete&&e(this).trigger("load")})}else n()}function r(e){return _.featuresArray[e-1]}function o(e){return e-1==0?_.totalFeatureCount:e-1}function a(e){return e+1>_.totalFeatureCount?1:e+1}function i(){_.containerWidth=_.featuresContainer.width(),_.containerHeight=_.featuresContainer.height();var n=e(_.containerIDTag).find("div img:first");t.largeFeatureWidth>1?_.largeFeatureWidth=t.largeFeatureWidth:t.largeFeatureWidth>0&&t.largeFeatureWidth<1?_.largeFeatureWidth=n.width()*t.largeFeatureWidth:_.largeFeatureWidth=n.outerWidth(),t.largeFeatureHeight>1?_.largeFeatureHeight=t.largeFeatureHeight:t.largeFeatureHeight>0&&t.largeFeatureHeight<1?_.largeFeatureHeight=n.height()*t.largeFeatureHeight:_.largeFeatureHeight=n.outerHeight(),t.smallFeatureWidth>1?_.smallFeatureWidth=t.smallFeatureWidth:t.smallFeatureWidth>0&&t.smallFeatureWidth<1?_.smallFeatureWidth=n.width()*t.smallFeatureWidth:_.smallFeatureWidth=n.outerWidth()/2,t.smallFeatureHeight>1?_.smallFeatureHeight=t.smallFeatureHeight:t.smallFeatureHeight>0&&t.smallFeatureHeight<1?_.smallFeatureHeight=n.height()*t.smallFeatureHeight:_.smallFeatureHeight=n.outerHeight()/2}function c(){t.displayCutoff>0&&t.displayCutoff<_.totalFeatureCount&&(_.totalFeatureCount=t.displayCutoff),_.featuresContainer.children("div").each(function(t){t<_.totalFeatureCount&&(_.featuresArray[t]=e(this))}),"medium"!=_.featuresContainer.children("div").first().css("borderLeftWidth")&&(_.borderWidth=2*parseInt(_.featuresContainer.children("div").first().css("borderLeftWidth"))),_.featuresContainer.children("div").each(function(){e(this).css({left:_.containerWidth/2-_.smallFeatureWidth/2-_.borderWidth/2,width:_.smallFeatureWidth,height:_.smallFeatureHeight,top:t.smallFeatureOffset+t.topPadding,opacity:0})}).find("img:first").css({width:_.smallFeatureWidth}),_.totalFeatureCount<4?_.itemsToAnimate=_.totalFeatureCount:_.itemsToAnimate=4,_.featuresContainer.find("div > div").hide()}function s(){e.each(_.featuresArray,function(t){e(this).data("setPosition",t+1)});var n=o(t.startingFeature);_.currentCenterNum=n;var a=r(n);a.data("position",1);var i=a.prevAll();i.each(function(t){e(this).data("position",_.totalFeatureCount-t)});var c=a.nextAll();c.each(function(t){void 0!=e(this).data("setPosition")&&e(this).data("position",t+2)}),3==t.counterStyle&&e.each(_.featuresArray,function(){var t=o(e(this).data("position")),n=e("<span></span>");n.addClass("numberTag"),n.html("("+t+" of "+_.totalFeatureCount+") "),e(this).find("div p").prepend(n)})}function l(){if(1==t.counterStyle||2==t.counterStyle){var n=e("<ul></ul>");n.addClass("blipsContainer");for(var r=0;r<_.totalFeatureCount;r++){var o;o=2==t.counterStyle?"":r+1;var a=e("<div>"+o+"</div>");a.addClass("blip"),a.css("cursor","pointer"),a.attr("id","blip_"+(r+1));var i=e("<li></li>");i.append(a),i.css("float","left"),i.css("list-style-type","none"),n.append(i)}e(_.containerIDTag).append(n),n.hide().show()}}function u(e,t){var n=_.featuresContainer.find(".blipsContainer"),r=n.find("#blip_"+e),o=n.find("#blip_"+t);r.removeClass("blipSelected"),o.addClass("blipSelected")}function d(){if(null!=_.timeoutVar&&(_.timeoutVar=clearTimeout(_.timeoutVar)),0!=t.autoPlay){var e=Math.abs(t.autoPlay)<t.carouselSpeed?t.carouselSpeed:Math.abs(t.autoPlay);_.timeoutVar=setTimeout(function(){t.autoPlay>0?h(!0,1):t.autoPlay<0&&h(!1,1)},e)}}function f(t){e.each(_.featuresArray,function(){var n;n=0==t?a(e(this).data().position):o(e(this).data().position),e(this).data("position",n)})}function p(e,n){var r,i,c,s,l,p,h,g=e.data("position");h=1==n?o(g):a(g),1==h?(r=_.largeFeatureWidth,i=_.largeFeatureHeight,c=t.topPadding,l=e.css("z-index"),s=_.containerWidth/2-_.largeFeatureWidth/2-_.borderWidth/2,p=1):(r=_.smallFeatureWidth,i=_.smallFeatureHeight,c=t.smallFeatureOffset+t.topPadding,l=1,p=.4,h==_.totalFeatureCount?s=t.sidePadding:2==h?s=_.containerWidth-_.smallFeatureWidth-t.sidePadding-_.borderWidth:(s=_.containerWidth/2-_.smallFeatureWidth/2-_.borderWidth/2,p=0)),1!=h&&e.find("div").hide(),e.animate({width:r,height:i,top:c,left:s,opacity:p},t.carouselSpeed,t.animationEasing,function(){if(1==h&&e.find("div").fadeTo("fast",.85),_.rotationsRemaining=_.rotationsRemaining-1,e.css("z-index",l),(1==t.counterStyle||2==t.counterStyle)&&1==h){var r,i=_.featuresContainer.children("div").index(e)+1;r=0==n?a(i):o(i),u(r,i)}var c=_.rotationsRemaining/_.itemsToAnimate;c%1==0&&(_.currentlyMoving=!1,f(n),_.rotationsRemaining>0&&m(n)),d()}).find("img:first").animate({width:r,height:i},t.carouselSpeed,t.animationEasing).end()}function m(e){_.currentlyMoving=!0;var t,n,i,c;1==e?(t=r(a(_.currentCenterNum)),n=r(_.currentCenterNum),i=r(a(a(_.currentCenterNum))),c=r(o(_.currentCenterNum)),_.currentCenterNum=a(_.currentCenterNum)):(t=r(o(_.currentCenterNum)),n=r(o(o(_.currentCenterNum))),i=r(_.currentCenterNum),c=r(a(_.currentCenterNum)),_.currentCenterNum=o(_.currentCenterNum)),e?n.css("z-index",3):i.css("z-index",3),t.css("z-index",4),p(n,e),p(t,e),p(i,e),_.totalFeatureCount>3&&p(c,e)}function h(e,t){if(0==_.currentlyMoving){var n=t*_.itemsToAnimate;_.rotationsRemaining=n,m(e)}}function g(e,t){var n,r=1,i=1;for(n=e;(n=o(n))!=t;)r++;for(n=e;(n=a(n))!=t;)i++;return r<i?r*-1:i}var _={currentCenterNum:t.startingFeature,containerWidth:0,containerHeight:0,largeFeatureWidth:0,largeFeatureHeight:0,smallFeatureWidth:0,smallFeatureHeight:0,totalFeatureCount:e(this).children("div").length,currentlyMoving:!1,featuresContainer:e(this),featuresArray:[],containerIDTag:"#"+e(this).attr("id"),timeoutVar:null,rotationsRemaining:0,itemsToAnimate:0,borderWidth:0};n(function(){i(),c(),s(),l(),h(!0,1)}),e(".leftButton").click(function(){h(!1,1)}),e(".rightButton").click(function(){h(!0,1)}),_.featuresContainer.children("div").click(function(){var t=e(this).data("position");2==t?h(!0,1):t==_.totalFeatureCount&&h(!1,1)}).mouseover(function(){if(0==_.currentlyMoving){var t=e(this).data("position");2!=t&&t!=_.totalFeatureCount||e(this).css("opacity",.8)}}).mouseout(function(){if(0==_.currentlyMoving){var t=e(this).data("position");2!=t&&t!=_.totalFeatureCount||e(this).css("opacity",.4)}}),e("a",_.containerIDTag).live("click",function(t){var n=e(this).parentsUntil(_.containerIDTag);n.each(function(){var n=e(this).data("position");if(void 0!=n&&1!=n)return n==_.totalFeatureCount?h(!1,1):2==n&&h(!0,1),t.preventDefault(),!1})}),e(".blip").live("click",function(){var t=e(this).attr("id").substring(5),n=_.featuresContainer.children("div").eq(t-1).data("position"),r=_.currentCenterNum;if(t!=r){var o=g(1,n);o<0?h(!1,o*-1):h(!0,o)}})})},e.fn.featureCarousel.defaults={largeFeatureWidth:0,largeFeatureHeight:0,smallFeatureWidth:.5,smallFeatureHeight:.5,topPadding:20,sidePadding:30,smallFeatureOffset:50,startingFeature:1,carouselSpeed:1e3,autoPlay:0,counterStyle:1,preload:!0,displayCutoff:0,animationEasing:"swing"}}(jQuery)}),define("app",["store","angular","angular-cache","uiRouter","config","bindOnce","filters/filters","services/services","animations/animations","directives/directives","controllers/controllers","ionicAngular","radialIndicator","featureCarousel"],function(e,t){"use strict";var n=t.module("app",["angular-cache","ngCordova","ionic","app.controllers","app.filters","app.services","app.animations","app.directives","app.config","ui.router","door3.css","ngmodel.format","platanus.keepValues","highcharts-ng","ngCookies","offline","pasvaz.bindonce","topscroller"]);return n.constant("$ionicLoadingConfig",{template:'<img src="../img/ripple.svg" style="padding:0;width:40px;height:40px;">',showBackdrop:!0}),n.factory("$exceptionHandler",function(){return function(e,t){throw e.message+=' (caused by "'+t+'")',"undefined"!=typeof Messenger&&Messenger.sendMsg("ym_reportError",{error:e.message.toString()},null,null),e}}),n.factory("UserInterceptor",["$q","$rootScope","CacheFactory",function(t,n,r){return{request:function(t){var n=e.get("UUID");n&&(t.headers.UUID=n);var o=r.get("UserCache"),a=o.get("user");return a&&(t.headers.TOKEN=a.token),t},response:function(e){var o=e.data;if(o){if("AH-10001"==o.error_no){var a=r.get("UserCache");return a.remove("user"),n.$emit("userIntercepted","sessionOut",e),t.reject(e)}if("AH-10002"==o.error_no){var a=r.get("UserCache");return a.remove("user"),n.$emit("openUserIntercepted","sessionOut",e),t.reject(e)}}return e},responseError:function(r){if("0"==r.status&&TF.Bubble.show("请求超时，请稍后再试"),"200"!=r.status){var o=r.config.method,a=r.config.url,i=r.status,c=o+":"+a+":"+i;"undefined"!=typeof Messenger&&Messenger.sendMsg("ym_reportError",{error:c},null,null)}"404"==r.status;var s=r.data;return s&&("AH-10001"==s.error_no&&(e.remove("user"),n.$emit("userIntercepted","sessionOut",r)),"AH-10002"==s.error_no)?(e.remove("openUser"),n.$emit("openUserIntercepted","sessionOut",r),t.reject(r)):t.reject(r)}}}]),n.config(function($httpProvider,$ionicConfigProvider){var n=$httpProvider,r=$ionicConfigProvider;function o(e){if(e&&t.isObject(e))for(var n in e)a(e[n])&&(e[n]=i(e[n]));return e}function a(e){if(e&&t.isString(e)){var n=e.lastIndexOf("\\"),r=e.substr(n+1),o=/\.jpg$|\.jpeg$|\.gif$|\.png$/i;return o.test(r)}return!1}function i(t){var n=e.get(t);return n&&c(n)?n:(e.remove(t),"undefined"!=typeof FileLoad&&FileLoad.fileLoadPath(t,function(r){r&&(n=r,e.set(t,n))}),t)}function c(e){var t=new Image;return t.src=e,t.fileSize>0||t.width>0&&t.height>0}r.platform.ios.tabs.position("bottom"),r.platform.android.tabs.position("bottom"),r.scrolling.jsScrolling(!0),r.views.transition("none"),r.views.swipeBackEnabled(!1),n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n.interceptors.push("UserInterceptor"),
n.defaults.transformRequest=[function(e){var n=function(e){var t,r,o,a,i,c,s,l="";for(t in e)if(r=e[t],r instanceof Array)for(s=0;s<r.length;++s)i=r[s],o=t+"["+s+"]",c={},c[o]=i,l+=n(c)+"&";else if(r instanceof Object)for(a in r)i=r[a],o=t+"["+a+"]",c={},c[o]=i,l+=n(c)+"&";else void 0!==r&&null!==r&&(l+=encodeURIComponent(t)+"="+encodeURIComponent(r)+"&");return l.length?l.substr(0,l.length-1):l};return t.isObject(e)&&"[object File]"!==String(e)?n(e):e}],n.defaults.transformResponse.push(function(e){if(e&&t.isObject(e)&&0==e.error_no&&e.data){var n=e.data;if(n)if(t.isArray(n))for(var r=n.length,a=0;a<r;a++)o(n[a]);else o(n)}return e})}),n}),define("routes",["app"],function(e){"use strict";e.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("login",{url:"/login?from&fromParams&to&toParams&w",templateUrl:"../view/login.html",controller:"LoginCtrl"}).state("help",{url:"/help",templateUrl:"../view/help/index.html",controller:"help_IndexCtrl"}).state("help-list",{url:"/help-list/:id",templateUrl:"../view/help/list.html",controller:"help_ListCtrl"}).state("help-item",{url:"/help-item/:id",templateUrl:"../view/help/item.html",controller:"help_ItemCtrl"}).state("tab",{url:"/tab","abstract":!0,templateUrl:"../view/tabs.html"}).state("tab.index",{url:"/index?recommendInfos&tf_op_station&app_context_name",views:{"tab-index":{templateUrl:"../view/tab-index.html",controller:"IndexCtrl"}}}).state("tab.index-concern",{url:"/index-concern",views:{"tab-index":{templateUrl:"../view/product/concern.html",controller:"account_ConcernCtrl"}}}).state("tab.account-index",{url:"/account-index",views:{"tab-account-index":{templateUrl:"../view/account/index.html",controller:"account_IndexCtrl"}},loginStatus:!0}).state("tab.account-assets-index",{url:"/account-assets-index",views:{"tab-account-index":{templateUrl:"../view/account/assetsIndex.html",controller:"account_AssetsIndexCtrl"}},loginStatus:!0}).state("tab.account-shares",{url:"/account-shares",views:{"tab-account-index":{templateUrl:"../view/account/shares.html",controller:"account_SharesCtrl"}},loginStatus:!0}).state("tab.account-orders",{url:"/account-orders",views:{"tab-account-index":{templateUrl:"../view/account/orders.html",controller:"account_OrdersCtrl"}},loginStatus:!0}).state("tab.account-productOrderHistory",{url:"/account-productOrderHistory?prodCode&prodSource&trans_account",views:{"tab-account-index":{templateUrl:"../view/account/orderProdHistory.html",controller:"account_OrderProdHistoryCtrl"}},loginStatus:!0}).state("tab.account-shareDetail",{url:"/account-shareDetail?allotNo&prodCode&prodSource&trans_account",views:{"tab-account-index":{templateUrl:"../view/account/shareDetail.html",controller:"account_ShareDetailCtrl"}},loginStatus:!0}).state("tab.account-shareDetailShort",{url:"/account-shareDetailShort?allotNo&prodCode&prodSource&enable_amount&payAccount&trans_account",views:{"tab-account-index":{templateUrl:"../view/account/shareDetailShort.html",controller:"account_ShareDetailShortCtrl"}},loginStatus:!0}).state("tab.account-shareDetailBank",{url:"/account-shareDetailBank?allotNo&prodCode&prodSource&trans_account",views:{"tab-account-index":{templateUrl:"../view/account/shareDetailBank.html",controller:"account_ShareDetailBankCtrl"}},loginStatus:!0}).state("tab.account-shareDetailGather",{url:"/account-shareDetailGather?allotNo&prodCode&prodSource",views:{"tab-account-index":{templateUrl:"../view/account/shareDetailGather.html",controller:"account_ShareDetailGatherCtrl"}},loginStatus:!0}).state("tab.account-shareDetailQDII",{url:"/account-shareDetailQDII?allotNo&prodCode&prodSource&trans_account",views:{"tab-account-index":{templateUrl:"../view/account/shareDetailQDII.html",controller:"account_ShareDetailQDIICtrl"}},loginStatus:!0}).state("tab.account-orderDetail",{url:"/account-orderDetail?co_serial_no&allotNo&prodSource&isCurrent",views:{"tab-account-index":{templateUrl:"../view/account/orderDetail.html",controller:"account_OrderDetailCtrl"}},loginStatus:!0}).state("recharge-and-withdraw",{url:"/recharge-and-withdraw",controller:"account_RechargeAndWithdrawCtrl",templateUrl:"../view/account/rechargeAndWithdraw.html",loginStatus:!0}).state("query-balance",{url:"/query-balance",templateUrl:"../view/account/queryBalance.html",controller:"account_QueryBalanceCtrl",loginStatus:!0}).state("trade-buy",{url:"/trade/buy?prodCode&prodSource&add",templateUrl:"../view/trade/buy.html",controller:"trade_BuyCtrl",loginStatus:!0}).state("agreementList",{url:"/trade/agreementList?econtract_type&prod_id",templateUrl:"../view/trade/agreementList.html",controller:"trade_AgreementListCtrl"}).state("agreement",{url:"/trade/agreement?id&econtract_id",templateUrl:"../view/trade/agreement.html",controller:"trade_AgreementCtrl"}).state("autograph",{url:"/trade/autograph?id&econtract_id",templateUrl:"../view/trade/autograph.html",controller:"trade_AutographCtrl"}).state("selectPayWay",{url:"/trade/selectPayWay",templateUrl:"../view/trade/selectPayWay.html",controller:"trade_SelectPayWayCtrl",loginStatus:!0}).state("trade-sell",{url:"/trade/sell?allotNo&prodCode&prodSource",templateUrl:"../view/trade/sell.html",controller:"trade_SellCtrl",loginStatus:!0}).state("tab.account-manager",{url:"/account-manager",views:{"tab-account-index":{templateUrl:"../view/account/manager.html",controller:"account_ManagerCtrl"}},loginStatus:!0}).state("tab.account-openAccount",{url:"/account-openAccount/:typeid",views:{"tab-account-index":{templateUrl:"../view/account/openAccount.html",controller:"account_OpenAccountCtrl"}},loginStatus:!0}).state("tab.account-openAccountId",{url:"/account-openAccountId/:typeid",views:{"tab-account-index":{templateUrl:"../view/account/openAccountId.html",controller:"account_OpenAccountIdCtrl"}},loginStatus:!0}).state("tab.account-openAccountVideo",{url:"/account-openAccountVideo/:typeid",views:{"tab-account-index":{templateUrl:"../view/account/openAccountVideo.html",controller:"account_OpenAccountVideoCtrl"}},loginStatus:!0}).state("tab.account-transAccount",{url:"/account-transAccount/:typeid",views:{"tab-account-index":{templateUrl:"../view/account/transAccount.html",controller:"account_TransAccountCtrl"}},loginStatus:!0}).state("tab.account-openta",{url:"/account-openta/:typeid",views:{"tab-account-index":{templateUrl:"../view/account/openAccountTA.html",controller:"account_OpenTACtrl"}},loginStatus:!0}).state("tab.account-agreementlist",{url:"/account-agreementlist",views:{"tab-account-index":{templateUrl:"../view/account/agreementList.html",controller:"account_AgreementListCtrl"}},loginStatus:!0}).state("tab.account-agreement",{url:"/account-agreement/:id",views:{"tab-account-index":{templateUrl:"../view/account/agreement.html",controller:"account_AgreementCtrl"}},loginStatus:!0}).state("tab.account-entrep",{url:"/account-entrep",views:{"tab-account-index":{templateUrl:"../view/account/entrepreneurship.html",controller:"account_EntrepreneurshipCtrl"}},loginStatus:!0}).state("tab.account-sign",{url:"/account-sign",views:{"tab-account-index":{templateUrl:"../view/account/sign.html",controller:"account_SignCtrl"}},loginStatus:!0}).state("tab.account-saleDepartment",{url:"/account-saleDepartment",views:{"tab-account-index":{templateUrl:"../view/account/saleDepartment.html",controller:"account_SaleDepartmentCtrl"}},loginStatus:!0}).state("tab.account-degree",{url:"/account-degree",views:{"tab-account-index":{templateUrl:"../view/account/degree.html",controller:"account_DegreeCtrl"}},loginStatus:!0}).state("tab.account-profession",{url:"/account-profession",views:{"tab-account-index":{templateUrl:"../view/account/profession.html",controller:"account_ProfessionCtrl"}},loginStatus:!0}).state("tab.account-relationship",{url:"/account-relationship",views:{"tab-account-index":{templateUrl:"../view/account/relationship.html",controller:"account_RelationshipCtrl"}},loginStatus:!0}).state("tab.account-phoneModify",{url:"/account-phoneModify",views:{"tab-account-index":{templateUrl:"../view/account/phoneModify.html",controller:"account_PhoneModifyCtrl"}},loginStatus:!0}).state("tab.account-modifyPhoneFirst",{url:"/account-modifyPhoneFirst",views:{"tab-account-index":{templateUrl:"../view/account/modifyPhoneFirst.html",controller:"account_ModifyPhoneFirstCtrl"}},loginStatus:!0}).state("tab.account-modifyPhoneLast",{url:"/account-modifyPhoneLast",views:{"tab-account-index":{templateUrl:"../view/account/modifyPhoneLast.html",controller:"account_ModifyPhoneLastCtrl"}},loginStatus:!0}).state("tab.account-resetPhoneFirst",{url:"/account-resetPhoneFirst",views:{"tab-account-index":{templateUrl:"../view/account/resetPhoneFirst.html",controller:"account_ResetPhoneFirstCtrl"}},loginStatus:!0}).state("tab.account-address",{url:"/account-address",views:{"tab-account-index":{templateUrl:"../view/account/address.html",controller:"account_AddressCtrl"}},loginStatus:!0}).state("tab.account-postcode",{url:"/account-postcode",views:{"tab-account-index":{templateUrl:"../view/account/postcode.html",controller:"account_PostCodeCtrl"}},loginStatus:!0}).state("tab.account-resetPhoneSecond",{url:"/account-resetPhoneSecond",views:{"tab-account-index":{templateUrl:"../view/account/resetPhoneSecond.html",controller:"account_ResetPhoneSecondCtrl"}},loginStatus:!0}).state("tab.account-resetPhoneThird",{url:"/account-resetPhoneThird",views:{"tab-account-index":{templateUrl:"../view/account/resetPhoneThird.html",controller:"account_ResetPhoneThirdCtrl"}},loginStatus:!0}).state("tab.account-identification",{url:"/account-identification",views:{"tab-account-index":{templateUrl:"../view/account/identification.html",controller:"account_IdentificationCtrl"}},loginStatus:!0}).state("tab.account-changeid",{url:"/account-changeid",views:{"tab-account-index":{templateUrl:"../view/account/changeid.html",controller:"account_ChangeIdCtrl"}},loginStatus:!0}).state("tab.account-idcheck",{url:"/account-idcheck",views:{"tab-account-index":{templateUrl:"../view/account/identificationCheck.html",controller:"account_IdCheckCtrl"}},loginStatus:!0}).state("tab.account-userInfoVideo",{url:"/account-userInfoVideo",views:{"tab-account-index":{templateUrl:"../view/account/userInfoVideo.html",controller:"account_UserInfoVideoCtrl"}},loginStatus:!0}).state("tab.account-modifyPwd",{url:"/account-modifyPwd",views:{"tab-account-index":{templateUrl:"../view/account/modifyPwd.html",controller:"account_ModifyPwdCtrl"}},loginStatus:!0}).state("tab.account-risk",{url:"/account-risk?from&fromParams",views:{"tab-account-index":{templateUrl:"../view/account/risk.html",controller:"account_RiskCtrl"}},loginStatus:!0}).state("tab.account-riskEval",{url:"/account-riskEval/:typeid?from&fromParams",views:{"tab-account-index":{templateUrl:"../view/account/riskEvaluating.html",controller:"account_RiskEvalCtrl"}},loginStatus:!0}).state("tab.account-bank",{url:"/account-bank",views:{"tab-account-index":{templateUrl:"../view/account/bank.html",controller:"account_BankCtrl"}},loginStatus:!0}).state("tab.account-bindDepositBank",{url:"/account-bindDepositBank",views:{"tab-account-index":{templateUrl:"../view/account/bindDepositBank.html",controller:"open_BindDepositBankCtrl"}},loginStatus:!0}).state("tab.account-bindQuickBank",{url:"/account-bindQuickBank",views:{"tab-account-index":{templateUrl:"../view/account/bindQuickBank.html",controller:"open_BindQuickBankCtrl"}},loginStatus:!0}).state("tab.account-unbindBank",{url:"/account-unBindBank?bank_no&bank_account&bank_name",views:{"tab-account-index":{templateUrl:"../view/account/unbindBank.html",controller:"account_UnbindBankCtrl"}},loginStatus:!0}).state("open-prepare",{url:"/open-prepare",templateUrl:"../view/open/prepare.html",controller:"open_PrepareCtrl"}).state("open-msgVerify",{url:"/open-msgVerify",templateUrl:"../view/open/msgVerify.html",controller:"open_MsgVerifyCtrl"}).state("open-selectBranch",{url:"/open-selectBranch?default_branch",templateUrl:"../view/open/selectBranch.html",controller:"open_SelectBranchCtrl",openStatus:!0}).state("open-uploadID",{url:"/open-uploadID?branch_no",templateUrl:"../view/open/uploadID.html",controller:"open_UploadIDCtrl",openStatus:!0}).state("open-personInfo",{url:"/open-personInfo",templateUrl:"../view/open/personInfo.html",controller:"open_PersonInfoCtrl",openStatus:!0}).state("open-installCert",{url:"/open-installCert",templateUrl:"../view/open/installCert.html",controller:"open_InstallCertCtrl",openStatus:!0}).state("open-riskAssess",{url:"/open-riskAssess",templateUrl:"../view/open/riskAssess.html",controller:"open_RiskAssessCtrl",openStatus:!0}).state("open-setPwd",{url:"/open-setPwd",templateUrl:"../view/open/setPwd.html",controller:"open_SetPwdCtrl",openStatus:!0}).state("open-bindOpenDeposit",{url:"/open-bindOpenDeposit?b",templateUrl:"../view/open/bindOpenDeposit.html",controller:"open_BindDepositBankCtrl",openStatus:!0}).state("open-bindOpenQuick",{url:"/open-bindOpenQuick?b",templateUrl:"../view/open/bindOpenQuick.html",controller:"open_BindQuickBankCtrl",openStatus:!0}).state("open-signAgreement",{url:"/open-signAgreement",templateUrl:"../view/open/signAgreement.html",controller:"open_SignAgreementCtrl",openStatus:!0}).state("open-revisitPaper",{url:"/open-revisitPaper",templateUrl:"../view/open/revisitPaper.html",controller:"open_RevisitPaperCtrl",openStatus:!0}).state("open-openResult",{url:"/open-openResult?open_status",templateUrl:"../view/open/openResult.html",controller:"open_OpenResultCtrl",openStatus:!0}).state("open-channelRisk",{url:"/open-channelRisk?paper_id&product_no",templateUrl:"../view/open/channelRisk.html",controller:"open_ChannelRiskCtrl"}).state("tab.search",{url:"/search",views:{"tab-product-index":{templateUrl:"../view/product/search.html",controller:"product_SearchCtrl"}}}).state("tab.product-fundTerm",{url:"/product-fundTerm",views:{"tab-product-index":{templateUrl:"../view/product/fundTerm.html",controller:"product_FundTermCtrl"}}}).state("tab.product-item",{url:"/product-item/:prod_code",views:{"tab-product-index":{templateUrl:"../view/product/item.html",controller:"product_ItemCtrl"}}}).state("tab.product-detail",{url:"/product-detail/:prod_code",views:{"tab-product-index":{templateUrl:"../view/product/detail.html",controller:"product_DetailCtrl"}}}).state("tab.product-item-otc",{url:"/product-item-otc/:prod_code",views:{"tab-product-index":{templateUrl:"../view/product/item-otc.html",controller:"product_ItemOtcCtrl"}}}).state("tab.product-item-otc-float",{url:"/product-item-otc-float/:prod_code",views:{"tab-product-index":{templateUrl:"../view/product/item-otc-float.html",controller:"product_ItemOtcFloatCtrl"}}}).state("tab.product-detail-otc",{url:"/product-detail-otc/:prod_code",views:{"tab-product-index":{templateUrl:"../view/product/detail-otc.html",controller:"product_DetailOtcCtrl"}}}).state("tab.product-item-QDII",{url:"/product-item-QDII/:prod_code?is_index",views:{"tab-product-index":{templateUrl:"../view/product/item-QDII.html",controller:"product_ItemQDIICtrl"}}}).state("tab.product-currentTerm",{url:"/product-currentTerm/:id",views:{"tab-product-index":{templateUrl:"../view/product/currentTerm.html",controller:"product_CurrentTermCtrl"}}}).state("tab.product-more",{url:"/product-more",views:{"tab-product-index":{templateUrl:"../view/product/moreProduct.html",controller:"product_MoreCtrl"}}}).state("tab.product-starTerm",{url:"/product-starTerm/:id",views:{"tab-product-index":{templateUrl:"../view/product/starTerm.html",controller:"product_StarTermCtrl"}}}).state("tab.product-shortTerm",{url:"/product-shortTerm/:id",views:{"tab-product-index":{templateUrl:"../view/product/shortTerm.html",controller:"product_ShortTermCtrl"}}}).state("tab.product-tfTerm",{url:"/product-tfTerm/:id?index",views:{"tab-product-index":{templateUrl:"../view/product/tfTerm.html",controller:"product_TFTermCtrl"}},loginStatus:!0}).state("tab.product-longTerm",{url:"/product-longTerm/:id?index",views:{"tab-product-index":{templateUrl:"../view/product/longTerm.html",controller:"product_LongTermCtrl"}}}).state("tab.product-goldTerm",{url:"/product-goldTerm/:id",views:{"tab-product-index":{templateUrl:"../view/product/goldTerm.html",controller:"product_GoldTermCtrl"}}}).state("tab.product-overseaTerm",{url:"/product-overseaTerm/:id",views:{"tab-product-index":{templateUrl:"../view/product/overseaTerm.html",controller:"product_QDIITermCtrl"}}}).state("tab.product-goodsTerm",{url:"/product-goodsTerm/:id",views:{"tab-product-index":{templateUrl:"../view/product/goodsTerm.html",controller:"product_QDIITermCtrl"}}}).state("tab.product-landLordTerm",{url:"/product-landLordTerm/:id",views:{"tab-product-index":{templateUrl:"../view/product/landLordTerm.html",controller:"product_QDIITermCtrl"}}}).state("tab.product-indexTerm",{url:"/product-indexTerm/:id",views:{"tab-product-index":{templateUrl:"../view/product/indexTerm.html",controller:"product_IndexTermCtrl"}}}).state("tab.product-stockTerm",{url:"/product-stockTerm/:id",views:{"tab-product-index":{templateUrl:"../view/product/stockTerm.html",controller:"product_StockTermCtrl"}}}).state("tab.product-rate",{url:"/product-rate/:id",views:{"tab-product-index":{templateUrl:"../view/product/rate.html",controller:"product_RateCtrl"}}}).state("promo-tianti3",{url:"/promo-tianti3/:id",templateUrl:"../view/promo/tianti/3.html",controller:"promo_OtcCtrl"}).state("promo-tianti2",{url:"/promo-tianti2/:id",templateUrl:"../view/promo/tianti/2.html",controller:"promo_UeRewardCtrl"}).state("promo-otc-float",{url:"/promo-otc-float/:id",templateUrl:"../view/promo/otc-float.html",controller:"promo_OtcCtrl"}).state("promo-guess",{url:"/promo-guess/:id",templateUrl:"../view/promo/theme/guess.html",controller:"promo_OtcCtrl"}).state("promo-ue-reward",{url:"/promo-ue-reward/:id",templateUrl:"../view/promo/ueReward.html",css:"../css/promo/ue-reward.css",controller:"promo_UeRewardCtrl"}).state("promo-subject",{url:"/promo-subject/:id",templateUrl:"../view/promo/subject.html",controller:"promo_SubjectCtrl"}).state("promo-past-subject",{url:"/promo-past-subject",templateUrl:"../view/promo/pastSubject.html",controller:"promo_PastSubjectCtrl"}).state("promo-otc",{url:"/promo-otc/:id",templateUrl:"../view/promo/otc.html",controller:"promo_OtcCtrl",css:"../css/promo/otc.css"}).state("promo-wx-question",{url:"/promo-wx-question",templateUrl:"../view/promo/wxQuestion.html",controller:"promo_WxQuestionCtrl"}).state("promo-wx-fans",{url:"/promo-wx-fans",templateUrl:"../view/promo/weixin/fans.html",css:"../css/promo/weixin/fans.css"}).state("promo-reward",{url:"/promo-reward",templateUrl:"../view/promo/reward.html",controller:"promo_RewardCtrl",css:"../css/promo/reward.css"}).state("promo-theme-blueChip",{url:"/promo-theme-blueChip/:id",templateUrl:"../view/promo/theme/blueChip.html",controller:"promo_ThemeCtrl",css:"../css/promo/theme/blueChip.css"}).state("promo-theme-bondFund",{url:"/promo-theme-bondFund/:id",templateUrl:"../view/promo/theme/bondFund.html",controller:"promo_ThemeCtrl",css:"../css/promo/theme/bondFund.css"}).state("promo-theme-internetBank",{url:"/promo-theme-internetBank/:id",templateUrl:"../view/promo/theme/internetBank.html",controller:"promo_ThemeCtrl",css:"../css/promo/theme/internetBank.css"}).state("promo-theme-soeReform",{url:"/promo-theme-soeReform/:id",templateUrl:"../view/promo/theme/soeReform.html",controller:"promo_ThemeCtrl",css:"../css/promo/theme/soeReform.css"}).state("promo-theme-tianxiangOne",{url:"/promo-theme-tianxiangOne/:id",templateUrl:"../view/promo/theme/tianxiangOne.html",controller:"promo_ThemeCtrl",css:"../css/promo/theme/tianxiangOne.css"}).state("promo-theme-ziguan",{url:"/promo-theme-ziguan/:id",templateUrl:"../view/promo/theme/ziguan.html",controller:"promo_ThemeCtrl",css:"../css/promo/theme/ziguan.css"}).state("promo-theme-classDeposits",{url:"/promo-theme-classDeposits/:id",templateUrl:"../view/promo/theme/classDeposits.html",controller:"promo_TermThemeCtrl",css:"../css/promo/theme/classDeposits.css"}).state("promo-theme-shortBond",{url:"/promo-theme-shortBond/:id",templateUrl:"../view/promo/theme/shortBond.html",controller:"promo_TermThemeCtrl",css:"../css/promo/theme/shortBond.css"}).state("promo-theme-bankTheme",{url:"/promo-theme-bankTheme/:id",templateUrl:"../view/promo/theme/bankTheme.html",controller:"promo_BankThemeCtrl",css:"../css/promo/theme-fund.css"}).state("promo-preview",{url:"/promo-preview",templateUrl:"../view/promo/preview.html",controller:"promo_PreviewCtrl"}).state("open-fillCustomerInfo",{url:"/open-fillCustomerInfo?b",templateUrl:"../view/open/fillCustomerInfo.html",controller:"open_FillCustomerInfoCtrl",openStatus:!0}).state("promo-theme-jGongTheme",{url:"/promo-theme-jGongTheme/:id",templateUrl:"../view/promo/theme/jGongTheme.html",controller:"promo_ThemeCtrl"}).state("promo-theme-xFeiTheme",{url:"/promo-theme-xFeiTheme/:id",templateUrl:"../view/promo/theme/xFeiTheme.html",controller:"promo_ThemeCtrl"}).state("promo-theme-hJinTheme",{url:"/promo-theme-hJinTheme/:id",templateUrl:"../view/promo/theme/hJinTheme.html",controller:"promo_ThemeCtrl"}).state("us",{url:"/us",templateUrl:"../view/us/index.html",controller:"us_IndexCtrl"}).state("us-feedback",{url:"/us-feedback",templateUrl:"../view/us/feedback.html",controller:"us_FeedbackCtrl"}).state("us-contact",{url:"/us-contact",templateUrl:"../view/us/contact.html"}).state("us-about",{url:"/us-about",templateUrl:"../view/us/about.html"}),t.otherwise("/tab/index")}])}),define("bootstrap",["app","routes"],function(e){"use strict";var t=function(){cordova.plugins.Keyboard.disableScroll(!0),angular.bootstrap(document,[e.name])},n=!1;if("undefined"==typeof cordova&&location.href.indexOf("abs_path=")!=-1){var r=location.href.toString().split("abs_path=")[1].split("&")[0];if(r&&""!=r){n=!0;var o=document.createElement("script");o.charset="utf-8",o.src=decodeURIComponent(r),o.async="async",document.head.appendChild(o)}}document.addEventListener("deviceready",t,!1),"undefined"!=typeof cordova||n||angular.element().ready(function(){try{angular.bootstrap(document,[e.name])}catch(t){var n=t.stack||t.message||t;"undefined"!=typeof Messenger&&Messenger.sendMsg("ym_reportError",{error:n.toString()},null,null),console.error(n)}})});